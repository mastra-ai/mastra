---
sidebar_position: 1
title: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: Chef Michel"
description: Mastra ã§ã€æ‰‹æŒã¡ã®é£Ÿæã‚’ä½¿ã£ã¦èª¿ç†ã‚’æ”¯æ´ã™ã‚‹ã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã€‚
---

import YouTube from '@site/src/components/YouTube';

# AIã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ \{#building-an-ai-chef-assistant\}

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€æ‰‹å…ƒã®é£Ÿæã§æ–™ç†ã‚’ä½œã‚‹ã®ã‚’æ‰‹ä¼ã†ã€ŒChef Assistantã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

ã¾ãšã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ Mastra ã«ç™»éŒ²ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚æ¬¡ã«ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã—ã€ã•ã¾ã–ã¾ãªå¿œç­”å½¢å¼ã‚’æŠŠæ¡ã—ã¾ã™ã€‚æœ€å¾Œã«ã€Mastra ã®ãƒ­ãƒ¼ã‚«ãƒ« API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆçµŒç”±ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

<YouTube id="_tZhOqHCrF0" />

## å‰ææ¡ä»¶ \{#prerequisites\}

* Node.js `v20.0` ä»¥é™ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
* ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã®[ãƒ¢ãƒ‡ãƒ«ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼](/docs/models/providers)ã® API ã‚­ãƒ¼
* æ—¢å­˜ã® Mastra ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆæ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](/docs/getting-started/installation)ã‚’ã”å‚ç…§ãã ã•ã„ï¼‰

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆ \{#creating-the-agent\}

Mastra ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ã¾ãš `Agent` ã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ã€ãã®å¾Œ Mastra ã«ç™»éŒ²ã—ã¾ã™ã€‚

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã™ã‚‹ \{#define-the-agent\}

æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ« `src/mastra/agents/chefAgent.ts` ã‚’ä½œæˆã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚

```ts copy filename="src/mastra/agents/chefAgent.ts"
import { openai } from '@ai-sdk/openai';
import { Agent } from '@mastra/core/agent';

export const chefAgent = new Agent({
  name: 'chef-agent',
  instructions:
    'ã‚ãªãŸã¯Michelã§ã™ã€‚å®Ÿè·µçš„ã§çµŒé¨“è±Šå¯Œãªå®¶åº­æ–™ç†äººã§ã™ã€‚' +
    'æ‰‹å…ƒã«ã‚ã‚‹é£Ÿæã‚’ä½¿ã£ã¦æ–™ç†ãŒã§ãã‚‹ã‚ˆã†äººã€…ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚',
  model: openai('gpt-4o-mini'),
});
```

### Mastra ã«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²ã™ã‚‹ \{#register-the-agent-with-mastra\}

`src/mastra/index.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã™ï¼š

```ts copy filename="src/mastra/index.ts" {2, 5}
import { Mastra } from '@mastra/core';
import { chefAgent } from './agents/chefAgent';

export const mastra = new Mastra({
  agents: { chefAgent },
});
```

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®å¯¾è©± \{#interacting-with-the-agent\}

è¦ä»¶ã«å¿œã˜ã¦ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã—ã€ã•ã¾ã–ã¾ãªå½¢å¼ã§å¿œç­”ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§ã¯ã€ç”Ÿæˆã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€æ§‹é€ åŒ–å‡ºåŠ›ã®å–å¾—æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

### ãƒ†ã‚­ã‚¹ãƒˆå¿œç­”ã®ç”Ÿæˆ \{#generating-text-responses\}

æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ« `src/index.ts` ã‚’ä½œæˆã—ã€`main()` é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚é–¢æ•°å†…ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®å•ã„åˆã‚ã›ã‚’ä½œæˆã—ã€ãã®å¿œç­”ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã—ã¾ã™ã€‚

```ts copy filename="src/index.ts"
import { chefAgent } from './mastra/agents/chefAgent';

async function main() {
  const query =
    'ç§ã®ã‚­ãƒƒãƒãƒ³ã«ã¯ã€ãƒ‘ã‚¹ã‚¿ã€ãƒˆãƒãƒˆç¼¶ã€ãƒ‹ãƒ³ãƒ‹ã‚¯ã€ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«ã€ãã—ã¦ä¹¾ç‡¥ãƒãƒ¼ãƒ–(ãƒã‚¸ãƒ«ã¨ã‚ªãƒ¬ã‚¬ãƒ)ãŒã‚ã‚Šã¾ã™ã€‚ä½•ãŒä½œã‚Œã¾ã™ã‹?';
  console.log(`ã‚¯ã‚¨ãƒª: ${query}`);

  const response = await chefAgent.generate([{ role: 'user', content: query }]);
  console.log('\nğŸ‘¨â€ğŸ³ ã‚·ã‚§ãƒ•ãƒ»ãƒŸã‚·ã‚§ãƒ«:', response.text);
}

main();
```

ãã®å¾Œã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash copy
npx bun src/index.ts
```

æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™:

```
Query: ç§ã®ã‚­ãƒƒãƒãƒ³ã«ã¯ã€ãƒ‘ã‚¹ã‚¿ã€ãƒˆãƒãƒˆç¼¶ã€ãƒ‹ãƒ³ãƒ‹ã‚¯ã€ã‚ªãƒªãƒ¼ãƒ–ã‚ªã‚¤ãƒ«ã€ãã—ã¦ä¹¾ç‡¥ãƒãƒ¼ãƒ–(ãƒã‚¸ãƒ«ã¨ã‚ªãƒ¬ã‚¬ãƒ)ãŒã‚ã‚Šã¾ã™ã€‚ä½•ãŒä½œã‚Œã¾ã™ã‹?

ğŸ‘¨â€ğŸ³ Chef Michel: ç¾å‘³ã—ã„ãƒ‘ã‚¹ã‚¿ãƒ»ã‚¢ãƒ«ãƒ»ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãŒä½œã‚Œã¾ã™ã‚ˆ!ä½œã‚Šæ–¹ã¯æ¬¡ã®é€šã‚Šã§ã™...
```

### ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­” \{#streaming-responses\}

å‰ã®ä¾‹ã§ã¯ã€é€²æ—ãŒè¦‹ãˆãªã„ã¾ã¾ã—ã°ã‚‰ãå¿œç­”ã‚’å¾…ã¤ã“ã¨ã«ãªã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‡ºåŠ›ã‚’ç”Ÿæˆã™ã‚‹ãã°ã‹ã‚‰è¡¨ç¤ºã™ã‚‹ã«ã¯ã€å¿œç­”ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```ts copy filename="src/index.ts"
import { chefAgent } from './mastra/agents/chefAgent';

async function main() {
  const query =
    "ä»Šã€å‹é”ã®å®¶ã«ã„ã‚‹ã‚“ã ã‘ã©ã€é¶ã‚‚ã‚‚è‚‰ã€ã‚³ã‚³ãƒŠãƒƒãƒ„ãƒŸãƒ«ã‚¯ã€ã•ã¤ã¾ã„ã‚‚ã€ãã‚Œã¨ã‚«ãƒ¬ãƒ¼ç²‰ãŒã‚ã‚‹ã‚“ã ã€‚";
  console.log(`ã‚¯ã‚¨ãƒª: ${query}`);

  const stream = await chefAgent.stream([{ role: 'user', content: query }]);

  console.log('\n ã‚·ã‚§ãƒ•ãƒ»ãƒŸã‚·ã‚§ãƒ«: ');

  for await (const chunk of stream.textStream) {
    process.stdout.write(chunk);
  }

  console.log('\n\nâœ… ãƒ¬ã‚·ãƒ”å®Œæˆ!');
}

main();
```

ãã®å¾Œã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚‚ã†ä¸€åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash copy
npx bun src/index.ts
```

ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ã«ãªã‚‹ã¯ãšã§ã™ã€‚ä»Šå›ã¯å¤§ããªå¡Šã§ã¯ãªãã€è¡Œã”ã¨ã«èª­ã¿é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚

```
ã‚¯ã‚¨ãƒª: ä»Šã€å‹äººã®å®¶ã«ã„ã‚‹ã®ã§ã™ãŒã€é¶ã‚‚ã‚‚è‚‰ã€ã‚³ã‚³ãƒŠãƒƒãƒ„ãƒŸãƒ«ã‚¯ã€ã•ã¤ã¾ã„ã‚‚ã€ã‚«ãƒ¬ãƒ¼ç²‰ãŒã‚ã‚Šã¾ã™ã€‚

ğŸ‘¨â€ğŸ³ ã‚·ã‚§ãƒ• Michel:
ã„ã„ã§ã™ã­!ç¾å‘³ã—ã„ãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼ãŒä½œã‚Œã¾ã™ã‚ˆ...

âœ… ãƒ¬ã‚·ãƒ”å®Œæˆ!
```

### æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã§ãƒ¬ã‚·ãƒ”ã‚’ç”Ÿæˆã™ã‚‹ \{#generating-a-recipe-with-structured-data\}

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å¿œç­”ã‚’äººã«è¡¨ç¤ºã™ã‚‹ä»£ã‚ã‚Šã«ã€ã‚³ãƒ¼ãƒ‰ã®åˆ¥ã®éƒ¨åˆ†ã¸æ¸¡ã—ãŸã„å ´åˆãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã†ã—ãŸå ´åˆã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ[æ§‹é€ åŒ–å‡ºåŠ›](/docs/agents/overview#structured-output)ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

`src/index.ts` ã‚’æ¬¡ã®å†…å®¹ã«å¤‰æ›´ã—ã¦ãã ã•ã„:

```ts copy filename="src/index.ts"
import { chefAgent } from './mastra/agents/chefAgent';
import { z } from 'zod';

async function main() {
  const query = 'ãƒ©ã‚¶ãƒ‹ã‚¢ã‚’ä½œã‚ŠãŸã„ã®ã§ã™ãŒã€ãƒ¬ã‚·ãƒ”ã‚’æ•™ãˆã¦ã‚‚ã‚‰ãˆã¾ã™ã‹?';
  console.log(`ã‚¯ã‚¨ãƒª: ${query}`);

  // Zodã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
  const schema = z.object({
    ingredients: z.array(
      z.object({
        name: z.string(),
        amount: z.string(),
      }),
    ),
    steps: z.array(z.string()),
  });

  const response = await chefAgent.generate([{ role: 'user', content: query }], {
    structuredOutput: {
      schema,
    },
    maxSteps: 1,
  });
  console.log('\nğŸ‘¨â€ğŸ³ ã‚·ã‚§ãƒ•ãƒ»ãƒŸã‚·ã‚§ãƒ«:', response.object);
}

main();
```

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚‚ã†ä¸€åº¦å®Ÿè¡Œã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ï¼š

```
ã‚¯ã‚¨ãƒª: ãƒ©ã‚¶ãƒ‹ã‚¢ã‚’ä½œã‚ŠãŸã„ã®ã§ã™ãŒã€ãƒ¬ã‚·ãƒ”ã‚’ç”Ÿæˆã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹?

ğŸ‘¨â€ğŸ³ Chef Michel: {
  ingredients: [
    { name: "ãƒ©ã‚¶ãƒ‹ã‚¢ç”¨ãƒ‘ã‚¹ã‚¿", amount: "12æš" },
    { name: "ç‰›ã²ãè‚‰", amount: "450g" },
    // ...
  ],
  steps: [
    "ã‚ªãƒ¼ãƒ–ãƒ³ã‚’190â„ƒ(375Â°F)ã«äºˆç†±ã™ã‚‹ã€‚",
    "ãƒ©ã‚¶ãƒ‹ã‚¢ç”¨ãƒ‘ã‚¹ã‚¿ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¡¨ç¤ºé€šã‚Šã«èŒ¹ã§ã‚‹ã€‚",
    // ...
  ]
}
```

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹• \{#running-the-agent-server\}

Mastra ã® API ã‚’ä½¿ã£ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚

### `mastra dev` ã®ä½¿ç”¨ \{#using-mastra-dev\}

`mastra dev` ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã§ãã¾ã™ã€‚

```bash copy
mastra dev
```

ã“ã‚Œã«ã‚ˆã‚Šã€ç™»éŒ²æ¸ˆã¿ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚[playground](/docs/getting-started/local-dev-playground)å†…ã§ã€UIã‚’é€šã˜ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

### Chef Assistant API ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ \{#accessing-the-chef-assistant-api\}

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€`mastra dev` ã¯ `http://localhost:4111` ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚Chef Assistant ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æ¬¡ã®å ´æ‰€ã§åˆ©ç”¨ã§ãã¾ã™ï¼š

```
POST http://localhost:4111/api/agents/chefAgent/generate
```

### `curl` ã‚’ä½¿ã£ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®ã‚„ã‚Šå–ã‚Š \{#interacting-with-the-agent-via-curl\}

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ `curl` ã‚’ä½¿ã£ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã§ãã¾ã™ã€‚

```bash copy
curl -X POST http://localhost:4111/api/agents/chefAgent/generate \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": "åµã¨å°éº¦ç²‰ã¨ç‰›ä¹³ãŒã‚ã‚Šã¾ã™ã€‚ä½•ãŒä½œã‚Œã¾ã™ã‹?"
      }
    ]
  }'
```

**ã‚µãƒ³ãƒ—ãƒ«å›ç­”:**

```json
{
  "text": "ç¾å‘³ã—ã„ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ãŒä½œã‚Œã¾ã™!ç°¡å˜ãªãƒ¬ã‚·ãƒ”ã‚’ã”ç´¹ä»‹ã—ã¾ã™..."
}
```

---
phase: 06-playground-integration
plan: 05
type: execute
wave: 3
depends_on: ["06-03"]
files_modified:
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list.tsx
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/run-history.tsx
  - packages/playground-ui/src/domains/datasets/components/run-trigger/run-trigger-dialog.tsx
  - packages/playground-ui/src/domains/datasets/components/run-trigger/target-selector.tsx
  - packages/playground-ui/src/domains/datasets/components/run-trigger/scorer-selector.tsx
  - packages/playground-ui/src/domains/datasets/index.ts
  - packages/playground/src/pages/datasets/dataset/index.tsx
  - packages/playground/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can view dataset detail page with items list"
    - "User can see run history for a dataset"
    - "User can trigger a run by selecting target and scorers"
    - "Run progress is visible while running"
    - "User can select two runs with checkboxes for comparison"
  artifacts:
    - path: "packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx"
      provides: "Dataset detail layout with tabs"
    - path: "packages/playground-ui/src/domains/datasets/components/run-trigger/run-trigger-dialog.tsx"
      provides: "Dialog for triggering dataset runs"
    - path: "packages/playground/src/pages/datasets/dataset/index.tsx"
      provides: "Dataset detail page"
  key_links:
    - from: "packages/playground/src/pages/datasets/dataset/index.tsx"
      to: "/datasets/:datasetId"
      via: "React Router params"
    - from: "packages/playground-ui/src/domains/datasets/components/run-trigger/run-trigger-dialog.tsx"
      to: "useDatasetMutations().triggerRun"
      via: "mutation call"
---

<objective>
Create dataset detail page with items list, run history, and run triggering.

Purpose: Allow users to view dataset contents, trigger evaluation runs, and see run history.
Output: Complete dataset detail UI with items, runs, and run trigger flow.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-playground-integration/06-CONTEXT.md
@.planning/phases/06-playground-integration/06-RESEARCH.md
@.planning/phases/06-playground-integration/06-03-SUMMARY.md

# Reference patterns
@packages/playground-ui/src/domains/agents/components/agent-detail/agent-detail.tsx
@packages/playground-ui/src/domains/workflows/components/workflow-detail/workflow-detail.tsx
@packages/playground/src/pages/agents/agent/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dataset detail components</name>
  <files>
    packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx
    packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list.tsx
    packages/playground-ui/src/domains/datasets/components/dataset-detail/run-history.tsx
  </files>
  <action>
Create dataset detail components following agent-detail pattern.

1. Create items-list.tsx:
- Use Table with columns: input (preview), expectedOutput (preview), created date
- Truncate long values with ellipsis (max 100 chars)
- Handle loading state with skeleton
- Show "No items yet" empty state with "Add Item" button
- Props: items: DatasetItem[], isLoading: boolean, onAddClick: () => void

2. Create run-history.tsx:
- Use Table with columns: status (badge), target, created date, checkbox (for comparison)
- Status badges: pending (yellow), running (blue), completed (green), failed (red)
- Track selected runs with useState<string[]> for comparison
- Show "Compare" button enabled when exactly 2 runs selected
- On "Compare" click, navigate to comparison view
- Props: runs: DatasetRun[], isLoading: boolean, datasetId: string

3. Create dataset-detail.tsx:
- Layout with header (dataset name, version, "Run" button, edit/delete actions)
- Tabs: Items, Run History
- Items tab shows ItemsList
- Run History tab shows RunHistory
- "Run" button opens RunTriggerDialog
- Use useDataset(datasetId) and useDatasetRuns(datasetId) hooks
- Track active tab in useState
- Props: datasetId: string
  </action>
  <verify>TypeScript compiles: `cd packages/playground-ui && pnpm tsc --noEmit`</verify>
  <done>Dataset detail components created with items list and run history</done>
</task>

<task type="auto">
  <name>Task 2: Create run trigger dialog and page</name>
  <files>
    packages/playground-ui/src/domains/datasets/components/run-trigger/run-trigger-dialog.tsx
    packages/playground-ui/src/domains/datasets/components/run-trigger/target-selector.tsx
    packages/playground-ui/src/domains/datasets/components/run-trigger/scorer-selector.tsx
    packages/playground-ui/src/domains/datasets/index.ts
    packages/playground/src/pages/datasets/dataset/index.tsx
    packages/playground/src/App.tsx
  </files>
  <action>
1. Create target-selector.tsx:
- Two-step selection: first targetType (Agent/Workflow), then specific target
- Use Select components from ds/components
- Fetch agents with useAgents(), workflows with useWorkflows()
- Props: targetType, setTargetType, targetId, setTargetId

2. Create scorer-selector.tsx:
- Multi-select for scorers (optional)
- Fetch scorers with useScorers() from scores domain
- Use MultiSelect or checkbox list pattern
- Props: selectedScorers: string[], setSelectedScorers

3. Create run-trigger-dialog.tsx following RESEARCH.md pattern:
- Dialog with target selector and scorer selector
- "Run" button calls triggerRun mutation
- On success: close dialog, invalidate runs query
- Show loading state while triggering
- Props: datasetId, open, onOpenChange, onSuccess?

4. Update datasets/index.ts to export new components:
```typescript
export { DatasetDetail } from './components/dataset-detail/dataset-detail';
export { ItemsList } from './components/dataset-detail/items-list';
export { RunHistory } from './components/dataset-detail/run-history';
export { RunTriggerDialog } from './components/run-trigger/run-trigger-dialog';
```

5. Create packages/playground/src/pages/datasets/dataset/index.tsx:
```typescript
import { useParams } from 'react-router';
import {
  Header,
  HeaderTitle,
  MainContentLayout,
  MainContentContent,
  Icon,
  DatasetDetail,
} from '@mastra/playground-ui';
import { Database } from 'lucide-react';

function Dataset() {
  const { datasetId } = useParams<{ datasetId: string }>();

  if (!datasetId) {
    return <div>Dataset not found</div>;
  }

  return (
    <MainContentLayout>
      <MainContentContent>
        <DatasetDetail datasetId={datasetId} />
      </MainContentContent>
    </MainContentLayout>
  );
}

export { Dataset };
export default Dataset;
```

6. Update App.tsx - add route for dataset detail:
```typescript
{
  path: '/datasets/:datasetId',
  lazy: async () => {
    const { Dataset } = await import('./pages/datasets/dataset');
    return { Component: Dataset };
  },
},
```
  </action>
  <verify>
1. TypeScript compiles: `cd packages/playground && pnpm tsc --noEmit`
2. Route exists: grep for "/datasets/:datasetId" in App.tsx
  </verify>
  <done>Run trigger dialog and dataset detail page created</done>
</task>

</tasks>

<verification>
1. All TypeScript compiles
2. DatasetDetail shows items list and run history tabs
3. RunTriggerDialog allows target and scorer selection
4. Run history shows checkboxes for comparison selection
5. /datasets/:datasetId route works
</verification>

<success_criteria>
- User can view dataset detail at /datasets/:datasetId
- User can see items list with input/output preview
- User can see run history with status badges
- User can trigger run via dialog
- User can select two runs for comparison
</success_criteria>

<output>
After completion, create `.planning/phases/06-playground-integration/06-05-SUMMARY.md`
</output>

---
phase: 06-playground-integration
plan: 04
type: execute
wave: 3
depends_on: ['06-03']
files_modified:
  - packages/playground-ui/src/domains/datasets/components/datasets-table/datasets-table.tsx
  - packages/playground-ui/src/domains/datasets/components/datasets-table/columns.tsx
  - packages/playground-ui/src/domains/datasets/components/create-dataset-dialog.tsx
  - packages/playground-ui/src/domains/datasets/components/empty-datasets-table.tsx
  - packages/playground-ui/src/domains/datasets/index.ts
  - packages/playground/src/pages/datasets/index.tsx
  - packages/playground/src/components/ui/app-sidebar.tsx
  - packages/playground/src/App.tsx
autonomous: true

must_haves:
  truths:
    - 'User sees Datasets in sidebar navigation'
    - 'User can view list of datasets with name, version, created date'
    - 'User can search datasets by name'
    - 'User can create dataset via Create Dataset button'
    - 'User is redirected to dataset detail after creation'
    - 'Empty state shows when no datasets exist'
  artifacts:
    - path: 'packages/playground-ui/src/domains/datasets/components/datasets-table/datasets-table.tsx'
      provides: 'Table component for datasets list'
    - path: 'packages/playground-ui/src/domains/datasets/components/create-dataset-dialog.tsx'
      provides: 'Modal dialog for creating datasets'
    - path: 'packages/playground/src/pages/datasets/index.tsx'
      provides: 'Datasets list page'
  key_links:
    - from: 'packages/playground/src/components/ui/app-sidebar.tsx'
      to: '/datasets'
      via: 'navigation link'
    - from: 'packages/playground/src/pages/datasets/index.tsx'
      to: 'packages/playground-ui/src/domains/datasets'
      via: 'component imports'
---

<objective>
Create datasets list page with table, create dialog, and sidebar navigation.

Purpose: Allow users to view and create datasets from playground.
Output: Complete datasets list UI with CRUD and navigation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-playground-integration/06-CONTEXT.md
@.planning/phases/06-playground-integration/06-RESEARCH.md
@.planning/phases/06-playground-integration/06-03-SUMMARY.md

# Reference patterns

@packages/playground-ui/src/domains/agents/components/agent-table/agent-table.tsx
@packages/playground-ui/src/domains/agents/components/create-agent/create-agent-dialog.tsx
@packages/playground/src/pages/agents/index.tsx
@packages/playground/src/components/ui/app-sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DatasetsTable and CreateDatasetDialog components</name>
  <files>
    packages/playground-ui/src/domains/datasets/components/datasets-table/datasets-table.tsx
    packages/playground-ui/src/domains/datasets/components/datasets-table/columns.tsx
    packages/playground-ui/src/domains/datasets/components/create-dataset-dialog.tsx
    packages/playground-ui/src/domains/datasets/components/empty-datasets-table.tsx
  </files>
  <action>
Create components following agents pattern from RESEARCH.md.

1. Create columns.tsx (following agent-table pattern):

```typescript
import { createColumnHelper } from '@tanstack/react-table';
import type { Dataset } from '@mastra/client-js';

const columnHelper = createColumnHelper<Dataset>();

export const columns = [
  columnHelper.accessor('name', {
    header: 'Name',
    cell: info => info.getValue(),
  }),
  columnHelper.accessor('version', {
    header: 'Version',
    cell: info => new Date(info.getValue()).toLocaleDateString(),
  }),
  columnHelper.accessor('createdAt', {
    header: 'Created',
    cell: info => new Date(info.getValue()).toLocaleDateString(),
  }),
];
```

2. Create datasets-table.tsx:

- Use @tanstack/react-table with columns
- Add Searchbar for filtering by name
- Use Table, Thead, Tbody, Row, Cell from ds/components
- On row click, navigate to dataset detail using useLinkComponent().paths.datasetLink(id)
- If datasets.length === 0, render EmptyDatasetsTable
- Pass onCreateClick prop for empty state CTA

3. Create empty-datasets-table.tsx:

- Follow empty state pattern from agents
- Show "No datasets yet" message
- Include "Create Dataset" button that calls onCreateClick

4. Create create-dataset-dialog.tsx:

- Use Dialog, DialogContent, DialogHeader, DialogTitle from ds/components
- Form fields: name (required), description (optional)
- On submit: call createDataset from useDatasetMutations()
- Show toast on success/error using sonner
- Call onSuccess(datasetId) after creation
- Handle isPending state for loading indicator
  </action>
  <verify>TypeScript compiles: `cd packages/playground-ui && pnpm tsc --noEmit`</verify>
  <done>DatasetsTable and CreateDatasetDialog components created</done>
  </task>

<task type="auto">
  <name>Task 2: Create Datasets page and update navigation</name>
  <files>
    packages/playground-ui/src/domains/datasets/index.ts
    packages/playground/src/pages/datasets/index.tsx
    packages/playground/src/components/ui/app-sidebar.tsx
    packages/playground/src/App.tsx
  </files>
  <action>
1. Update datasets/index.ts to export components:
```typescript
// Components
export { DatasetsTable } from './components/datasets-table/datasets-table';
export { CreateDatasetDialog } from './components/create-dataset-dialog';
export { EmptyDatasetsTable } from './components/empty-datasets-table';
```

2. Create packages/playground/src/pages/datasets/index.tsx following agents page pattern:

```typescript
import { useState } from 'react';
import { Plus, Database } from 'lucide-react';
import {
  Header,
  HeaderTitle,
  MainContentLayout,
  MainContentContent,
  Icon,
  Button,
  HeaderAction,
  useLinkComponent,
  useDatasets,
  DatasetsTable,
  CreateDatasetDialog,
} from '@mastra/playground-ui';

function Datasets() {
  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);
  const { navigate, paths } = useLinkComponent();
  const { data, isLoading } = useDatasets();
  const datasets = data?.datasets ?? [];

  const handleDatasetCreated = (datasetId: string) => {
    setIsCreateDialogOpen(false);
    navigate(paths.datasetLink(datasetId));
  };

  return (
    <MainContentLayout>
      <Header>
        <HeaderTitle>
          <Icon><Database /></Icon>
          Datasets
        </HeaderTitle>
        <HeaderAction>
          <Button variant="light" onClick={() => setIsCreateDialogOpen(true)}>
            <Icon><Plus /></Icon>
            Create Dataset
          </Button>
        </HeaderAction>
      </Header>

      <MainContentContent isCentered={!isLoading && datasets.length === 0}>
        <DatasetsTable
          datasets={datasets}
          isLoading={isLoading}
          onCreateClick={() => setIsCreateDialogOpen(true)}
        />
      </MainContentContent>

      <CreateDatasetDialog
        open={isCreateDialogOpen}
        onOpenChange={setIsCreateDialogOpen}
        onSuccess={handleDatasetCreated}
      />
    </MainContentLayout>
  );
}

export { Datasets };
export default Datasets;
```

3. Update app-sidebar.tsx - add Datasets nav item under Observability section:
   Find the observability section in mainNavigation and add Datasets link:

```typescript
{
  name: 'Datasets',
  url: '/datasets',
  icon: <Database className="size-4" />,
  isOnMastraPlatform: true,
},
```

Import Database from lucide-react at top.

4. Update App.tsx - add route for datasets page:
   Find routes array and add:

```typescript
{
  path: '/datasets',
  lazy: async () => {
    const { Datasets } = await import('./pages/datasets');
    return { Component: Datasets };
  },
},
```

  </action>
  <verify>
1. TypeScript compiles: `cd packages/playground && pnpm tsc --noEmit`
2. Route exists: grep for "/datasets" in App.tsx
3. Sidebar link exists: grep for "Datasets" in app-sidebar.tsx
  </verify>
  <done>Datasets page accessible via sidebar navigation</done>
</task>

</tasks>

<verification>
1. All TypeScript compiles in both packages
2. DatasetsTable renders with search and row navigation
3. CreateDatasetDialog creates dataset and redirects
4. Sidebar shows Datasets link under Observability
5. /datasets route loads Datasets page
</verification>

<success_criteria>

- User can navigate to /datasets from sidebar
- User can see list of datasets with name, version, created date
- User can search datasets by name
- User can create dataset via dialog
- Empty state appears when no datasets exist
  </success_criteria>

<output>
After completion, create `.planning/phases/06-playground-integration/06-04-SUMMARY.md`
</output>

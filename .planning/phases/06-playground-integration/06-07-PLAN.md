---
phase: 06-playground-integration
plan: 07
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/playground-ui/src/domains/datasets/components/edit-dataset-dialog.tsx
  - packages/playground-ui/src/domains/datasets/components/delete-dataset-dialog.tsx
  - packages/playground-ui/src/domains/datasets/components/edit-item-dialog.tsx
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list.tsx
  - packages/playground-ui/src/domains/datasets/index.ts
  - packages/playground/src/pages/datasets/dataset/index.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Dataset detail page shows Edit and Delete buttons"
    - "Edit dataset dialog pre-populates with current name/description"
    - "Delete dataset shows confirmation dialog before deleting"
    - "Items list shows Actions column with edit/delete per row"
    - "Add Item button visible when items exist"
  artifacts:
    - path: "packages/playground-ui/src/domains/datasets/components/edit-dataset-dialog.tsx"
      provides: "Edit dataset modal with form"
    - path: "packages/playground-ui/src/domains/datasets/components/delete-dataset-dialog.tsx"
      provides: "Delete confirmation dialog"
    - path: "packages/playground-ui/src/domains/datasets/components/edit-item-dialog.tsx"
      provides: "Edit item modal with form"
  key_links:
    - from: "packages/playground/src/pages/datasets/dataset/index.tsx"
      to: "EditDatasetDialog, DeleteDatasetDialog"
      via: "onEditClick, onDeleteClick callbacks"
    - from: "packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list.tsx"
      to: "useDatasetMutations"
      via: "updateItem, deleteItem"
---

<objective>
Fix UI gaps for dataset/item edit and delete operations.

Purpose: UAT tests 11, 12, 13 failed - edit/delete buttons missing
Output: Working edit/delete flows for datasets and items, Add Item button always visible
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/debug/dataset-edit-delete.md
@.planning/debug/item-edit-delete.md
@.planning/debug/add-item-button-missing.md
@packages/playground-ui/src/domains/datasets/components/create-dataset-dialog.tsx
@packages/playground-ui/src/domains/agents/components/chat-threads.tsx
@packages/playground-ui/src/domains/datasets/hooks/use-dataset-mutations.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EditDatasetDialog and DeleteDatasetDialog</name>
  <files>
    packages/playground-ui/src/domains/datasets/components/edit-dataset-dialog.tsx
    packages/playground-ui/src/domains/datasets/components/delete-dataset-dialog.tsx
    packages/playground-ui/src/domains/datasets/index.ts
  </files>
  <action>
Create EditDatasetDialog:
- Copy pattern from CreateDatasetDialog
- Props: open, onOpenChange, dataset (with id, name, description)
- Pre-populate form with dataset.name, dataset.description
- Use updateDataset mutation from useDatasetMutations
- Toast success/error on submit
- Export from datasets/index.ts

Create DeleteDatasetDialog:
- Copy pattern from DeleteThreadDialog in chat-threads.tsx
- Props: open, onOpenChange, datasetId, datasetName, onConfirm
- Use AlertDialog components (AlertDialog.Content, .Header, .Title, .Description, .Footer, .Action, .Cancel)
- Use deleteDataset mutation from useDatasetMutations
- Toast success/error on confirm
- Export from datasets/index.ts

Update datasets/index.ts:
- Add exports for EditDatasetDialog and DeleteDatasetDialog
  </action>
  <verify>
TypeScript compiles without errors:
```bash
cd packages/playground-ui && pnpm build
```
  </verify>
  <done>
EditDatasetDialog and DeleteDatasetDialog exist and export from index.ts
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire dataset dialogs and add item edit/delete to ItemsList</name>
  <files>
    packages/playground/src/pages/datasets/dataset/index.tsx
    packages/playground-ui/src/domains/datasets/components/edit-item-dialog.tsx
    packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list.tsx
    packages/playground-ui/src/domains/datasets/index.ts
  </files>
  <action>
Wire dataset dialogs in playground page (dataset/index.tsx):
- Import EditDatasetDialog, DeleteDatasetDialog from @mastra/playground-ui
- Add state: editDialogOpen, deleteDialogOpen
- Fetch dataset via useDataset(datasetId) hook
- Pass onEditClick={() => setEditDialogOpen(true)} to DatasetDetail
- Pass onDeleteClick={() => setDeleteDialogOpen(true)} to DatasetDetail
- Render EditDatasetDialog with dataset data, on success stay on page
- Render DeleteDatasetDialog, on success navigate to /datasets

Create EditItemDialog:
- Copy pattern from AddItemDialog
- Props: open, onOpenChange, datasetId, item (with id, input, expectedOutput)
- Pre-populate form with item data
- Use updateItem mutation
- Export from datasets/index.ts

Update ItemsList:
- Add 4th column header "Actions" (width: 100)
- Add Actions column cell with Pencil (edit) and Trash2 (delete) icon buttons
- Add props: onEditItem, onDeleteItem callbacks
- Add local state for delete confirmation (deleteItemId)
- Render AlertDialog for delete confirmation inline (same pattern as chat-threads.tsx)
- Add Item button: Render Button with Plus icon above table when items.length > 0

Wire in dataset/index.tsx:
- Add state: editItemDialogOpen, itemToEdit
- Pass onEditItem and onDeleteItem callbacks to DatasetDetail/ItemsList
- Render EditItemDialog when itemToEdit is set
  </action>
  <verify>
Build succeeds and manual test in browser:
```bash
cd packages/playground-ui && pnpm build
cd packages/playground && pnpm build
```
Navigate to dataset detail - Edit/Delete buttons should appear in header
Items list should show Actions column with edit/delete buttons per row
Add Item button should be visible above table when items exist
  </verify>
  <done>
- Dataset Edit/Delete buttons appear and open dialogs
- Items have edit/delete actions per row with confirmation
- Add Item button visible when items exist
  </done>
</task>

</tasks>

<verification>
1. Build playground-ui: `cd packages/playground-ui && pnpm build`
2. Build playground: `cd packages/playground && pnpm build`
3. Run dev server: `pnpm dev:playground`
4. Navigate to dataset detail page
5. Verify: Edit, Delete buttons in header trigger dialogs
6. Verify: Items list has Actions column with edit/delete per row
7. Verify: Add Item button appears above table when items exist
</verification>

<success_criteria>
- UAT test 11 passes: Dataset edit/delete actions work
- UAT test 12 passes: Item edit/delete actions work
- UAT test 13 passes: Add Item button visible after first item
</success_criteria>

<output>
After completion, create `.planning/phases/06-playground-integration/06-07-SUMMARY.md`
</output>

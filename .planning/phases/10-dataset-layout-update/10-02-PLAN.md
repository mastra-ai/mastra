---
phase: 10-dataset-layout-update
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-header.tsx
  - packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx
autonomous: true

must_haves:
  truths:
    - "Header displays dataset name (text-xl font-semibold) and description below"
    - "Three-dot menu contains Edit Dataset, Duplicate Dataset (disabled), Delete Dataset"
    - "Run Experiment button uses outline variant (not primary)"
    - "Edit/Delete buttons removed from header, consolidated into menu"
  artifacts:
    - path: "packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-header.tsx"
      provides: "Extracted header component with menu"
      exports: ["DatasetHeader", "DatasetHeaderProps"]
  key_links:
    - from: "dataset-header.tsx"
      to: "@/ds/components/Popover"
      via: "actions menu"
      pattern: "PopoverContent"
    - from: "dataset-detail.tsx"
      to: "dataset-header.tsx"
      via: "component import"
      pattern: "DatasetHeader"
---

<objective>
Restructure DatasetDetail header with three-dot menu and cleaner layout.

Purpose: Consolidate Edit/Delete into menu, prepare for description display
Output: DatasetHeader component with reorganized actions
</objective>

<execution_context>
@/Users/grzegorzlobinski/.claude/get-shit-done/workflows/execute-plan.md
@/Users/grzegorzlobinski/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-dataset-layout-update/10-CONTEXT.md
@.planning/phases/10-dataset-layout-update/10-RESEARCH.md
@.planning/phases/10-dataset-layout-update/10-01-SUMMARY.md

# Current implementation
@packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx

# Popover menu pattern
@packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list-actions.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DatasetHeader component</name>
  <files>packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-header.tsx</files>
  <action>
Create extracted header component:

```typescript
'use client';

import { useState } from 'react';
import { Popover, PopoverTrigger, PopoverContent } from '@/ds/components/Popover';
import { Button } from '@/ds/components/Button';
import { Skeleton } from '@/ds/components/Skeleton';
import { Icon } from '@/ds/icons/Icon';
import { MoreVertical, Pencil, Copy, Trash2, Play } from 'lucide-react';

export interface DatasetHeaderProps {
  name?: string;
  description?: string;
  version?: Date | string;
  isLoading?: boolean;
  onEditClick?: () => void;
  onDeleteClick?: () => void;
  runTriggerSlot?: React.ReactNode;
  onRunClick?: () => void;
}
```

Layout structure:
```
<header className="flex items-start justify-between px-4 py-6 gap-4">
  <!-- Left side: Name + Description -->
  <div className="flex flex-col gap-1">
    {isLoading ? <Skeleton /> : (
      <>
        <h1 className="text-xl font-semibold text-neutral6">{name}</h1>
        {description && (
          <p className="text-sm text-muted-foreground">{description}</p>
        )}
      </>
    )}
  </div>

  <!-- Right side: Menu + Run button -->
  <div className="flex items-center gap-2">
    <HeaderActionsMenu ... />
    {runTriggerSlot || onRunClick ? <RunButton /> : null}
  </div>
</header>
```

HeaderActionsMenu (internal component or inline):
- Trigger: Button variant="ghost" with MoreVertical icon
- PopoverContent className="w-48 p-1"
- Options:
  1. Edit Dataset (Pencil icon) - onClick={onEditClick}
  2. Duplicate Dataset (Copy icon) - DISABLED with "Coming Soon" text
  3. Delete Dataset (Trash2 icon) - onClick={onDeleteClick}, text-red-500

Run button:
- If runTriggerSlot provided, render that
- Else if onRunClick provided, render Button variant="outline" with Play icon and "Run Experiment" label

Format version helper (copy from existing):
```typescript
const formatVersion = (version: Date | string | undefined): string => {
  if (!version) return '';
  const d = typeof version === 'string' ? new Date(version) : version;
  return d.toLocaleDateString(undefined, {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  });
};
```

Version display next to name if provided (as subtle text).
  </action>
  <verify>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm exec tsc --noEmit src/domains/datasets/components/dataset-detail/dataset-header.tsx
```
  </verify>
  <done>DatasetHeader renders name, description, menu, and run button</done>
</task>

<task type="auto">
  <name>Task 2: Integrate DatasetHeader into DatasetDetail</name>
  <files>packages/playground-ui/src/domains/datasets/components/dataset-detail/dataset-detail.tsx</files>
  <action>
Update DatasetDetail to use extracted header:

1. Import DatasetHeader:
```typescript
import { DatasetHeader } from './dataset-header';
```

2. Remove old header JSX (the `<header>` block with Database icon, name, edit/delete/run buttons)

3. Remove unused imports:
- Database icon (no longer in header)
- Pencil, Trash2 icons (moved to header component)

4. Replace header with DatasetHeader:
```typescript
<DatasetHeader
  name={dataset?.name}
  description={dataset?.description}
  version={dataset?.version}
  isLoading={isDatasetLoading}
  onEditClick={onEditClick}
  onDeleteClick={onDeleteClick}
  runTriggerSlot={runTriggerSlot}
  onRunClick={onRunClick}
/>
```

5. Keep rest of component unchanged (tabs, dialogs, etc.)

Note: dataset?.description may not exist in current type - if so, pass undefined (ready for future).
  </action>
  <verify>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm exec tsc --noEmit src/domains/datasets/components/dataset-detail/dataset-detail.tsx
```
  </verify>
  <done>DatasetDetail uses new DatasetHeader component</done>
</task>

</tasks>

<verification>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm build

# Verify header renders
grep "DatasetHeader" dist/src/domains/datasets/components/dataset-detail/dataset-header.d.ts
```
</verification>

<success_criteria>
- DatasetHeader component created with name, description, menu, run button
- Three-dot menu contains Edit, Duplicate (disabled), Delete
- Run button uses outline variant
- DatasetDetail uses new header
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-dataset-layout-update/10-02-SUMMARY.md`
</output>

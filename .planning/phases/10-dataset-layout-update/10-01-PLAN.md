---
phase: 10-dataset-layout-update
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/playground-ui/src/ds/components/SplitButton/split-button.tsx
  - packages/playground-ui/src/ds/components/SplitButton/index.ts
  - packages/playground-ui/src/ds/components/index.ts
autonomous: true

must_haves:
  truths:
    - "SplitButton renders main action button + dropdown chevron with visual divider"
    - "Clicking main button triggers onMainClick callback"
    - "Clicking chevron opens dropdown popover"
    - "SplitButton supports variant and size props matching Button API"
    - "Disabled state disables both main button and chevron"
  artifacts:
    - path: "packages/playground-ui/src/ds/components/SplitButton/split-button.tsx"
      provides: "Reusable SplitButton component"
      exports: ["SplitButton", "SplitButtonProps"]
    - path: "packages/playground-ui/src/ds/components/SplitButton/index.ts"
      provides: "Barrel export"
      exports: ["SplitButton", "SplitButtonProps"]
  key_links:
    - from: "split-button.tsx"
      to: "@/ds/components/CombinedButtons"
      via: "component composition"
      pattern: "CombinedButtons"
    - from: "split-button.tsx"
      to: "@/ds/components/Popover"
      via: "dropdown menu"
      pattern: "PopoverContent"
---

<objective>
Create reusable SplitButton component for primary action with dropdown alternatives.

Purpose: Enable "New Item" with import options and "Edit" with delete/duplicate options
Output: SplitButton in design system with Storybook-ready API
</objective>

<execution_context>
@/Users/grzegorzlobinski/.claude/get-shit-done/workflows/execute-plan.md
@/Users/grzegorzlobinski/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-dataset-layout-update/10-CONTEXT.md
@.planning/phases/10-dataset-layout-update/10-RESEARCH.md

# Existing patterns to follow
@packages/playground-ui/src/ds/components/CombinedButtons/combined-buttons.tsx
@packages/playground-ui/src/ds/components/Popover/popover.tsx
@packages/playground-ui/src/ds/components/Button/Button.tsx
@packages/playground-ui/src/domains/datasets/components/dataset-detail/items-list-actions.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SplitButton component</name>
  <files>packages/playground-ui/src/ds/components/SplitButton/split-button.tsx</files>
  <action>
Create SplitButton component composing CombinedButtons + Popover:

```typescript
'use client';

import { useState } from 'react';
import { Popover, PopoverTrigger, PopoverContent } from '@/ds/components/Popover';
import { CombinedButtons } from '@/ds/components/CombinedButtons';
import { Button, type ButtonProps } from '@/ds/components/Button';
import { Icon } from '@/ds/icons/Icon';
import { ChevronDown } from 'lucide-react';
import type { FormElementSize } from '@/ds/primitives/form-element';

export interface SplitButtonProps {
  mainLabel: React.ReactNode;
  onMainClick: () => void;
  variant?: ButtonProps['variant'];
  size?: FormElementSize;
  children: React.ReactNode; // Dropdown content
  disabled?: boolean;
  dropdownAlign?: 'start' | 'center' | 'end';
  className?: string;
}
```

Implementation details:
1. useState for popover open/close
2. CombinedButtons wraps both buttons for visual grouping (shared border radius, divider)
3. Main button receives mainLabel, onClick, variant, size, disabled
4. PopoverTrigger wraps chevron button with same variant/size/disabled
5. PopoverContent receives children with align={dropdownAlign} (default "end")
6. className passed to CombinedButtons wrapper

ChevronDown icon sizing:
- size="sm" -> w-3 h-3
- size="md" or "lg" -> w-4 h-4

Export both component and props interface.
  </action>
  <verify>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm exec tsc --noEmit src/ds/components/SplitButton/split-button.tsx
```
  </verify>
  <done>SplitButton renders correctly with main action + dropdown chevron</done>
</task>

<task type="auto">
  <name>Task 2: Create barrel export and register in DS index</name>
  <files>packages/playground-ui/src/ds/components/SplitButton/index.ts, packages/playground-ui/src/ds/components/index.ts</files>
  <action>
1. Create `packages/playground-ui/src/ds/components/SplitButton/index.ts`:
```typescript
export { SplitButton, type SplitButtonProps } from './split-button';
```

2. Add export to `packages/playground-ui/src/ds/components/index.ts`:
Find the alphabetical position and add:
```typescript
export * from './SplitButton';
```

Place after existing exports in alphabetical order (likely after Skeleton, before Tabs).
  </action>
  <verify>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm build
grep "SplitButton" dist/src/ds/components/index.d.ts
```
  </verify>
  <done>SplitButton exported from @mastra/playground-ui design system</done>
</task>

</tasks>

<verification>
```bash
cd /Users/grzegorzlobinski/.superset/worktrees/mastra/dataset-layout-update/packages/playground-ui
pnpm build

# Verify exports
grep -l "SplitButton" dist/src/ds/components/SplitButton/split-button.d.ts
grep -l "SplitButtonProps" dist/src/ds/components/SplitButton/split-button.d.ts
```
</verification>

<success_criteria>
- SplitButton component created with CombinedButtons + Popover composition
- Component supports variant, size, disabled props
- Dropdown opens on chevron click
- Main action fires on main button click
- Exported from design system index
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-dataset-layout-update/10-01-SUMMARY.md`
</output>

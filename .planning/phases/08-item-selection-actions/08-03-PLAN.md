---
phase: 08-item-selection-actions
plan: 03
type: execute
wave: 2
depends_on: ['08-01', '08-02']
files_modified:
  - packages/playground-ui/src/domains/datasets/components/create-dataset-from-items-dialog.tsx
  - packages/playground-ui/src/domains/datasets/index.ts
autonomous: true

must_haves:
  truths:
    - 'Create dataset dialog accepts items array and creates dataset with those items'
    - 'Dialog shows progress during item creation'
    - 'Success callback provides new dataset ID for navigation'
  artifacts:
    - path: 'packages/playground-ui/src/domains/datasets/components/create-dataset-from-items-dialog.tsx'
      provides: 'Dialog for creating dataset from selected items'
      exports: ['CreateDatasetFromItemsDialog']
  key_links:
    - from: 'create-dataset-from-items-dialog.tsx'
      to: 'use-dataset-mutations.ts'
      via: 'hook usage'
      pattern: 'createDataset.mutateAsync'
    - from: 'create-dataset-from-items-dialog.tsx'
      to: 'use-dataset-mutations.ts'
      via: 'hook usage'
      pattern: 'addItem.mutateAsync'
---

<objective>
Create dialog for creating a new dataset from selected items.

Purpose: Enable bulk creation of new dataset from existing items
Output: CreateDatasetFromItemsDialog component
</objective>

<execution_context>
@/Users/yj/.claude/get-shit-done/workflows/execute-plan.md
@/Users/yj/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-item-selection-actions/08-RESEARCH.md
@.planning/phases/08-item-selection-actions/08-01-SUMMARY.md
@.planning/phases/08-item-selection-actions/08-02-SUMMARY.md

# Existing dialog pattern

@packages/playground-ui/src/domains/datasets/components/create-dataset-dialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CreateDatasetFromItemsDialog component</name>
  <files>packages/playground-ui/src/domains/datasets/components/create-dataset-from-items-dialog.tsx</files>
  <action>
Create dialog component following create-dataset-dialog.tsx pattern:

```typescript
'use client';

import { useState } from 'react';
import type { DatasetItem } from '@mastra/client-js';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogBody } from '@/ds/components/Dialog';
import { Button } from '@/ds/components/Button';
import { Input } from '@/ds/components/Input';
import { Label } from '@/ds/components/Label';
import { toast } from '@/lib/toast';
import { useDatasetMutations } from '../hooks/use-dataset-mutations';

export interface CreateDatasetFromItemsDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  items: DatasetItem[];
  onSuccess?: (datasetId: string) => void;
}

export function CreateDatasetFromItemsDialog({
  open,
  onOpenChange,
  items,
  onSuccess,
}: CreateDatasetFromItemsDialogProps);
```

Implementation:

1. Form state: name, description
2. Progress state: isCreating, progress (0 to items.length)
3. handleSubmit:
   a. Validate name
   b. Set isCreating=true
   c. Create dataset via createDataset.mutateAsync
   d. Loop through items, call addItem.mutateAsync for each
   e. Update progress after each item
   f. On complete: toast success, reset form, close dialog, call onSuccess
   g. On error: toast error, keep dialog open
4. Show progress bar when isCreating (progress/items.length \* 100%)
5. Submit button shows "Creating..." with progress count when isCreating

Form fields:

- Name (required)
- Description (optional)
- Read-only text showing "{items.length} items will be copied"
  </action>
  <verify>

```bash
cd /Users/yj/.superset/worktrees/mastra/test-gsd/packages/playground-ui
pnpm exec tsc --noEmit src/domains/datasets/components/create-dataset-from-items-dialog.tsx
```

  </verify>
  <done>Dialog creates dataset and copies items with progress tracking</done>
</task>

<task type="auto">
  <name>Task 2: Export dialog from index</name>
  <files>packages/playground-ui/src/domains/datasets/index.ts</files>
  <action>
Add export after CreateDatasetDialog:

```typescript
export { CreateDatasetFromItemsDialog } from './components/create-dataset-from-items-dialog';
```

  </action>
  <verify>
```bash
cd /Users/yj/.superset/worktrees/mastra/test-gsd/packages/playground-ui
pnpm build
```
  </verify>
  <done>CreateDatasetFromItemsDialog exported from package index</done>
</task>

</tasks>

<verification>
```bash
cd /Users/yj/.superset/worktrees/mastra/test-gsd/packages/playground-ui
pnpm build

# Verify export

grep "CreateDatasetFromItemsDialog" dist/src/domains/datasets/components/create-dataset-from-items-dialog.d.ts

```
</verification>

<success_criteria>
- CreateDatasetFromItemsDialog component created
- Dialog shows progress during item copying
- Component exported from package index
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-item-selection-actions/08-03-SUMMARY.md`
</output>
```

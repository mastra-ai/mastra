---
title: "リファレンス: Workflow.step() | 旧式ワークフロー | Mastra ドキュメント"
description: ワークフローに新しいステップを追加する `.step()` メソッドのドキュメント。
---

# Workflow.step()

`.step()` メソッドは、ワークフローに新たなステップを追加し、必要に応じてその変数や実行条件を設定します。

## 使い方

```typescript
workflow.step({
  id: "stepTwo",
  outputSchema: z.object({
    result: z.number(),
  }),
  execute: async ({ context }) => {
    return { result: 42 };
  },
});
```


## パラメータ

<PropertiesTable
  content={[
    {
      name: "stepConfig",
      type: "Step | StepDefinition | string",
      description:
        "ワークフローに追加する Step インスタンス、設定オブジェクト、またはステップ ID",
      isOptional: false,
    },
    {
      name: "options",
      type: "StepOptions",
      description: "ステップ実行に関する任意の設定",
      isOptional: true,
    },
  ]}
/>

### StepDefinition

<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      description: "ステップの固有識別子",
      isOptional: false,
    },
    {
      name: "outputSchema",
      type: "z.ZodSchema",
      description: "ステップの出力を検証するためのスキーマ",
      isOptional: true,
    },
    {
      name: "execute",
      type: "(params: ExecuteParams) => Promise<any>",
      description: "ステップのロジックを実装する関数",
      isOptional: false,
    },
  ]}
/>

### StepOptions

<PropertiesTable
  content={[
    {
      name: "variables",
      type: "Record<string, VariableRef>",
      description: "変数名からその参照元へのマッピング",
      isOptional: true,
    },
    {
      name: "when",
      type: "StepCondition",
      description: "ステップを実行するために満たすべき条件",
      isOptional: true,
    },
  ]}
/>

## 関連項目

- [Step インスタンスの基本的な使い方](/docs/workflows-legacy/steps)
- [Step クラス リファレンス](./step-class)
- [Workflow クラス リファレンス](./workflow)
- [制御フロー ガイド](/docs/workflows-legacy/control-flow)
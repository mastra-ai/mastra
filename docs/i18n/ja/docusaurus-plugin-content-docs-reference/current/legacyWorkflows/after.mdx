---
title: "リファレンス: .after() | 旧式ワークフロー | Mastra ドキュメント"
description: レガシー版ワークフローにおける `after()` メソッドのドキュメント。分岐や経路のマージを可能にします。
---

<div id="after">
  # .after()
</div>

`.after()` メソッドは、ワークフローのステップ間に明示的な依存関係を定義し、実行時の分岐やマージ（統合）を可能にします。

<div id="usage">
  ## 使い方
</div>

<div id="basic-branching">
  ### 基本的なブランチ運用
</div>

```typescript
workflow
  .step(stepA)
  .then(stepB)
  .after(stepA) // stepA の完了後に新しいブランチを作成する
  .step(stepC);
```


<div id="merging-multiple-branches">
  ### 複数ブランチのマージ
</div>

```typescript
workflow
  .step(stepA)
  .then(stepB)
  .step(stepC)
  .then(stepD)
  .after([stepB, stepD]) // 複数のステップに依存するステップを作成する
  .step(stepE);
```


<div id="parameters">
  ## パラメータ
</div>

<PropertiesTable
  content={[
    {
      name: "steps",
      type: "Step | Step[]",
      description:
        "続行前に完了が必要な単一のステップ、またはステップの配列",
      isOptional: false,
    },
  ]}
/>

<div id="returns">
  ## 戻り値
</div>

<PropertiesTable
  content={[
    {
      name: "workflow",
      type: "LegacyWorkflow",
      description: "メソッドチェーン用のワークフローインスタンス",
    },
  ]}
/>

<div id="examples">
  ## 例
</div>

<div id="single-dependency">
  ### 単一依存関係
</div>

```typescript
workflow
  .step(fetchData)
  .then(processData)
  .after(fetchData) // fetchData後に分岐
  .step(logData);
```


<div id="multiple-dependencies-merging-branches">
  ### 複数の依存関係（ブランチの統合）
</div>

```typescript
workflow
  .step(fetchUserData)
  .then(validateUserData)
  .step(fetchProductData)
  .then(validateProductData)
  .after([validateUserData, validateProductData]) // 両方の検証が完了するまで待つ
  .step(processOrder);
```


<div id="related">
  ## 関連情報
</div>

- [Branching Paths の例](/examples/workflows_legacy/branching-paths)
- [Workflow クラスリファレンス](./workflow)
- [Step リファレンス](./step-class)
- [制御フローガイド](/docs/workflows-legacy/control-flow)
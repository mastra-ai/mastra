---
title: "リファレンス: Memory.getThreadsByResourceIdPaginated() | Memory | Mastra ドキュメント"
description: "Mastra の `Memory.getThreadsByResourceIdPaginated()` メソッドに関するドキュメント。特定のリソース ID に関連するスレッドをページネーション対応で取得します。"
---

<div id="memorygetthreadsbyresourceidpaginated">
  # Memory.getThreadsByResourceIdPaginated()
</div>

`.getThreadsByResourceIdPaginated()` メソッドは、特定のリソース ID に紐づくスレッドをページネーション付きで取得します。

<div id="usage-example">
  ## 使用例
</div>

```typescript copy
await memory.getThreadsByResourceIdPaginated({
  resourceId: "user-123",
  page: 0,
  perPage: 10,
});
```


<div id="parameters">
  ## パラメータ
</div>

<PropertiesTable
  content={[
    {
      name: "resourceId",
      type: "string",
      description: "スレッドを取得する対象リソースのID",
      isOptional: false,
    },
    {
      name: "page",
      type: "number",
      description: "取得するページ番号",
      isOptional: false,
    },
    {
      name: "perPage",
      type: "number",
      description: "1ページあたりに返すスレッド数",
      isOptional: false,
    },
    {
      name: "orderBy",
      type: "'createdAt' | 'updatedAt'",
      description: "スレッドを並べ替える基準フィールド",
      isOptional: true,
    },
    {
      name: "sortDirection",
      type: "'ASC' | 'DESC'",
      description: "並び順の方向",
      isOptional: true,
    },
  ]}
/>

<div id="returns">
  ## 戻り値
</div>

<PropertiesTable
  content={[
    {
      name: "result",
      type: "Promise<PaginationInfo & { threads: StorageThreadType[] }>",
      description:
        "メタデータ付きのページネーション済みスレッド結果を返す Promise",
    },
  ]}
/>

<div id="extended-usage-example">
  ## さらに踏み込んだ使用例
</div>

```typescript title="src/test-memory.ts" showLineNumbers copy
import { mastra } from "./mastra";

const agent = mastra.getAgent("agent");
const memory = await agent.getMemory();

let currentPage = 0;
let hasMorePages = true;

while (hasMorePages) {
  const threads = await memory?.getThreadsByResourceIdPaginated({
    resourceId: "user-123",
    page: currentPage,
    perPage: 25,
    orderBy: "createdAt",
    sortDirection: "ASC",
  });

  if (!threads) {
    console.log("スレッドがありません");
    break;
  }

  threads.threads.forEach((thread) => {
    console.log(`スレッド: ${thread.id}, 作成日時: ${thread.createdAt}`);
  });

  hasMorePages = threads.hasMore;
  currentPage++;
}
```


<div id="related">
  ## 関連
</div>

- [Memory クラス リファレンス](/reference/memory/memory-class)
- [getThreadsByResourceId](/reference/memory/getThreadsByResourceId) - ページネーションなしの版
- [Memory の概要](/docs/memory/overview)（threads/resources の概念を解説）
- [createThread](/reference/memory/createThread)
- [getThreadById](/reference/memory/getThreadById)
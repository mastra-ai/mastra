---
title: "リファレンス: Agent クラス | Agents | Mastra ドキュメント"
description: "Mastra の `Agent` クラスに関するドキュメント。多様な機能を備えた AI エージェントを作成するための基盤を提供します。"
---

# Agent Class

`Agent` クラスは、Mastra で AI エージェントを作成するための基盤となるクラスです。応答の生成、やり取りのストリーミング、音声機能の取り扱いのためのメソッドを提供します。

## 使い方の例

### 文字列に関する基本的な指示

```typescript title="src/mastra/agents/string-agent.ts" showLineNumbers copy
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

// 文字列による指示
export const agent = new Agent({
  name: "test-agent",
  instructions: "簡潔な回答を提供する親切なアシスタントです。",
  model: openai("gpt-4o"),
});

// システムメッセージオブジェクト
export const agent2 = new Agent({
  name: "test-agent-2",
  instructions: {
    role: "system",
    content: "熟練したプログラマーです",
  },
  model: openai("gpt-4o"),
});

// システムメッセージの配列
export const agent3 = new Agent({
  name: "test-agent-3",
  instructions: [
    { role: "system", content: "親切なアシスタントです" },
    { role: "system", content: "TypeScriptの専門知識を持っています" },
  ],
  model: openai("gpt-4o"),
});
```


### 単一の CoreSystemMessage

`providerOptions` などのプロバイダー固有の設定に関する追加プロパティにアクセスするには、CoreSystemMessage 形式を使用します:

```typescript title="src/mastra/agents/core-message-agent.ts" showLineNumbers copy
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

export const agent = new Agent({
  name: "core-message-agent",
  instructions: {
    role: "system",
    content:
      "あなたは技術文書を専門とする親切なアシスタントです。",
    providerOptions: {
      openai: {
        reasoningEffort: "low",
      },
    },
  },
  model: openai("gpt-5"),
});
```


### 複数のCoreSystemMessage

```typescript title="src/mastra/agents/multi-message-agent.ts" showLineNumbers copy
import { anthropic } from "@ai-sdk/anthropic";
import { Agent } from "@mastra/core/agent";

// ユーザーに応じてカスタマイズ可能
const preferredTone = {
  role: "system",
  content: "常にプロフェッショナルで共感的な口調を保ってください。",
};

export const agent = new Agent({
  name: "multi-message-agent",
  instructions: [
    { role: "system", content: "あなたはカスタマーサービス担当者です。" },
    preferredTone,
    {
      role: "system",
      content: "必要に応じて複雑な問題を人間の担当者にエスカレーションしてください。",
      providerOptions: {
        anthropic: { cacheControl: { type: "ephemeral" } },
      },
    },
  ],
  model: anthropic("claude-sonnet-4-20250514"),
});
```


## コンストラクターの引数

<PropertiesTable
  content={[
  {
    name: "id",
    type: "string",
    isOptional: true,
    description:
      "エージェントの任意の一意の識別子。指定がない場合は `name` が既定値になります。"
  },
  {
    name: "name",
    type: "string",
    isOptional: false,
    description: "エージェントの一意の識別子。"
  },
  {
    name: "description",
    type: "string",
    isOptional: true,
    description: "エージェントの目的や機能に関する任意の説明。"
  },
  {
    name: "instructions",
    type: "SystemMessage | ({ runtimeContext: RuntimeContext }) => SystemMessage | Promise<SystemMessage>",
    isOptional: false,
    description: `エージェントの振る舞いを規定する指示。文字列、文字列の配列、システムメッセージオブジェクト、, 
      システムメッセージの配列、またはこれらのいずれかの型を動的に返す関数を指定できます。 
      SystemMessage の型: string | string[] | CoreSystemMessage | CoreSystemMessage[] | SystemModelMessage | SystemModelMessage[]`
  },
  {
    name: "model",
    type: "MastraLanguageModel | ({ runtimeContext: RuntimeContext }) => MastraLanguageModel | Promise<MastraLanguageModel>",
    isOptional: false,
    description:
      "エージェントが使用する言語モデル。静的に指定するか、実行時に解決できます。"
  },
  {
    name: "agents",
    type: "Record<string, Agent> | ({ runtimeContext: RuntimeContext }) => Record<string, Agent> | Promise<Record<string, Agent>>",
    isOptional: true,
    description:
      "エージェントがアクセスできるサブエージェント。静的に提供するか、動的に解決できます。"
  },
  {
    name: "tools",
    type: "ToolsInput | ({ runtimeContext: RuntimeContext }) => ToolsInput | Promise<ToolsInput>",
    isOptional: true,
    description:
      "エージェントが利用できるツール。静的に提供するか、動的に解決できます。"
  },
  {
    name: "workflows",
    type: "Record<string, Workflow> | ({ runtimeContext: RuntimeContext }) => Record<string, Workflow> | Promise<Record<string, Workflow>>",
    isOptional: true,
    description:
      "エージェントが実行できるワークフロー。静的または動的に解決可能。"
  },
  {
    name: "defaultGenerateOptions",
    type: "AgentGenerateOptions | ({ runtimeContext: RuntimeContext }) => AgentGenerateOptions | Promise<AgentGenerateOptions>",
    isOptional: true,
    description: "`generate()` 呼び出し時に使用される既定のオプション。"
  },
  {
    name: "defaultStreamOptions",
    type: "AgentStreamOptions | ({ runtimeContext: RuntimeContext }) => AgentStreamOptions | Promise<AgentStreamOptions>",
    isOptional: true,
    description: "`stream()` 呼び出し時に使用される既定のオプション。"
  },
  {
    name: "defaultStreamOptions",
    type: "AgentExecutionOptions | ({ runtimeContext: RuntimeContext }) => AgentExecutionOptions | Promise<AgentExecutionOptions>",
    isOptional: true,
    description: "vNext モードで `stream()` を呼び出す際に使用される既定のオプション。"
  },
  {
    name: "mastra",
    type: "Mastra",
    isOptional: true,
    description:
      "Mastra ランタイムインスタンスへの参照（自動的に注入されます）。"
  },
  {
    name: "scorers",
    type: "MastraScorers | ({ runtimeContext: RuntimeContext }) => MastraScorers | Promise<MastraScorers>",
    isOptional: true,
    description:
      "実行時評価およびテレメトリのためのスコアリング設定。静的または動的に提供可能。"
  },
  {
    name: "evals",
    type: "Record<string, Metric>",
    isOptional: true,
    description: "エージェントの応答を評価するための指標。"
  },
  {
    name: "memory",
    type: "MastraMemory | ({ runtimeContext: RuntimeContext }) => MastraMemory | Promise<MastraMemory>",
    isOptional: true,
    description:
      "状態を保持するコンテキストの保存・取得に使用されるメモリモジュール。"
  },
  {
    name: "voice",
    type: "CompositeVoice",
    isOptional: true,
    description: "音声入出力のための音声設定。"
  },
  {
    name: "inputProcessors",
    type: "Processor[] | ({ runtimeContext: RuntimeContext }) => Processor[] | Promise<Processor[]>",
    isOptional: true,
    description:
      "エージェントで処理される前にメッセージを修正または検証できる入力プロセッサ。`processInput` 関数を実装する必要があります。"
  },
  {
    name: "outputProcessors",
    type: "Processor[] | ({ runtimeContext: RuntimeContext }) => Processor[] | Promise<Processor[]>",
    isOptional: true,
    description:
      "クライアントへ送信する前に、エージェントからのメッセージを修正または検証できる出力プロセッサ。`processOutputResult` と `processOutputStream` のいずれか（または両方）を実装する必要があります。"
  }
]}
/>

## 戻り値

<PropertiesTable
  content={[
    {
      name: "agent",
      type: "Agent<TAgentId, TTools, TMetrics>",
      description: "指定された設定を適用した新しい Agent インスタンス。",
    },
  ]}
/>

## 関連情報

- [Agents 概要](/docs/agents/overview)
- [Agents の呼び出し](/examples/agents/calling-agents)
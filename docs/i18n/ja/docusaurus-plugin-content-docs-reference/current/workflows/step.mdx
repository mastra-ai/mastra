---
title: "リファレンス: Step クラス | ワークフロー | Mastra ドキュメント"
description: Mastra の Step クラスに関するドキュメント。ワークフロー内の個々の作業単位を定義します。
---

<div id="step-class">
  # Step クラス
</div>

Step クラスは、ワークフロー内の個々の作業単位を定義し、実行ロジック、データ検証、入出力処理をまとめて扱います。
ツールまたはエージェントをパラメーターとして受け取り、そこから自動的にステップを生成できます。

<div id="usage-example">
  ## 使い方の例
</div>

```typescript title="src/mastra/workflows/test-workflow.ts" showLineNumbers copy
import { createWorkflow, createStep } from "@mastra/core/workflows";
import { z } from "zod";

const step1 = createStep({
  id: "step-1",
  description: "入力から出力へ値を渡す",
  inputSchema: z.object({
    value: z.number(),
  }),
  outputSchema: z.object({
    value: z.number(),
  }),
  execute: async ({ inputData }) => {
    const { value } = inputData;
    return {
      value,
    };
  },
});
```


<div id="constructor-parameters">
  ## コンストラクターのパラメーター
</div>

<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      description: "ステップの一意の識別子",
      required: true,
    },
    {
      name: "description",
      type: "string",
      description: "ステップの内容を説明する任意の説明文",
      required: false,
    },
    {
      name: "inputSchema",
      type: "z.ZodType<any>",
      description: "入力構造を定義する Zod スキーマ",
      required: true,
    },
    {
      name: "outputSchema",
      type: "z.ZodType<any>",
      description: "出力構造を定義する Zod スキーマ",
      required: true,
    },
    {
      name: "resumeSchema",
      type: "z.ZodType<any>",
      description: "ステップ再開用の任意の Zod スキーマ",
      required: false,
    },
    {
      name: "suspendSchema",
      type: "z.ZodType<any>",
      description: "ステップ一時停止用の任意の Zod スキーマ",
      required: false,
    },
    {
      name: "stateSchema",
      type: "z.ZodObject<any>",
      description:
        "ステップの状態用の任意の Zod スキーマ。Mastra の状態管理を使用する場合は自動的に注入されます。stateSchema はワークフローの stateSchema の部分集合である必要があります。指定しない場合、型は「any」です。",
      required: false,
    },
    {
      name: "execute",
      type: "(params: ExecuteParams) => Promise<any>",
      description: "ステップのロジックを実装する非同期関数",
      required: true,
    },
  ]}
/>

<div id="executeparams">
  ### ExecuteParams
</div>

<PropertiesTable
  content={[
    {
      name: "inputData",
      type: "z.infer<TStepInput>",
      description: "inputSchema に適合する入力データ。",
    },
    {
      name: "resumeData",
      type: "z.infer<TResumeSchema>",
      description:
        "一時停止状態からステップを再開する際の、resumeSchema に適合する再開用データ。ステップが再開される場合にのみ存在します。",
    },
    {
      name: "mastra",
      type: "Mastra",
      description: "Mastra のサービス（エージェント、ツールなど）へのアクセス。",
    },
    {
      name: "getStepResult",
      type: "(step: Step | string) => any",
      description: "他のステップの結果にアクセスするための関数。",
    },
    {
      name: "getInitData",
      type: "() => any",
      description:
        "任意のステップからワークフローの初期入力データにアクセスするための関数。",
    },
    {
      name: "suspend",
      type: "(suspendPayload: any, suspendOptions?: { resumeLabel?: string }) => Promise<void>",
      description: "ワークフローの実行を一時停止する関数。",
    },
    {
      name: "setState",
      type: "(state: z.infer<TState>) => void",
      description:
        "ワークフローの状態を設定する関数。リデューサー風のパターンで注入します（例: setState({ ...state, ...newState })）。",
    },
    {
      name: "runId",
      type: "string",
      description: "現在の実行 ID。",
    },
    {
      name: "requestContext",
      type: "RequestContext",
      isOptional: true,
      description:
        "依存性注入と文脈情報のためのリクエストコンテキスト。",
    },
    {
      name: "runCount",
      type: "number",
      description:
        "このステップの実行回数。ステップが実行されるたびに自動的に増加します。",
      isOptional: true,
    },
  ]}
/>

<div id="related">
  ## 関連項目
</div>

- [制御フロー](/docs/workflows/control-flow)
- [エージェントとツールの利用](/docs/workflows/agents-and-tools)
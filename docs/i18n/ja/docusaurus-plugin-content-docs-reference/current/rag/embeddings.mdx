---
title: "リファレンス: Embed | RAG | Mastra ドキュメント"
description: Mastra における AI SDK を利用した埋め込み機能のドキュメント。
---

<div id="embed">
  # 埋め込み
</div>

Mastra は AI SDK の `embed` と `embedMany` 関数を使ってテキスト入力のベクトル埋め込みを生成し、類似度検索や RAG ワークフローを実現します。

<div id="single-embedding">
  ## 単一の埋め込み
</div>

`embed` 関数は、1 つのテキスト入力に対してベクトル埋め込みを生成します。

```typescript
import { embed } from "ai";

const result = await embed({
  model: openai.embedding("text-embedding-3-small"),
  value: "Your text to embed",
  maxRetries: 2, // 省略可、デフォルトは 2
});
```


<div id="parameters">
  ### パラメータ
</div>

<PropertiesTable
  content={[
    {
      name: "model",
      type: "EmbeddingModel",
      description:
        "使用する埋め込みモデル（例: openai.embedding('text-embedding-3-small')）",
    },
    {
      name: "value",
      type: "string | Record<string, any>",
      description: "埋め込み対象のテキストコンテンツまたはオブジェクト",
    },
    {
      name: "maxRetries",
      type: "number",
      description:
        "埋め込み呼び出しごとの最大再試行回数。0 に設定すると再試行を無効化します。",
      isOptional: true,
      defaultValue: "2",
    },
    {
      name: "abortSignal",
      type: "AbortSignal",
      description: "リクエストをキャンセルするための任意の中断シグナル",
      isOptional: true,
    },
    {
      name: "headers",
      type: "Record<string, string>",
      description:
        "リクエストに付与する追加の HTTP ヘッダー（HTTP ベースのプロバイダーのみ）",
      isOptional: true,
    },
  ]}
/>

<div id="return-value">
  ### 戻り値
</div>

<PropertiesTable
  content={[
    {
      name: "embedding",
      type: "number[]",
      description: "入力に対する埋め込みベクトル",
    },
  ]}
/>

<div id="multiple-embeddings">
  ## 複数の埋め込み
</div>

複数のテキストを一度にエンベッドするには、`embedMany` 関数を使用します。

```typescript
import { embedMany } from "ai";

const result = await embedMany({
  model: openai.embedding("text-embedding-3-small"),
  values: ["1つ目のテキスト", "2つ目のテキスト", "3つ目のテキスト"],
  maxRetries: 2, // 省略可能。デフォルトは 2
});
```


<div id="parameters">
  ### パラメータ
</div>

<PropertiesTable
  content={[
    {
      name: "model",
      type: "EmbeddingModel",
      description:
        "使用する埋め込みモデル（例: openai.embedding('text-embedding-3-small')）",
    },
    {
      name: "values",
      type: "string[] | Record<string, any>[]",
      description: "埋め込み対象のテキストまたはオブジェクトの配列",
    },
    {
      name: "maxRetries",
      type: "number",
      description:
        "埋め込み呼び出しごとの最大再試行回数。再試行を無効化するには 0 を設定します。",
      isOptional: true,
      defaultValue: "2",
    },
    {
      name: "abortSignal",
      type: "AbortSignal",
      description: "リクエストをキャンセルするためのオプションのアボートシグナル",
      isOptional: true,
    },
    {
      name: "headers",
      type: "Record<string, string>",
      description:
        "リクエストに付与する追加の HTTP ヘッダー（HTTP ベースのプロバイダーのみ）",
      isOptional: true,
    },
  ]}
/>

<div id="return-value">
  ### 戻り値
</div>

<PropertiesTable
  content={[
    {
      name: "embeddings",
      type: "number[][]",
      description:
        "入力に対応する埋め込みベクトルの配列",
    },
  ]}
/>

<div id="example-usage">
  ## 使い方の例
</div>

```typescript
import { embed, embedMany } from "ai";
import { openai } from "@ai-sdk/openai";

// 単一の埋め込み
const singleResult = await embed({
  model: openai.embedding("text-embedding-3-small"),
  value: "人生の意味とは？",
});

// 複数の埋め込み
const multipleResult = await embedMany({
  model: openai.embedding("text-embedding-3-small"),
  values: [
    "人生についての第1の質問",
    "宇宙についての第2の質問",
    "万物についての第3の質問",
  ],
});
```

Vercel AI SDK の埋め込み（embeddings）に関するより詳しい情報は、以下をご覧ください:

* [AI SDK Embeddings Overview](https://sdk.vercel.ai/docs/ai-sdk-core/embeddings)
* [embed()](https://sdk.vercel.ai/docs/reference/ai-sdk-core/embed)
* [embedMany()](https://sdk.vercel.ai/docs/reference/ai-sdk-core/embed-many)

---
title: "リファレンス: OpenSearch ベクトルストア | ベクトル | Mastra ドキュメント"
description: Mastra における OpenSearchVector クラスのドキュメント。OpenSearch を用いたベクトル検索を提供します。
---

<div id="opensearch-vector-store">
  # OpenSearch ベクターストア
</div>

OpenSearchVector クラスは、強力なオープンソースの検索・分析エンジンである [OpenSearch](https://opensearch.org/) を使ってベクター検索を提供します。OpenSearch の k-NN 機能を活用し、効率的なベクトル類似検索を実行します。

<div id="constructor-options">
  ## コンストラクターのオプション
</div>

<PropertiesTable
  content={[
    {
      name: "url",
      type: "string",
      description: "OpenSearch の接続URL（例: 'http://localhost:9200'）",
    },
  ]}
/>

<div id="methods">
  ## 方法
</div>

<div id="createindex">
  ### createIndex()
</div>

指定した設定で新しいインデックスを作成します。

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "作成するインデックス名",
    },
    {
      name: "dimension",
      type: "number",
      description: "インデックスに格納するベクトルの次元数",
    },
    {
      name: "metric",
      type: "'cosine' | 'euclidean' | 'dotproduct'",
      description: "ベクトル類似度に用いる距離尺度",
      defaultValue: "'cosine'",
      isOptional: true,
    },
  ]}
/>

<div id="listindexes">
  ### listIndexes()
</div>

OpenSearch インスタンス内のすべてのインデックスを一覧します。

Returns: `Promise<string[]>`

<div id="describeindex">
  ### describeIndex()
</div>

インデックスの情報を取得します。

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "詳細を取得するインデックスの名前",
    },
  ]}
/>

<div id="deleteindex">
  ### deleteIndex()
</div>

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "削除するインデックスの名前",
    },
  ]}
/>

<div id="upsert">
  ### upsert()
</div>

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "ベクターをアップサートするインデックス名",
    },
    {
      name: "vectors",
      type: "number[][]",
      description: "挿入するベクター埋め込みの配列",
    },
    {
      name: "metadata",
      type: "Record<string, any>[]",
      description: "各ベクターに対応するメタデータオブジェクトの配列",
      isOptional: true,
    },
    {
      name: "ids",
      type: "string[]",
      description:
        "ベクターのIDの任意指定用配列。指定しない場合はランダムなIDが生成されます",
      isOptional: true,
    },
  ]}
/>

<div id="query">
  ### query()
</div>

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "クエリ対象のインデックス名",
    },
    {
      name: "queryVector",
      type: "number[]",
      description: "類似ベクトルを検索するためのクエリベクトル",
    },
    {
      name: "topK",
      type: "number",
      description: "返す結果数",
      defaultValue: "10",
      isOptional: true,
    },
    {
      name: "filter",
      type: "VectorFilter",
      description:
        "クエリに適用するオプションのフィルタ（MongoDB 形式のクエリ構文）",
      isOptional: true,
    },
  ]}
/>

<div id="updatevector">
  ### updateVector()
</div>

ID で指定したベクトリエントリを、新しいベクターデータおよび/またはメタデータで更新します。

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "ベクトルを更新する対象のインデックス名",
    },
    {
      name: "id",
      type: "string",
      description: "更新するベクトルの ID",
    },
    {
      name: "update",
      type: "object",
      description: "ベクターおよび/またはメタデータを含む更新データ",
    },
    {
      name: "update.vector",
      type: "number[]",
      description: "新しいベクター埋め込み",
      isOptional: true,
    },
    {
      name: "update.metadata",
      type: "Record<string, any>",
      description: "新しいメタデータ",
      isOptional: true,
    },
  ]}
/>

<div id="deletevector">
  ### deleteVector()
</div>

指定した ID のベクターエントリをインデックスから削除します。

<PropertiesTable
  content={[
    {
      name: "indexName",
      type: "string",
      description: "ベクターを削除するインデックス名",
    },
    {
      name: "ids",
      type: "string[]",
      description: "削除するベクター ID の配列",
    },
  ]}
/>

<div id="related">
  ## 関連情報
</div>

- [メタデータ フィルター](../rag/metadata-filters)
---
title: "リファレンス: Run.stream() | ストリーミング | Mastra ドキュメント"
description: ワークフローで使用する `Run.stream()` メソッドのドキュメント。ワークフロー実行をストリームとして監視できます。
---

<div id="runstream">
  # Run.stream()
</div>

`.stream()` メソッドを使うと、ワークフロー実行を監視し、各ステップのステータスをリアルタイムで受け取れます。

<div id="usage-example">
  ## 使い方の例
</div>

```typescript showLineNumbers copy
const run = await workflow.createRunAsync();

const { stream } = await run.stream({
  inputData: {
    value: "初期データ",
  },
});
```


<div id="parameters">
  ## パラメータ
</div>

<PropertiesTable
  content={[
    {
      name: "inputData",
      type: "z.infer<TInput>",
      description: "ワークフローの入力スキーマに適合する入力データ",
      isOptional: true,
    },
    {
      name: "runtimeContext",
      type: "RuntimeContext",
      description: "ワークフローの実行時に使用するランタイムコンテキストデータ",
      isOptional: true,
    },
    {
      name: "tracingContext",
      type: "TracingContext",
      isOptional: true,
      description:
        "子スパンの作成やメタデータの追加に使用する AI トレーシング用コンテキスト。Mastra のトレーシングシステムを使用している場合は自動的に注入されます。",
      properties: [
        {
          parameters: [
            {
              name: "currentSpan",
              type: "AISpan",
              isOptional: true,
              description:
                "子スパンの作成やメタデータの追加に使用する現在の AI スパン。実行中にカスタムの子スパンを作成したり、スパン属性を更新する際に使用します。",
            },
          ],
        },
      ],
    },
    {
      name: "tracingOptions",
      type: "TracingOptions",
      isOptional: true,
      description: "AI トレーシングの設定オプション。",
      properties: [
        {
          parameters: [
            {
              name: "metadata",
              type: "Record<string, any>",
              isOptional: true,
              description:
                "ルートトレーススパンに追加するメタデータ。ユーザー ID、セッション ID、機能フラグなどのカスタム属性の追加に役立ちます。",
            },
          ],
        },
      ],
    },
  ]}
/>

<div id="returns">
  ## 戻り値
</div>

<PropertiesTable
  content={[
    {
      name: "stream",
      type: "ReadableStream<StreamEvent>",
      description:
        "ワークフローの実行イベントをリアルタイムで発行する読み取り可能なストリーム。",
    },
    {
      name: "getWorkflowState",
      type: "() => Promise<WorkflowResult<TState, TOutput, TSteps>>",
      description:
        "最終的なワークフロー結果を解決する Promise を返す関数。",
    },
    {
      name: "traceId",
      type: "string",
      isOptional: true,
      description:
        "AI トレーシングが有効な場合に、この実行に関連付けられるトレース ID。ログの関連付けや実行フローのデバッグに使用します。",
    },
  ]}
/>

<div id="extended-usage-example">
  ## さらに踏み込んだ使用例
</div>

```typescript showLineNumbers copy
const { getWorkflowState } = await run.stream({
  inputData: {
    value: "初期データ",
  },
});

const result = await getWorkflowState();
```


<div id="stream-events">
  ## ストリームイベント
</div>

ストリームはワークフローの実行中にさまざまな種類のイベントを発行します。各イベントには `type` フィールドと、関連データを含む `payload` が含まれます。

- **`start`**: ワークフローの実行を開始
- **`step-start`**: ステップの実行を開始
- **`tool-call`**: ツール呼び出しを開始
- **`tool-call-streaming-start`**: ツール呼び出しのストリーミングを開始
- **`tool-call-delta`**: ツール出力の差分更新
- **`step-result`**: ステップが結果とともに完了
- **`step-finish`**: ステップの実行が終了
- **`finish`**: ワークフローの実行が完了

<div id="related">
  ## 関連項目
</div>

- [Workflows の概要](/docs/workflows/overview#running-workflows)
- [Workflow.createRunAsync()](/reference/workflows/workflow-methods/create-run)
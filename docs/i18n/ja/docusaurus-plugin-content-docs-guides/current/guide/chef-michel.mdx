---
title: "ã‚¬ã‚¤ãƒ‰ï¼šAIã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®æ§‹ç¯‰ | Mastra ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰"
description: åˆ©ç”¨å¯èƒ½ãªé£Ÿæã§ã®èª¿ç†ã‚’æ”¯æ´ã™ã‚‹ã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ Mastra ã§ä½œæˆã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã€‚
---

import Steps from "@site/src/components/Steps";
import StepItem from "@site/src/components/StepItem";
import Youtube from "@site/src/components/YouTube-player";


<div id="building-an-ai-chef-assistant">
  # AIã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®æ§‹ç¯‰
</div>

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€æ‰‹å…ƒã®é£Ÿæã‚’ä½¿ã£ã¦æ–™ç†ã‚’ä½œã‚‹ã®ã‚’æ‰‹åŠ©ã‘ã™ã‚‹ã€ŒChef Assistantã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆæ–¹æ³•ã¨Mastraã¸ã®ç™»éŒ²æ–¹æ³•ã‚’å­¦ã³ã€ç¶šã„ã¦ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã—ã¦ã€ã•ã¾ã–ã¾ãªå¿œç­”å½¢å¼ã‚’ç¢ºèªã—ã¾ã™ã€‚æœ€å¾Œã«ã€Mastraã®ãƒ­ãƒ¼ã‚«ãƒ«APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆçµŒç”±ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

<YouTube id="_tZhOqHCrF0" />

<div id="prerequisites">
  ## å‰ææ¡ä»¶
</div>

- Node.js `v20.0` ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã® [Model Provider](/models) ã® API ã‚­ãƒ¼
- æ—¢å­˜ã® Mastra ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆæ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯ [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](/docs/getting-started/installation) ã‚’å‚ç…§ï¼‰

<div id="creating-the-agent">
  ## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆ
</div>

Mastra ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€`Agent` ã‚¯ãƒ©ã‚¹ã§å®šç¾©ã—ã¦ã‹ã‚‰ Mastra ã«ç™»éŒ²ã—ã¾ã™ã€‚

<Steps>

<StepItem>

æ–°è¦ã« `src/mastra/agents/chefAgent.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™:

```ts copy title="src/mastra/agents/chefAgent.ts"
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

export const chefAgent = new Agent({
  name: "chef-agent",
  instructions:
    "You are Michel, a practical and experienced home chef" +
    "You help people cook with whatever ingredients they have available.",
  model: openai("gpt-4o-mini"),
});
```

</StepItem>

<StepItem>

`src/mastra/index.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã™:

```ts copy title="src/mastra/index.ts" {2, 5}
import { Mastra } from "@mastra/core";
import { chefAgent } from "./agents/chefAgent";

export const mastra = new Mastra({
  agents: { chefAgent },
});
```

</StepItem>

</Steps >

<div id="interacting-with-the-agent">
  ## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®ã‚„ã‚Šå–ã‚Š
</div>

è¦ä»¶ã«å¿œã˜ã¦ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã—ã€ã•ã¾ã–ã¾ãªå½¢å¼ã§å¿œç­”ã‚’å—ã‘å–ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§ã¯ã€ç”Ÿæˆã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€æ§‹é€ åŒ–å‡ºåŠ›ã®å–å¾—æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

<Steps>

<StepItem>

æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ« `src/index.ts` ã‚’ä½œæˆã—ã€`main()` é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚é–¢æ•°å†…ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ã‚¯ã‚¨ãƒªã‚’ä½œæˆã—ã€ãã®å¿œç­”ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã—ã¾ã™ã€‚

```ts copy title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";

async function main() {
  const query =
    "In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?";
  console.log(`Query: ${query}`);

  const response = await chefAgent.generate([{ role: "user", content: query }]);
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.text);
}

main();
```

ç¶šã„ã¦ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™:

```bash copy
npx bun src/index.ts
```

æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™:

```
Query: In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?

ğŸ‘¨â€ğŸ³ Chef Michel: You can make a delicious pasta al pomodoro! Here's how...
```

</StepItem>

<StepItem>

å‰ã®ä¾‹ã§ã¯ã€é€²è¡ŒçŠ¶æ³ãŒåˆ†ã‹ã‚‰ãªã„ã¾ã¾å°‘ã—å¾…ã¤å¿…è¦ãŒã‚ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‡ºåŠ›ã‚’ç”Ÿæˆã™ã‚‹æ§˜å­ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€å¿œç­”ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã—ã¾ã™ã€‚

```ts copy title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";

async function main() {
  const query =
    "Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.";
  console.log(`Query: ${query}`);

  const stream = await chefAgent.stream([{ role: "user", content: query }]);

  console.log("\n Chef Michel: ");

  for await (const chunk of stream.textStream) {
    process.stdout.write(chunk);
  }

  console.log("\n\nâœ… Recipe complete!");
}

main();
```

ãã®å¾Œã€ã‚‚ã†ä¸€åº¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™:

```bash copy
npx bun src/index.ts
```

ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚ä»Šå›ã¯å¤§ããªãƒ–ãƒ­ãƒƒã‚¯ã§ã¯ãªãã€è¡Œã”ã¨ã«èª­ã¿é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚

```
Query: Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.

ğŸ‘¨â€ğŸ³ Chef Michel:
Great! You can make a comforting chicken curry...

âœ… Recipe complete!
```

</StepItem>

<StepItem>

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å¿œç­”ã‚’äººã«è¦‹ã›ã‚‹ã®ã§ã¯ãªãã€ã‚³ãƒ¼ãƒ‰ã®åˆ¥ã®éƒ¨åˆ†ã«æ¸¡ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã†ã—ãŸã‚±ãƒ¼ã‚¹ã§ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯[æ§‹é€ åŒ–å‡ºåŠ›](/docs/agents/overview#structured-output)ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

`src/index.ts` ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™:

```ts copy title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";
import { z } from "zod";

async function main() {
  const query =
    "I want to make lasagna, can you generate a lasagna recipe for me?";
  console.log(`Query: ${query}`);

  // Zod ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
  const schema = z.object({
    ingredients: z.array(
      z.object({
        name: z.string(),
        amount: z.string(),
      }),
    ),
    steps: z.array(z.string()),
  });

  const response = await chefAgent.generate(
    [{ role: "user", content: query }],
    {
      structuredOutput: {
        schema,
      },
    },
  );
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.object);
}

main();
```

å†åº¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™:

```
Query: I want to make lasagna, can you generate a lasagna recipe for me?

ğŸ‘¨â€ğŸ³ Chef Michel: {
  ingredients: [
    { name: "Lasagna noodles", amount: "12 sheets" },
    { name: "Ground beef", amount: "1 pound" },
    // ...
  ],
  steps: [
    "Preheat oven to 375Â°F (190Â°C).",
    "Cook the lasagna noodles according to package instructions.",
    // ...
  ]
}
```

</StepItem>

</Steps >

<div id="running-the-agent-server">
  ## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡Œ
</div>

Mastra ã® API ã‚’é€šã˜ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

<Steps>

<StepItem>

`mastra dev` ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èµ·å‹•ã§ãã¾ã™:

```bash copy
mastra dev
```

ã“ã‚Œã«ã‚ˆã‚Šã€ç™»éŒ²æ¸ˆã¿ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚[playground](/docs/getting-started/studio) ã§ã¯ã€UI ä¸Šã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

</StepItem>

<StepItem>

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ `mastra dev` ã¯ `http://localhost:4111` ã§å‹•ä½œã—ã¾ã™ã€‚Chef Assistant ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã¯æ¬¡ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

```
POST http://localhost:4111/api/agents/chefAgent/generate
```

</StepItem>

<StepItem>

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ `curl` ã‚’ä½¿ã£ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã§ãã¾ã™:

```bash copy
curl -X POST http://localhost:4111/api/agents/chefAgent/generate \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": "I have eggs, flour, and milk. What can I make?"
      }
    ]
  }'
```

**ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**

```json
{
  "text": "You can make delicious pancakes! Here's a simple recipe..."
}
```

</StepItem>

</Steps>
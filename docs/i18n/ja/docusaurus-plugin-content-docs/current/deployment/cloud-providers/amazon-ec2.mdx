---
title: "Amazon EC2 | デプロイ | Mastra ドキュメント"
description: "Mastra アプリケーションを Amazon EC2 にデプロイする。"
---

import Steps from "@site/src/components/Steps";
import StepItem from "@site/src/components/StepItem";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";


# Amazon EC2

Mastra アプリケーションを Amazon EC2（Elastic Compute Cloud）にデプロイします。

:::note
このガイドは、Mastra アプリケーションがデフォルトの
`npx create-mastra@latest` コマンドで作成されていることを前提としています。
新しい Mastra アプリケーションの作成方法については、
[はじめに](/docs/getting-started/installation)を参照してください
:::

## 前提条件

- [EC2](https://aws.amazon.com/ec2/) にアクセス可能な AWS アカウント
- Ubuntu 24 以降または Amazon Linux を実行している EC2 インスタンス
- インスタンスを指す A レコードを設定したドメイン名
- リバースプロキシの設定（例: [nginx](https://nginx.org/) の利用）
- SSL 証明書の設定（例: [Let's Encrypt](https://letsencrypt.org/) の利用）
- インスタンスに Node.js 18 以降がインストール済み

## デプロイ手順

<Steps>

<StepItem>

EC2 インスタンスに接続し、リポジトリをクローンします：

<Tabs>
  <TabItem value="public" label="Public Repository">

```bash copy
git clone https://github.com/<your-username>/<your-repository>.git
```

  </TabItem>

  <TabItem value="private" label="Private Repository">

```bash copy
git clone https://<your-username>:<your-personal-access-token>@github.com/<your-username>/<your-repository>.git
```

  </TabItem>
</Tabs>

リポジトリのディレクトリに移動します：

```bash copy
cd "<your-repository>"
```

</StepItem>

<StepItem>

依存関係をインストールします：

```bash copy
npm install
```

</StepItem>

<StepItem>

`.env` ファイルを作成し、環境変数を追加します：

```bash copy
touch .env
```

`.env` ファイルを編集して、環境変数を追加します：

```bash copy
OPENAI_API_KEY=<your-openai-api-key>
# 必要なその他の環境変数を追加してください
```

</StepItem>

<StepItem>

アプリケーションをビルドします：

```bash copy
npm run build
```

</StepItem>

<StepItem>

アプリケーションを実行します：

```bash copy
node --import=./.mastra/output/instrumentation.mjs --env-file=".env" .mastra/output/index.mjs
```

:::note
Mastra アプリケーションはデフォルトでポート 4111 で動作します。リバースプロキシがこのポートへリクエストを転送するように設定されていることを確認してください。
:::

</StepItem>

</Steps>

## Mastra サーバーに接続する

クライアントアプリケーションから、`@mastra/client-js` パッケージの `MastraClient` を使って Mastra サーバーに接続できます。

詳しくは [`MastraClient` のドキュメント](/reference/client-js/mastra-client)をご覧ください。

```typescript copy showLineNumbers
import { MastraClient } from "@mastra/client-js";

const mastraClient = new MastraClient({
  baseUrl: "https://<ドメイン名>",
});
```


## 次の手順

- [Mastra クライアント SDK](/reference/client-js/mastra-client)
# Workflows in Mastra

Workflows are graph-based state machines that can execute complex sequences of operations. They provide a structured way to handle multi-step processes, parallel operations, and human interactions.

When you use workflows with cloud observability providers, you can see the inputs and outputs of each step.

## Core Concepts

Workflows are defined as blueprints in a dedicated directory. The directory path is configured in `mastra.config.ts`

### Use Cases

Here's an example of a workflow that crawls a website, uses an LLM to structure the data, and then analyzes the sentiment of the content.

```typescript filename="src/blueprints/index.ts"
const workflow = new Workflow()

const crawl = workflow.addStep('Crawl', {
  conditions: {
    cond: true,
    transition: 'Structure'
  },
  action: async ({ tools, data }) => {
    const result = await tools.crawlWebpage({ url: data.url });
    return result;
  }
})

const persist = workflow.addStep('Structure', {
  action: async ({ tools, data }) => {
    const result = await tools.structureReviews({ rawText: data.rawText });
    return result;
  }
  conditions: [{
      cond: (data) => data.x > 1,
      transition: 'Index'
  }]
})

const Index = workflow.addStep('Analyze', {
  action: async ({ tools, data }) => {
    const result = await tools.analyzeSentiment({ reviews: data.reviews });
    return result;
  },
  conditions: []
});

export const workflow;
```

You can then register the workflow with Mastra.

```typescript filename="src/mastra/index.ts"
import { workflow } from './blueprints';

export const mastra = new Mastra({
  ...restOfConfig,
  workflows: [workflow],
});
```

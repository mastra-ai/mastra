# Creating Agents

Agents are systems where the language model chooses a sequence of actions. In Mastra, agents provide LLM models with tools, workflows, and synced data. Agents can call your own functions, APIs of third-party integrations, and access knowledge bases you build.

### Agent Configuration
Agents are configured with a name, instructions, model configuration, and a set of enabled tools (functions they can call). 

```typescript filename="src/agents/index.ts"
export const stockAgent = new Agent<typeof integrations, typeof tools>({
  name: 'Stock Agent',
  instructions: 'You are a helpful assistant with access to stock market data. You can provide factual information about stock prices, market data, and company financials. You must not make investment recommendations or give financial advice. Stick to providing objective data and facts only.',
  model: {
    provider: 'ANTHROPIC_VERCEL',
    name: 'claude-3-haiku-20240307',
    toolChoice: 'auto',
  },
  enabledTools: {
    stockPrices: true,
  },
});
```

When you register an agent with Mastra, they get access to the tools, integrations, and logger.

```typescript

export const mastra = new Mastra<typeof tools>({
  ...restOfConfig,
  agents: [stockAgent],
});
```

## Usage

Agents can be used in two modes:
1. [Text generation](https://mastra.ai/docs/reference/agents/text) (`agent.text()`)
2. [Streaming responses](https://mastra.ai/docs/reference/agents/stream) (`agent.stream()`)

Both modes support:
- Multiple message history
- Tool execution
- Rate limit handling
- Step-by-step execution tracking


---
title: "Example: Adding Tools to Agents | Agents | Mastra Docs"
description: Example of creating an AI agent in Mastra that uses a dedicated tool to provide weather information.
---

import { GithubLink } from "@/components/github-link";

#  Agents with Tools

When building AI agents, you often need to extend their capabilities with external data or functionality. Mastra lets you pass tools to an agent using the `tools` parameter. Tools give agents a way to call specific functions, such as fetching data or performing calculations, to help answer a user's query.

## Prerequisites

This example uses the `openai` model. Make sure to add `OPENAI_API_KEY` to your `.env` file.

```bash filename=".env" copy
OPENAI_API_KEY=<your-api-key>
```

## Creating a tool

This tool provides historical weather data for London, returning arrays of daily temperature, precipitation, wind speed, snowfall, and weather conditions from January 1st of the current year up to today. This structure makes it easy for agents to access and reason about recent weather trends.

```typescript filename="src/mastra/tools/london-weather-tool.ts" showLineNumbers copy
import { createTool } from "@mastra/core/tools";
import { z } from "zod";

export const londonWeatherTool = createTool({
  id: "london-weather-tool",
  description: "Returns year-to-date historical weather data for London",
  outputSchema: z.object({
    time: z.array(z.string()),
    temperature_2m_max: z.array(z.number()),
    temperature_2m_min: z.array(z.number()),
    precipitation_sum: z.array(z.number()),
    windspeed_10m_max: z.array(z.number()),
    snowfall_sum: z.array(z.number()),
    weathercode: z.array(z.number())
  }),
  execute: async () => {
    const today = new Date().toISOString().split("T")[0];
    const currentYear = new Date().getFullYear();
    const startOfYear = `${currentYear}-01-01`;

    const response = await fetch(
      `https://archive-api.open-meteo.com/v1/archive?latitude=51.5072&longitude=-0.1276&start_date=${startOfYear}&end_date=${today}&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,windspeed_10m_max,snowfall_sum,weathercode&timezone=auto`
    );

    const {
      daily: { time, temperature_2m_max, temperature_2m_min, precipitation_sum, windspeed_10m_max, snowfall_sum, weathercode }
    } = await response.json();

    return {
      time,
      temperature_2m_max,
      temperature_2m_min,
      precipitation_sum,
      windspeed_10m_max,
      snowfall_sum,
      weathercode
    };
  }
});
```

## Adding a tool to an agent

This agent uses the `londonWeatherTool` to answer questions about historical weather in London. It has clear instructions that guide it to use the tool for every query and limit its responses to data available for the current calendar year.

```typescript filename="src/mastra/agents/london-weather-agent.ts" showLineNumbers copy
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

import { londonWeatherTool } from "../tools/example-london-weather-tools";

export const londonWeatherAgent = new Agent({
  name: "london-weather-agent",
  description: "Provides historical information about London weather",
  instructions: `You are a helpful assistant with access to historical weather data for London.
    - The data is limited to the current calendar year, from January 1st up to today's date.
    - Use the provided tool (londonWeatherTool) to retrieve relevant data.
    - Answer the user's question using that data.
    - Keep responses concise, factual, and informative.
    - If the question cannot be answered with available data, say so clearly.`,
  model: openai("gpt-4o"),
  tools: { londonWeatherTool }
});
```

<GithubLink
  marginTop='mt-16'
  link="https://github.com/mastra-ai/mastra/blob/main/examples/basics/agents/using-a-tool"
/>

## Related

- [Calling Agents](./calling-agents.mdx#from-the-command-line)

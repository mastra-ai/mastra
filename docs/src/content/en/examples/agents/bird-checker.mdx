---
title: "Example: Using an Agent to Classify Bird Images | Agents | Mastra Docs"
description: Example of using a Mastra AI Agent to analyze images from Unsplash to identify birds, determine species, and describe locations.
---

import { GithubLink } from "@/components/github-link";

# Using an Agent to Classify Bird Images

AI agents can analyze and understand images by processing visual content alongside text instructions. This capability allows agents to identify objects, describe scenes, answer questions about images, and perform complex visual reasoning tasks.

## Prerequisites

- [Unsplash](https://unsplash.com/documentation#creating-a-developer-account) Developer Account, Application and API Key
- OpenAI API Key

This example uses the `openai` model. Add both an `OPENAI_API_KEY` and UNSPLASH_ACCESS_KEY to `.env`.

```bash filename=".env" copy
OPENAI_API_KEY=<your-api-key>
UNSPLASH_ACCESS_KEY=<your-unsplash-access-key>
```

## Creating an agent

Create a simple agent that identifies bird species from images.

```typescript filename="src/mastra/agents/example-bird-checker-agent.ts" showLineNumbers copy
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

export const birdCheckerAgent = new Agent({
  name: "Bird checker",
  description: "identifies birds and their species from images",
  instructions: `
    You can view an image and figure out if it is a bird or not.
    You can also figure out the species of the bird and where the picture was taken.
   `,
  model: openai("gpt-4o")
});
```

> See [Agent](../../reference/agents/agent.mdx) for a full list of configuration options.

## Registering an agent

To use an agent, register it in your main Mastra instance.

```typescript filename="src/mastra/index.ts" showLineNumbers copy
import { Mastra } from "@mastra/core/mastra";

import { birdCheckerAgent } from "./agents/example-bird-checker-agent";

export const mastra = new Mastra({
  // ...
  agents: { birdCheckerAgent }
});
```

## Creating a function

This function retrieves a random image from Unsplash to pass to the agent for classification.

```typescript filename="src/mastra/functions/get-random-image.ts" showLineNumbers copy
export const getRandomImage = async () => {
  const queries = ["wildlife", "feathers", "flying", "birds"];
  const query = queries[Math.floor(Math.random() * queries.length)];
  const page = Math.floor(Math.random() * 20);
  const order_by = Math.random() < 0.5 ? "relevant" : "latest";

  const response = await fetch(`https://api.unsplash.com/search/photos?query=${query}&page=${page}&order_by=${order_by}`, {
    headers: {
      Authorization: `Client-ID ${process.env.UNSPLASH_ACCESS_KEY}`,
      "Accept-Version": "v1"
    },
    cache: "no-store"
  });

  const { results } = await response.json();
  return results[Math.floor(Math.random() * results.length)].urls.regular;
};
```

## Example usage

Use `getAgent()` to retrieve a reference to the agent, then call `generate()` with a prompt. Provide a `content` array that includes the image `type`, `imageUrl`, `mimeType`, and clear instructions for how the agent should respond.

```typescript filename="src/test-bird-checker.ts" showLineNumbers copy
import "dotenv/config";

import { mastra } from "./mastra";
import { getRandomImage } from "./mastra/functions/get-random-image";

const imageUrl = await getRandomImage();
const agent = mastra.getAgent("birdCheckerAgent");

const response = await agent.generate([
  {
    role: "user",
    content: [
      {
        type: "image",
        image: imageUrl,
        mimeType: "image/jpeg"
      },
      {
        type: "text",
        text: `View this image and let me know if it's a bird or not, and the scientific name of the bird without any explanation.
        Also summarize the location for this picture in one or two short sentences understandable by a high school student"`
      }
    ]
  }
]);

console.log(response.text);
```

<GithubLink
  marginTop='mt-16'
  link="https://github.com/mastra-ai/mastra/blob/main/examples/basics/agents/bird-checker"
/>


## Related

- [Calling Agents](./calling-agents.mdx#from-the-command-line)

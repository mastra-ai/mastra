---
title: "Migration: Upgrade to Mastra v1 | Migration Guide"
description: "Learn how to upgrade through breaking changes in pre-v1 versions of Mastra."
---

# Upgrade to Mastra v1

In this guide you'll learn how to upgrade through breaking changes in pre-v1 versions of Mastra. It'll also help you upgrade to Mastra v1.

Use your package manager to update your project's versions. Be sure to update **all** Mastra packages at the same time.

:::info

Versions mentioned in the headings refer to the `@mastra/core` package. If necessary, versions of other Mastra packages are called out in the detailed description.

All Mastra packages have a peer dependency on `@mastra/core` so your package manager can inform you about compatibility.

:::

## Migrate to v1.0.0-beta

### Changed: `@mastra/core` subpath imports

The `@mastra/core` package no longer allows top-level imports except for `Mastra` and `type Config`. You must use subpath imports for all other imports.

Here are some examples of how to migrate your imports:

```typescript
// Before
import { Mastra, type Config } from "@mastra/core"; // ✅
import { Agent } from "@mastra/core"; // ❌
import { createTool } from "@mastra/core"; // ❌
import { createStep } from "@mastra/core"; // ❌

// After
import { Mastra, type Config } from "@mastra/core"; // ✅
import { Agent } from "@mastra/core/agent"; // ✅
import { createTool } from "@mastra/core/tools"; // ✅
import { createStep } from "@mastra/core/workflows"; // ✅
```

Read the [package README](https://github.com/mastra-ai/mastra/blob/main/packages/core/README.md) or the [package.json](https://github.com/mastra-ai/mastra/blob/main/packages/core/package.json) for a full list of available subpath imports.

### Changed: `RuntimeContext` renamed to `RequestContext`

The `RuntimeContext` class has been renamed to `RequestContext`, and all parameter names have been updated from `runtimeContext` to `requestContext` across all APIs.

**Why this change?**

- **Clearer naming**: "requestContext" better describes its purpose as request-specific data
- **Consistency**: Aligns with web framework conventions where "request context" is a common pattern
- **Less confusion**: Avoids ambiguity with "runtime" which could refer to execution environment

**Migration:**

Update imports, class instantiation, and parameter names:

```typescript
// Before
import { RuntimeContext } from "@mastra/core/runtime-context"; // ❌

const runtimeContext = new RuntimeContext(); // ❌
runtimeContext.set("userTier", "enterprise");

// After
import { RequestContext } from "@mastra/core/request-context"; // ✅

const requestContext = new RequestContext(); // ✅
requestContext.set("userTier", "enterprise");
```

**Agents:**

```typescript
// Before
await agent.generate(messages, {
  runtimeContext, // ❌
});

// After
await agent.generate(messages, {
  requestContext, // ✅
});
```

**Note**: This also affects workflow steps, dynamic configuration functions (memory, model, etc.), and anywhere else you pass or receive `runtimeContext`/`requestContext` as a parameter. See the "Tool execute signature" section above for the updated tool signature pattern.

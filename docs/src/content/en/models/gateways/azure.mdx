---
title: "Azure OpenAI | Gateways | Mastra"
description: "Use Azure OpenAI Service with custom model deployments."
---

{/* This file is MANUALLY MAINTAINED - DO NOT AUTO-GENERATE */}
{/* Azure uses deployment-based routing which differs from standard providers */}

# <img src="https://models.dev/logos/azure.svg" alt="Azure OpenAI logo" className="inline w-8 h-8 mr-2 align-middle dark:invert dark:brightness-0 dark:contrast-200" />Azure OpenAI

Azure OpenAI provides enterprise-grade access to OpenAI models through dedicated deployments with security, compliance, and SLA guarantees.

Unlike other providers that have fixed model names, Azure uses **deployment names** that you configure in the Azure Portal.

## How Azure Deployments Work

Azure model IDs follow this pattern: `azureopenai/your-deployment-name`

The deployment name is **specific to your Azure account** and chosen when you create a deployment in Azure Portal. Common examples:
- `azureopenai/my-gpt4-deployment`
- `azureopenai/production-gpt-35-turbo`
- `azureopenai/staging-gpt-4o`

:::note About IDE Autocomplete
When you configure optional Management API credentials (see below) and run `pnpm mastra dev` (or build the project), IDE autocomplete will show your actual deployment names from the generated `.d.ts` files.
:::

## Configuration

Create one or more deployments in [Azure OpenAI Studio](https://oai.azure.com/), then configure your credentials:

```bash
# Required - from Azure Portal "Keys and Endpoint"
AZURE_RESOURCE_NAME=my-openai-resource
AZURE_API_KEY=xxxxxxxxxxxxxxxxxxxxx

# Optional - API version (defaults to 2024-04-01-preview)
OPENAI_API_VERSION=2024-04-01-preview
```

### IDE Autocomplete (Optional)

The Azure gateway works without Management API credentialsâ€”you just need to know your deployment names.
For IDE autocomplete with your actual deployment names, add Management API credentials and run dev mode:

```bash
# Service Principal credentials (requires "Cognitive Services User" role)
AZURE_TENANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
AZURE_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
AZURE_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxx
AZURE_SUBSCRIPTION_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
AZURE_RESOURCE_GROUP=my-resource-group
```

Run dev mode to generate types:

```bash
pnpm mastra dev
```

See [Azure documentation](https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal) for Service Principal setup.

## Usage

```typescript
import { Agent } from "@mastra/core/agent";

const agent = new Agent({
  id: "my-agent",
  name: "My Agent",
  instructions: "You are a helpful assistant",
  model: "azureopenai/my-gpt4-deployment"  // Use your Azure deployment name (autocompleted in dev mode)
});

// Generate a response
const response = await agent.generate("Hello!");

// Stream a response
const stream = await agent.stream("Tell me a story");
for await (const chunk of stream) {
  console.log(chunk);
}
```

Check [Azure OpenAI model availability](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models) for region-specific options.

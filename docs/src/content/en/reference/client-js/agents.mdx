---
title: "Reference: Agents API | Client SDK"
description: Learn how to interact with Mastra AI agents, including generating responses, streaming interactions, and managing agent tools using the client-js SDK.
---

# Agents API

The Agents API provides methods to interact with Mastra AI agents, including generating responses, streaming interactions, and managing agent tools.

## Getting All Agents

Retrieve a list of all available agents:

```typescript
const agents = await mastraClient.listAgents();
```

Returns a record of agent IDs to their serialized agent configurations. See the [Agent class reference](/reference/v1/agents/agent) for details on agent properties.

## Working with a Specific Agent

Get an instance of a specific agent:

```typescript
const agent = mastraClient.getAgent("agent-id");
```

## Agent Methods

### Get Agent Details

Retrieve detailed information about an agent:

```typescript
const details = await agent.details();
```

Returns the serialized agent configuration. See the [Agent class reference](/reference/v1/agents/agent) for details on agent properties.

### Generate Response

Generate a response from the agent:

```typescript
const response = await agent.generate({
  messages: [
    {
      role: "user",
      content: "Hello, how are you?",
    },
  ],
  threadId: "thread-1", // Optional: Thread ID for conversation context
  resourceId: "resource-1", // Optional: Resource ID
  output: {}, // Optional: Output configuration
});
```

### Stream Response

Stream responses from the agent for real-time interactions:

```typescript
const stream = await agent.stream({
  messages: [
    {
      role: "user",
      content: "Tell me a story",
    },
  ],
});

// Iterate over stream chunks
for await (const chunk of stream.fullStream) {
  if (chunk.type === "text-delta") {
    console.log(chunk.payload.text);
  }
}

// Or use promise-based properties for complete data
const fullText = await stream.text;
const usage = await stream.usage;
const toolCalls = await stream.toolCalls;
```

The stream provides access to:
- **`fullStream`**: `ReadableStream<ChunkType>` - Iterate over stream chunks
- **`text`**: `Promise<string>` - Complete text response
- **`usage`**: `Promise<{ inputTokens?, outputTokens?, totalTokens? }>` - Token usage statistics
- **`toolCalls`**: `Promise<Array>` - All tool calls made during execution
- **`toolResults`**: `Promise<Array>` - All tool execution results
- **`reasoning`**: `Promise<Array>` - Reasoning parts array (for models that support reasoning)
- **`reasoningText`**: `Promise<string | undefined>` - Complete reasoning text
- **`sources`**: `Promise<Array>` - Source citations
- **`files`**: `Promise<Array>` - Generated files
- **`steps`**: `Promise<Array>` - All step results
- **`finishReason`**: `Promise<string | undefined>` - Why generation finished
- **`error`**: `Error | undefined` - Error information if available

### Client tools

Client-side tools allow you to execute custom functions on the client side when the agent requests them.

#### Basic Usage

```typescript
import { createTool } from "@mastra/client-js";
import { z } from "zod";

const colorChangeTool = createTool({
  id: "changeColor",
  description: "Changes the background color",
  inputSchema: z.object({
    color: z.string(),
  }),
  execute: async (inputData) => {
    document.body.style.backgroundColor = inputData.color;
    return { success: true };
  },
});

// Use with generate
const response = await agent.generate({
  messages: "Change the background to blue",
  clientTools: { colorChangeTool },
});

// Use with stream
const stream = await agent.stream({
  messages: "Change the background to green",
  clientTools: { colorChangeTool },
});

for await (const chunk of stream.fullStream) {
    if (chunk.type === "text-delta") {
      console.log(chunk.payload.text);
    } else if (chunk.type === "tool-call") {
      console.log(
        `calling tool ${chunk.payload.toolName} with args ${JSON.stringify(chunk.payload.args, null, 2)}`,
      );
    }
}
```

### Get Agent Tool

Retrieve information about a specific tool available to the agent:

```typescript
const tool = await agent.getTool("tool-id");
```

### Get Agent Evaluations

Get evaluation results for the agent:

```typescript
// Get CI evaluations
const evals = await agent.evals();

// Get live evaluations
const liveEvals = await agent.liveEvals();
```

### Network Streaming

Stream network execution using the `network()` method:

```typescript
const networkStream = await agent.network("Help me organize my day");

// Iterate over network execution chunks
for await (const chunk of networkStream) {
  console.log(chunk.type);
  if (chunk.type === "network-execution-event-step-finish") {
    console.log(chunk.payload.result);
    }
}

// Or use promise-based properties
const status = await networkStream.status;
const result = await networkStream.result;
const usage = await networkStream.usage;
```

The network stream is a `ReadableStream<NetworkChunkType>` that you can iterate over directly, and also provides:
- **`status`**: `Promise<string>` - Execution status
- **`result`**: `Promise<any>` - Complete execution result
- **`usage`**: `Promise<any>` - Token usage statistics
- **`error`**: `Error | undefined` - Error information if available

#### AI SDK compatible format

To stream AI SDK-formatted parts on the client from an `agent.stream(...)` response, use the `fullStream` directly:

```typescript title="client-ai-sdk-transform.ts" copy
import { createUIMessageStream } from "ai";
import { toAISdkStream } from "@mastra/ai-sdk";
import type { ChunkType } from "@mastra/core/stream";

const stream = await agent.stream({ messages: "Tell me a story" });

const uiMessageStream = createUIMessageStream({
  execute: async ({ writer }) => {
    for await (const part of toAISdkStream(stream.fullStream, { from: "agent" })) {
      writer.write(part);
    }
  },
});

for await (const part of uiMessageStream) {
  console.log(part);
}
```

### Generate

Generate a response using the enhanced API with improved method signatures and AI SDK v5 compatibility:

```typescript
const response = await agent.generate("Hello, how are you?", {
  threadId: "thread-1",
  resourceId: "resource-1",
});
```

---
title: "Reference: LangwatchExporter | Observability"
description: LangWatch LLM observability exporter for Tracing
packages:
  - "@mastra/langwatch"
  - "@mastra/observability"
---

import PropertiesTable from "@site/src/components/PropertiesTable";

# LangwatchExporter

Sends Tracing data to [LangWatch](https://langwatch.ai) via OTLP/HTTP (protobuf) for LLM monitoring, evaluations, and analytics.

## Constructor

```typescript
new LangwatchExporter(config?: LangwatchExporterConfig)
```

## LangwatchExporterConfig

```typescript
type LangwatchExporterConfig = Omit<OtelExporterConfig, "provider"> & {
  apiKey?: string;
  endpoint?: string;
};
```

Extends `OtelExporterConfig` (minus `provider`), which includes:
- `logLevel?: 'debug' | 'info' | 'warn' | 'error'` - Diagnostic log level
- `timeout?: number` - Export timeout in milliseconds
- `batchSize?: number` - Spans per batch
- `customSpanFormatter?: CustomSpanFormatter` - Per-exporter span transformation
- `resourceAttributes?: Record<string, string>` - Additional OTEL resource attributes

<PropertiesTable
  props={[
    {
      name: "apiKey",
      type: "string",
      description: "LangWatch API key. Falls back to LANGWATCH_API_KEY environment variable. Required — exporter is disabled without it.",
      required: false,
    },
    {
      name: "endpoint",
      type: "string",
      description: "LangWatch OTLP endpoint. Falls back to LANGWATCH_ENDPOINT env var, then defaults to https://app.langwatch.ai/api/otel/v1/traces. Override for self-hosted instances.",
      required: false,
    },
  ]}
/>

## Methods

### exportTracingEvent

```typescript
async exportTracingEvent(event: TracingEvent): Promise<void>
```

Exports a tracing event to LangWatch. Only processes SPAN_ENDED events (complete spans with start and end times).

### flush

```typescript
async flush(): Promise<void>
```

Force flushes any buffered spans to LangWatch without shutting down the exporter. Useful in serverless environments.

### shutdown

```typescript
async shutdown(): Promise<void>
```

Flushes pending spans and releases resources. Call when your application is terminating.

## Usage

### Zero-Config (using environment variables)

```typescript
import { LangwatchExporter } from "@mastra/langwatch";

// Reads from LANGWATCH_API_KEY and optionally LANGWATCH_ENDPOINT
const exporter = new LangwatchExporter();
```

### Explicit Configuration

```typescript
import { LangwatchExporter } from "@mastra/langwatch";

const exporter = new LangwatchExporter({
  apiKey: process.env.LANGWATCH_API_KEY!,
});
```

### Self-Hosted Instance

```typescript
import { LangwatchExporter } from "@mastra/langwatch";

const exporter = new LangwatchExporter({
  apiKey: process.env.LANGWATCH_API_KEY!,
  endpoint: "https://your-instance.example.com/api/otel/v1/traces",
});
```

### With Custom Span Formatter

```typescript
import { LangwatchExporter } from "@mastra/langwatch";
import { SpanType } from "@mastra/core/observability";

const exporter = new LangwatchExporter({
  apiKey: process.env.LANGWATCH_API_KEY!,
  customSpanFormatter: (span) => {
    if (span.type === SpanType.AGENT_RUN) {
      return {
        ...span,
        metadata: { ...span.metadata, team: "ml-ops" },
      };
    }
    return span;
  },
});
```

### With Resource Attributes

```typescript
import { LangwatchExporter } from "@mastra/langwatch";

const exporter = new LangwatchExporter({
  apiKey: process.env.LANGWATCH_API_KEY!,
  resourceAttributes: {
    "deployment.environment": "production",
    "service.version": "1.2.3",
  },
});
```

## Environment Variables

The exporter reads configuration from these environment variables:

| Variable             | Description                                                         |
| -------------------- | ------------------------------------------------------------------- |
| `LANGWATCH_API_KEY`  | LangWatch API key (required if not passed in config)                |
| `LANGWATCH_ENDPOINT` | Custom OTLP endpoint (defaults to LangWatch cloud)                  |

## Behavior

- **Protocol**: OTLP/HTTP with protobuf encoding
- **Authentication**: Bearer token via `Authorization` header
- **Batching**: Uses `BatchSpanProcessor` with configurable batch size (default: 512)
- **Disabled state**: If no API key is provided, the exporter logs a warning and becomes a no-op
- **Extends**: `OtelExporter` from `@mastra/otel-exporter` — inherits OpenTelemetry GenAI semantic conventions

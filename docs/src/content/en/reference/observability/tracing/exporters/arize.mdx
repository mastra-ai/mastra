---
title: "Reference: ArizeExporter | Observability"
description: Arize exporter for Tracing using OpenInference
packages:
  - "@mastra/arize"
---

import PropertiesTable from "@site/src/components/PropertiesTable";

# ArizeExporter

Sends Tracing data to Arize Phoenix, Arize AX, or any OpenTelemetry-compatible observability platform that supports OpenInference semantic conventions.

## Constructor

```typescript
new ArizeExporter(config: ArizeExporterConfig)
```

## ArizeExporterConfig

```typescript
type ArizeExporterConfig = Omit<OtelExporterConfig, 'provider'> & {
  // Phoenix / OpenTelemetry configuration
  endpoint?: string;
  apiKey?: string;

  // Arize AX configuration
  spaceId?: string;

  // Common configuration
  projectName?: string;
  headers?: Record<string, string>;
}
```

Inherits from `OtelExporterConfig` (excluding `provider`), which includes:
- `timeout?: number` - Export timeout in milliseconds (default: 30000)
- `batchSize?: number` - Number of spans per batch (default: 512)
- `logLevel?: LogLevel | 'debug' | 'info' | 'warn' | 'error'` - Log level (default: WARN)
- `resourceAttributes?: Record<string, any>` - Custom resource attributes

### Metadata passthrough

Non-reserved span attributes are serialized into the OpenInference `metadata` payload. Add them via `tracingOptions.metadata` (e.g., `companyId`, `tier`). Reserved fields such as `input`, `output`, `sessionId`, thread/user IDs, and OpenInference IDs are excluded automatically.

<PropertiesTable
  props={[
    {
      name: "endpoint",
      type: "string",
      description:
        "Collector endpoint for trace exports. Falls back to PHOENIX_ENDPOINT env var. Required for Phoenix.",
      required: false,
    },
    {
      name: "apiKey",
      type: "string",
      description:
        "API key for authentication. Falls back to ARIZE_API_KEY or PHOENIX_API_KEY env var.",
      required: false,
    },
    {
      name: "spaceId",
      type: "string",
      description:
        "Arize AX space identifier. Falls back to ARIZE_SPACE_ID env var. Required for Arize AX.",
      required: false,
    },
    {
      name: "projectName",
      type: "string",
      description: "Project name. Falls back to ARIZE_PROJECT_NAME or PHOENIX_PROJECT_NAME env var.",
      required: false,
    },
    {
      name: "headers",
      type: "Record<string, string>",
      description: "Additional headers for OTLP requests",
      required: false,
    },
    {
      name: "timeout",
      type: "number",
      description:
        "Timeout in milliseconds before exporting spans (default: 30000)",
      required: false,
    },
    {
      name: "batchSize",
      type: "number",
      description: "Number of spans to batch before export (default: 512)",
      required: false,
    },
    {
      name: "logLevel",
      type: "'debug' | 'info' | 'warn' | 'error'",
      description: "Logger level (default: 'warn')",
      required: false,
    },
    {
      name: "resourceAttributes",
      type: "Record<string, any>",
      description: "Custom resource attributes added to each span",
      required: false,
    },
  ]}
/>

## Methods

### exportTracingEvent

```typescript
async exportTracingEvent(event: TracingEvent): Promise<void>
```

Exports a tracing event to the configured endpoint.

### export

```typescript
async export(spans: ReadOnlySpan[]): Promise<void>
```

Batch exports spans using OpenTelemetry with OpenInference semantic conventions.

### flush

```typescript
async flush(): Promise<void>
```

Force flushes any buffered spans to the configured endpoint without shutting down the exporter. Useful in serverless environments where you need to ensure spans are exported before the runtime terminates.

### shutdown

```typescript
async shutdown(): Promise<void>
```

Flushes pending data and shuts down the client.

## createArizeConfig

Function that returns an observability configuration object with default `serializationOptions` set to `ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS`. All properties from `ObservabilityInstanceConfig` (except `name`) can be passed through.

```typescript
function createArizeConfig(options: CreateArizeConfigOptions): Omit<ObservabilityInstanceConfig, 'name'>
```

### CreateArizeConfigOptions

```typescript
interface CreateArizeConfigOptions extends Omit<ObservabilityInstanceConfig, 'name' | 'serviceName'> {
  serviceName?: string;
  serializationOptions?: SerializationOptions;
}
```

Extends `ObservabilityInstanceConfig` to allow pass-through of all observability configuration properties.

<PropertiesTable
  props={[
    {
      name: "exporters",
      type: "ObservabilityExporter[]",
      description: "Array of exporter instances. Each `ArizeExporter` in the array can be configured with either an `endpoint` (for Phoenix/collectors) or `spaceId` (for Arize AX). Can include multiple `ArizeExporter` instances or other exporter types.",
      required: true,
    },
    {
      name: "serviceName",
      type: "string",
      description:
        "Service name for observability. Resolves in order: `PHOENIX_PROJECT_NAME` environment variable → `ARIZE_PROJECT_NAME` environment variable → `'mastra-tracing'`.",
      required: false,
    },
    {
      name: "serializationOptions",
      type: "SerializationOptions",
      description:
        "Options for controlling serialization of span data (input/output/attributes). Defaults to `ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS` which sets `maxStringLength: 9999999`, `maxDepth: 9999999`, `maxArrayLength: 9999999`, `maxObjectKeys: 9999999` to prevent truncation. Custom values are merged with these defaults.",
      required: false,
    },
    {
      name: "...rest",
      type: "ObservabilityInstanceConfig properties",
      description:
        "All other `ObservabilityInstanceConfig` properties (`spanOutputProcessors`, `sampling`, `bridge`, `includeInternalSpans`, `requestContextKeys`) are passed through unchanged. The `spanOutputProcessors` field accepts an array of span output processors that are used as-is without any default processors added.",
      required: false,
    },
  ]}
/>

## ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS

Exported constant with Arize's recommended serialization settings to prevent data truncation:

```typescript
export const ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS: SerializationOptions = {
  maxStringLength: 9999999,
  maxDepth: 9999999,
  maxArrayLength: 9999999,
  maxObjectKeys: 9999999,
};
```

You can spread these into your custom config and override specific values as needed.

## Usage

### Configuration with `createArizeConfig`

The `createArizeConfig` function returns a configuration object with default `serializationOptions` set to `ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS`, which sets large payload limits (`maxStringLength: 9999999`, `maxDepth: 9999999`, `maxArrayLength: 9999999`, `maxObjectKeys: 9999999`) to prevent truncation of span data. The `exporters` field accepts an array of exporter instances, where each `ArizeExporter` can be configured with either an `endpoint` (for Phoenix/collectors) or `spaceId` (for Arize AX).

#### Basic Usage

The `exporters` field accepts an array of exporter instances. Each `ArizeExporter` in the `exporters` array can be configured with either an `endpoint` (for Phoenix/collectors) or `spaceId` (for Arize AX):

```typescript
import { Mastra } from "@mastra/core";
import { Observability } from "@mastra/observability";
import { createArizeConfig, ArizeExporter } from "@mastra/arize";

// For Phoenix: use endpoint in the exporters array
const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporters: [
          new ArizeExporter({
            endpoint: process.env.PHOENIX_ENDPOINT!,
            apiKey: process.env.PHOENIX_API_KEY,
            projectName: process.env.PHOENIX_PROJECT_NAME,
          }),
        ],
      }),
    },
  }),
});
```

```typescript
import { Mastra } from "@mastra/core";
import { Observability } from "@mastra/observability";
import { createArizeConfig, ArizeExporter } from "@mastra/arize";

// For Arize AX: use spaceId in the exporters array
const mastraArize = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporters: [
          new ArizeExporter({
            spaceId: process.env.ARIZE_SPACE_ID!,
            apiKey: process.env.ARIZE_API_KEY!,
            projectName: process.env.ARIZE_PROJECT_NAME,
          }),
        ],
      }),
    },
  }),
});
```

#### Multiple Exporters

The `exporters` field accepts multiple exporter instances in an array:

```typescript
import { Mastra } from "@mastra/core";
import { Observability } from "@mastra/observability";
import { createArizeConfig, ArizeExporter } from "@mastra/arize";
import { DefaultExporter } from "@mastra/observability";

const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporters: [
          new ArizeExporter({
            endpoint: process.env.PHOENIX_ENDPOINT!,
          }),
          new DefaultExporter(),
        ],
      }),
    },
  }),
});
```

#### Customizing Serialization Options

The `serializationOptions` field defaults to `ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS`. To override specific limits, pass a `serializationOptions` object that will be merged with the defaults:

```typescript
import { Mastra } from "@mastra/core";
import { Observability } from "@mastra/observability";
import { createArizeConfig, ArizeExporter, ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS } from "@mastra/arize";

const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporters: [
          new ArizeExporter({
            endpoint: process.env.PHOENIX_ENDPOINT!,
          }),
        ],
        serializationOptions: {
          ...ARIZE_RECOMMENDED_SERIALIZATION_OPTIONS,
          maxStringLength: 500, // Override maxStringLength; other limits inherit defaults
        },
      }),
    },
  }),
});
```

All properties from `ObservabilityInstanceConfig` (except `name`) can be passed through `createArizeConfig`, including `spanOutputProcessors`, `sampling`, `bridge`, `includeInternalSpans`, and `requestContextKeys`.

### Manual Configuration with `ArizeExporter`

For direct control over the configuration, you can use `ArizeExporter` directly:

#### Zero-Config (using environment variables)

```typescript
import { ArizeExporter } from "@mastra/arize";

// For Phoenix: Set PHOENIX_ENDPOINT, PHOENIX_API_KEY, PHOENIX_PROJECT_NAME
// For Arize AX: Set ARIZE_SPACE_ID, ARIZE_API_KEY, ARIZE_PROJECT_NAME
const exporter = new ArizeExporter();
```

### Phoenix Configuration

```typescript
import { ArizeExporter } from "@mastra/arize";

const exporter = new ArizeExporter({
  endpoint: "http://localhost:6006/v1/traces",
  apiKey: process.env.PHOENIX_API_KEY, // Optional for local Phoenix
  projectName: "my-ai-project",
});
```

### Arize AX Configuration

```typescript
import { ArizeExporter } from "@mastra/arize";

const exporter = new ArizeExporter({
  spaceId: process.env.ARIZE_SPACE_ID!,
  apiKey: process.env.ARIZE_API_KEY!,
  projectName: "my-ai-project",
});
```

## OpenInference Semantic Conventions

The ArizeExporter implements [OpenInference Semantic Conventions](https://github.com/Arize-ai/openinference/tree/main/spec) for generative AI applications, providing standardized trace structure across different observability platforms.

## Tags Support

The ArizeExporter supports trace tagging for categorization and filtering. Tags are only applied to root spans and are mapped to the native OpenInference `tag.tags` semantic convention.

### Usage

```typescript
const result = await agent.generate("Hello", {
  tracingOptions: {
    tags: ["production", "experiment-v2", "user-request"],
  },
});
```

### How Tags Are Stored

Tags are stored using the OpenInference `tag.tags` attribute:

```json
{
  "tag.tags": ["production", "experiment-v2", "user-request"]
}
```

## Related

- [ArizeExporter Documentation](/docs/observability/tracing/exporters/arize)
- [Phoenix Documentation](https://docs.arize.com/phoenix)
- [Arize AX Documentation](https://docs.arize.com/)

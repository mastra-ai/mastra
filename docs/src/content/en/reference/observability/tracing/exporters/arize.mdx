---
title: "Reference: ArizeExporter | Observability"
description: Arize exporter for Tracing using OpenInference
packages:
  - "@mastra/arize"
---

import PropertiesTable from "@site/src/components/PropertiesTable";

# ArizeExporter

Sends Tracing data to Arize Phoenix, Arize AX, or any OpenTelemetry-compatible observability platform that supports OpenInference semantic conventions.

## Constructor

```typescript
new ArizeExporter(config: ArizeExporterConfig)
```

## ArizeExporterConfig

```typescript
type ArizeExporterConfig = Omit<OtelExporterConfig, 'provider'> & {
  // Phoenix / OpenTelemetry configuration
  endpoint?: string;
  apiKey?: string;

  // Arize AX configuration
  spaceId?: string;

  // Common configuration
  projectName?: string;
  headers?: Record<string, string>;
}
```

Inherits from `OtelExporterConfig` (excluding `provider`), which includes:
- `timeout?: number` - Export timeout in milliseconds (default: 30000)
- `batchSize?: number` - Number of spans per batch (default: 512)
- `logLevel?: LogLevel | 'debug' | 'info' | 'warn' | 'error'` - Log level (default: WARN)
- `resourceAttributes?: Record<string, any>` - Custom resource attributes

### Metadata passthrough

Non-reserved span attributes are serialized into the OpenInference `metadata` payload. Add them via `tracingOptions.metadata` (e.g., `companyId`, `tier`). Reserved fields such as `input`, `output`, `sessionId`, thread/user IDs, and OpenInference IDs are excluded automatically.

<PropertiesTable
  props={[
    {
      name: "endpoint",
      type: "string",
      description:
        "Collector endpoint for trace exports. Falls back to PHOENIX_ENDPOINT env var. Required for Phoenix.",
      required: false,
    },
    {
      name: "apiKey",
      type: "string",
      description:
        "API key for authentication. Falls back to ARIZE_API_KEY or PHOENIX_API_KEY env var.",
      required: false,
    },
    {
      name: "spaceId",
      type: "string",
      description:
        "Arize AX space identifier. Falls back to ARIZE_SPACE_ID env var. Required for Arize AX.",
      required: false,
    },
    {
      name: "projectName",
      type: "string",
      description: "Project name. Falls back to ARIZE_PROJECT_NAME or PHOENIX_PROJECT_NAME env var.",
      required: false,
    },
    {
      name: "headers",
      type: "Record<string, string>",
      description: "Additional headers for OTLP requests",
      required: false,
    },
    {
      name: "timeout",
      type: "number",
      description:
        "Timeout in milliseconds before exporting spans (default: 30000)",
      required: false,
    },
    {
      name: "batchSize",
      type: "number",
      description: "Number of spans to batch before export (default: 512)",
      required: false,
    },
    {
      name: "logLevel",
      type: "'debug' | 'info' | 'warn' | 'error'",
      description: "Logger level (default: 'warn')",
      required: false,
    },
    {
      name: "resourceAttributes",
      type: "Record<string, any>",
      description: "Custom resource attributes added to each span",
      required: false,
    },
  ]}
/>

## Methods

### exportTracingEvent

```typescript
async exportTracingEvent(event: TracingEvent): Promise<void>
```

Exports a tracing event to the configured endpoint.

### export

```typescript
async export(spans: ReadOnlySpan[]): Promise<void>
```

Batch exports spans using OpenTelemetry with OpenInference semantic conventions.

### flush

```typescript
async flush(): Promise<void>
```

Force flushes any buffered spans to the configured endpoint without shutting down the exporter. Useful in serverless environments where you need to ensure spans are exported before the runtime terminates.

### shutdown

```typescript
async shutdown(): Promise<void>
```

Flushes pending data and shuts down the client.

## createArizeConfig

Helper function that creates a pre-configured Arize observability config with sensible defaults.

```typescript
function createArizeConfig(options: CreateArizeConfigOptions): Omit<ObservabilityInstanceConfig, 'name'>
```

### CreateArizeConfigOptions

```typescript
interface CreateArizeConfigOptions {
  exporter: ArizeExporterConfig;
  serviceName?: string;
  serializationOptions?: SerializationOptions;
  spanProcessors?: SpanOutputProcessor[];
}
```

<PropertiesTable
  props={[
    {
      name: "exporter",
      type: "ArizeExporterConfig",
      description: "Exporter configuration. At minimum, endpoint should be provided (or spaceId for Arize AX).",
      required: true,
    },
    {
      name: "serviceName",
      type: "string",
      description:
        "Service name for tracing. Defaults to PHOENIX_PROJECT_NAME or ARIZE_PROJECT_NAME env var, or 'mastra-tracing'.",
      required: false,
    },
    {
      name: "serializationOptions",
      type: "SerializationOptions",
      description:
        "Custom serialization options (merged with defaults). By default, outputs won't be truncated due to optimized serialization limits.",
      required: false,
    },
    {
      name: "spanProcessors",
      type: "SpanOutputProcessor[]",
      description:
        "Additional span output processors (appended to defaults). A default workflow filter is always included first that filters out internal workflow spans (like 'Workflow loop') so you won't see internal steps of building an agent.",
      required: false,
    },
  ]}
/>

## Usage

### Simplified Configuration with `createArizeConfig`

For a simpler setup with optimized defaults, use `createArizeConfig`. This helper function provides:

- **Optimized serialization options** - Large payload limits by default (no truncation)
- **Built-in workflow filter** - Automatically filters out workflow loop/parallel/conditional spans to reduce noise
- **Simplified API** - Less boilerplate than manual configuration

#### Basic Usage

`createArizeConfig` works with both Phoenix and Arize AX:

```typescript
import { Observability } from "@mastra/observability";
import { createArizeConfig } from "@mastra/arize";

// For Phoenix
const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporter: {
          endpoint: process.env.PHOENIX_ENDPOINT!,
          apiKey: process.env.PHOENIX_API_KEY,
          projectName: process.env.PHOENIX_PROJECT_NAME,
        },
      }),
    },
  }),
});

// For Arize AX
const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporter: {
          spaceId: process.env.ARIZE_SPACE_ID!,
          apiKey: process.env.ARIZE_API_KEY!,
          projectName: process.env.ARIZE_PROJECT_NAME,
        },
      }),
    },
  }),
});
```

#### Customizing Serialization Options

By default, `createArizeConfig` uses optimized serialization options that prevent truncation of outputs and large payloads. You can customize these options by providing `serializationOptions` to control how span data is serialized. This works for both Phoenix and Arize AX:

```typescript
import { Observability } from "@mastra/observability";
import { createArizeConfig } from "@mastra/arize";

const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporter: {
          // Works with either Phoenix (endpoint) or Arize AX (spaceId)
          endpoint: process.env.PHOENIX_ENDPOINT!,
          // or
          // spaceId: process.env.ARIZE_SPACE_ID!,
        },
        serializationOptions: {
          // Customize serialization limits as needed
        },
      }),
    },
  }),
});
```

#### Customizing Span Processors

The config includes a built-in workflow filter that automatically filters out internal workflow spans (like "Workflow loop", "Workflow parallel", etc.) so you won't see internal steps of building an agent. You can add additional custom span processors. This works for both Phoenix and Arize AX:

```typescript
import { Observability } from "@mastra/observability";
import { createArizeConfig } from "@mastra/arize";

const mastra = new Mastra({
  observability: new Observability({
    configs: {
      arize: createArizeConfig({
        exporter: {
          // Works with either Phoenix (endpoint) or Arize AX (spaceId)
          endpoint: process.env.PHOENIX_ENDPOINT!,
          // or
          // spaceId: process.env.ARIZE_SPACE_ID!,
        },
        spanProcessors: [
          // Add your custom span processors here
          // The default workflow filter is always included first
        ],
      }),
    },
  }),
});
```

### Manual Configuration with `ArizeExporter`

For direct control over the configuration, you can use `ArizeExporter` directly:

#### Zero-Config (using environment variables)

```typescript
import { ArizeExporter } from "@mastra/arize";

// For Phoenix: Set PHOENIX_ENDPOINT, PHOENIX_API_KEY, PHOENIX_PROJECT_NAME
// For Arize AX: Set ARIZE_SPACE_ID, ARIZE_API_KEY, ARIZE_PROJECT_NAME
const exporter = new ArizeExporter();
```

### Phoenix Configuration

```typescript
import { ArizeExporter } from "@mastra/arize";

const exporter = new ArizeExporter({
  endpoint: "http://localhost:6006/v1/traces",
  apiKey: process.env.PHOENIX_API_KEY, // Optional for local Phoenix
  projectName: "my-ai-project",
});
```

### Arize AX Configuration

```typescript
import { ArizeExporter } from "@mastra/arize";

const exporter = new ArizeExporter({
  spaceId: process.env.ARIZE_SPACE_ID!,
  apiKey: process.env.ARIZE_API_KEY!,
  projectName: "my-ai-project",
});
```

## OpenInference Semantic Conventions

The ArizeExporter implements [OpenInference Semantic Conventions](https://github.com/Arize-ai/openinference/tree/main/spec) for generative AI applications, providing standardized trace structure across different observability platforms.

## Tags Support

The ArizeExporter supports trace tagging for categorization and filtering. Tags are only applied to root spans and are mapped to the native OpenInference `tag.tags` semantic convention.

### Usage

```typescript
const result = await agent.generate("Hello", {
  tracingOptions: {
    tags: ["production", "experiment-v2", "user-request"],
  },
});
```

### How Tags Are Stored

Tags are stored using the OpenInference `tag.tags` attribute:

```json
{
  "tag.tags": ["production", "experiment-v2", "user-request"]
}
```

## Related

- [ArizeExporter Documentation](/docs/observability/tracing/exporters/arize)
- [Phoenix Documentation](https://docs.arize.com/phoenix)
- [Arize AX Documentation](https://docs.arize.com/)

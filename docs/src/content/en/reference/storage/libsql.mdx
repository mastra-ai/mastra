---
title: "Reference: LibSQL Storage | Storage"
description: Documentation for the LibSQL storage implementation in Mastra.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import SchemaManagement from "./_schema-management.mdx";
import UsingStorageDomains from "./_using-storage-domains.mdx";

# LibSQL Storage

The LibSQL storage implementation provides a SQLite-compatible storage solution that can run both in-memory and as a persistent database.

## Installation

<Tabs>
<TabItem value="npm" label="npm">

```bash copy
npm install @mastra/libsql@beta
```

</TabItem>
<TabItem value="pnpm" label="pnpm">

```bash copy
pnpm add @mastra/libsql@beta
```

</TabItem>
<TabItem value="yarn" label="yarn">

```bash copy
yarn add @mastra/libsql@beta
```

</TabItem>
<TabItem value="bun" label="bun">

```bash copy
bun add @mastra/libsql@beta
```

</TabItem>
</Tabs>

## Usage

```typescript copy showLineNumbers
import { LibSQLStore } from "@mastra/libsql";

// File database (development)
const storage = new LibSQLStore({
  id: 'libsql-storage',
  url: "file:./storage.db",
});

// Persistent database (production)
const storage = new LibSQLStore({
  id: 'libsql-storage',
  url: process.env.DATABASE_URL,
});
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      description: "Unique identifier for this storage instance",
      isOptional: false,
    },
    {
      name: "url",
      type: "string",
      description:
        "Database URL. Use ':memory:' for in-memory database, 'file:filename.db' for a file database, or any LibSQL-compatible connection string for persistent storage.",
      isOptional: false,
    },
    {
      name: "authToken",
      type: "string",
      description: "Authentication token for remote LibSQL databases (e.g., Turso).",
      isOptional: true,
    },
    {
      name: "maxRetries",
      type: "number",
      description:
        "Maximum number of retries for write operations if an SQLITE_BUSY error occurs. Uses exponential backoff.",
      isOptional: true,
      defaultValue: "5",
    },
    {
      name: "initialBackoffMs",
      type: "number",
      description:
        "Initial backoff time in milliseconds for retrying write operations on SQLITE_BUSY. The backoff time doubles with each retry.",
      isOptional: true,
      defaultValue: "100",
    },
  ]}
/>

<UsingStorageDomains />

<SchemaManagement />

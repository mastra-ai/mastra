---
title: "Reference: MongoDB Storage | Storage"
description: Documentation for the MongoDB storage implementation in Mastra.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import SchemaManagement from "./_schema-management.mdx";
import UsingStorageDomains from "./_using-storage-domains.mdx";

# MongoDB Storage

The MongoDB storage implementation provides a scalable storage solution using MongoDB databases with support for both document storage and vector operations.

## Installation

<Tabs>
<TabItem value="npm" label="npm">

```bash copy
npm install @mastra/mongodb@beta
```

</TabItem>
<TabItem value="pnpm" label="pnpm">

```bash copy
pnpm add @mastra/mongodb@beta
```

</TabItem>
<TabItem value="yarn" label="yarn">

```bash copy
yarn add @mastra/mongodb@beta
```

</TabItem>
<TabItem value="bun" label="bun">

```bash copy
bun add @mastra/mongodb@beta
```

</TabItem>
</Tabs>

Ensure you have a MongoDB Atlas Local (via Docker) or MongoDB Atlas Cloud instance with Atlas Search enabled. MongoDB 7.0+ is recommended.

## Usage

```typescript copy showLineNumbers
import { MongoDBStore } from "@mastra/mongodb";

const storage = new MongoDBStore({
  id: "mongodb-storage",
  url: process.env.MONGODB_URL,
  dbName: process.env.MONGODB_DATABASE,
});
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      description: "Unique identifier for this storage instance.",
      isOptional: false,
    },
    {
      name: "url",
      type: "string",
      description:
        "MongoDB connection string (e.g., mongodb+srv://user:password@cluster.mongodb.net).",
      isOptional: false,
    },
    {
      name: "dbName",
      type: "string",
      description: "The name of the database you want the storage to use. Must not be empty.",
      isOptional: false,
    },
    {
      name: "options",
      type: "MongoClientOptions",
      description:
        "MongoDB client options for advanced configuration (SSL, connection pooling, etc.).",
      isOptional: true,
    },
  ]}
/>

See advanced configuration [here](https://www.mongodb.com/docs/drivers/node/current/connect/connection-options/).

## Instantiation

You can instantiate `MongoDBStore` in the following ways:

```ts
import { MongoDBStore } from "@mastra/mongodb";

// Basic connection without custom options
const store1 = new MongoDBStore({
  id: "mongodb-storage",
  url: "mongodb+srv://user:password@cluster.mongodb.net",
  dbName: "mastra_storage",
});

// Using connection string with options
const store2 = new MongoDBStore({
  id: "mongodb-storage",
  url: "mongodb+srv://user:password@cluster.mongodb.net",
  dbName: "mastra_storage",
  options: {
    retryWrites: true,
    maxPoolSize: 10,
    serverSelectionTimeoutMS: 5000,
    socketTimeoutMS: 45000,
  },
});
```

<UsingStorageDomains />

<SchemaManagement />
---
title: "Reference: Memory.listThreadsByResourceId() | Memory | Mastra Docs"
description: "Documentation for the `Memory.listThreadsByResourceId()` method in Mastra, which retrieves threads associated with a specific resource ID with pagination support."
---

# Memory.listThreadsByResourceId()

The `.listThreadsByResourceId()` method retrieves threads associated with a specific resource ID with pagination support.

## Usage Example

```typescript copy
await memory.listThreadsByResourceId({
  resourceId: "user-123",
  offset: 0,
  limit: 10,
});
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "resourceId",
      type: "string",
      description: "The ID of the resource whose threads are to be retrieved",
      isOptional: false,
    },
    {
      name: "offset",
      type: "number",
      description: "Number of items to skip",
      isOptional: false,
    },
    {
      name: "limit",
      type: "number",
      description: "Maximum number of threads to return",
      isOptional: false,
    },
    {
      name: "orderBy",
      type: "{ field: 'createdAt' | 'updatedAt', direction: 'ASC' | 'DESC' }",
      description: "Sort configuration with field and direction (defaults to { field: 'createdAt', direction: 'DESC' })",
      isOptional: true,
    },
  ]}
/>

## Returns

<PropertiesTable
  content={[
    {
      name: "result",
      type: "Promise<StorageListThreadsByResourceIdOutput>",
      description:
        "A promise that resolves to paginated thread results with metadata",
    },
  ]}
/>

The return object contains:
- `threads`: Array of thread objects
- `total`: Total number of threads for this resource
- `page`: Current page number (`Math.floor(offset / limit)` when `limit > 0`)
- `perPage`: Items per page (same as limit)
- `hasMore`: Boolean indicating if more results are available

## Extended usage example

```typescript title="src/test-memory.ts" showLineNumbers copy
import { mastra } from "./mastra";

const agent = mastra.getAgent("agent");
const memory = await agent.getMemory();

let currentOffset = 0;
const limit = 25;
let hasMorePages = true;

while (hasMorePages) {
  const result = await memory?.listThreadsByResourceId({
    resourceId: "user-123",
    offset: currentOffset,
    limit: limit,
    orderBy: { field: "createdAt", direction: "ASC" },
  });

  if (!result) {
    console.log("No threads");
    break;
  }

  result.threads.forEach((thread) => {
    console.log(`Thread: ${thread.id}, Created: ${thread.createdAt}`);
  });

  hasMorePages = result.hasMore;
  currentOffset += limit; // Increment by limit to get next page
}
```

## Related

- [Memory Class Reference](/reference/memory/memory-class)
- [Getting Started with Memory](/docs/memory/overview) (Covers threads/resources concept)
- [createThread](/reference/memory/createThread)
- [getThreadById](/reference/memory/getThreadById)

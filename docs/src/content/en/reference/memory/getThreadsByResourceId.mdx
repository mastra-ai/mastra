---
title: "Reference: Memory.getThreadsByResourceId() | Memory"
description: "Documentation for the `Memory.getThreadsByResourceId()` method in Mastra, which retrieves all threads that belong to a specific resource."
---

# Memory.getThreadsByResourceId()

The `.getThreadsByResourceId()` function retrieves all threads associated with a specific resource ID from storage. Threads can be sorted by creation or modification time in ascending or descending order.

## Usage Example

```typescript
await memory?.getThreadsByResourceId({ resourceId: "user-123" });
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "resourceId",
      type: "string",
      description: "The ID of the resource whose threads are to be retrieved.",
      isOptional: false,
    },
    {
      name: "orderBy",
      type: "ThreadOrderBy",
      description:
        "Field to sort threads by. Accepts 'createdAt' or 'updatedAt'. Default: 'createdAt'",
      isOptional: true,
    },
    {
      name: "sortDirection",
      type: "ThreadSortDirection",
      description:
        "Sort order direction. Accepts 'ASC' or 'DESC'. Default: 'DESC'",
      isOptional: true,
    },
  ]}
/>

## Returns

<PropertiesTable
  content={[
    {
      name: "StorageThreadType[]",
      type: "Promise",
      description:
        "A promise that resolves to an array of threads associated with the given resource ID.",
    },
  ]}
/>

## Extended usage example

```typescript title="src/test-memory.ts" showLineNumbers copy
import { mastra } from "./mastra";

const agent = mastra.getAgent("agent");
const memory = await agent.getMemory();

const thread = await memory?.getThreadsByResourceId({
  resourceId: "user-123",
  orderBy: "updatedAt",
  sortDirection: "ASC",
});

console.log(thread);
```

### Related

- [Memory Class Reference](/reference/v0/memory/memory-class)
- [getThreadsByResourceIdPaginated](/reference/v0/memory/getThreadsByResourceIdPaginated) - Paginated version
- [Getting Started with Memory](/docs/v0/memory/overview) (Covers threads/resources concept)
- [createThread](/reference/v0/memory/createThread)
- [getThreadById](/reference/v0/memory/getThreadById)

---
title: "Reference: listMessages() | Memory"
description: "Documentation for the `listMessages()` method in Mastra, which retrieves messages from threads with pagination support."
packages:
  - "@mastra/memory"
---

# listMessages()

The `listMessages()` method retrieves messages from one or more threads with pagination support.

## Usage Example

```typescript
const storage = mastra.getStorage();
const memoryStore = await storage?.getStore('memory');

const result = await memoryStore?.listMessages({
  threadId: "your-thread-id",
  page: 0,
  perPage: 50
});
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "threadId",
      type: "string | string[]",
      description: "The ID of the thread to retrieve messages from, or an array of thread IDs to query multiple threads at once.",
      isOptional: false,
    },
    {
      name: "page",
      type: "number",
      description: "Page number (0-indexed) to retrieve.",
      isOptional: true,
    },
    {
      name: "perPage",
      type: "number",
      description: "Maximum number of messages to return per page.",
      isOptional: true,
    },
  ]}
/>

## Returns

<PropertiesTable
  content={[
    {
      name: "result",
      type: "Promise<{ messages: MastraDBMessage[]; total: number; hasMore: boolean }>",
      description: "A promise that resolves to paginated message results.",
    },
  ]}
/>

The return object contains:

- `messages`: Array of messages in `MastraDBMessage` format
- `total`: Total number of messages matching the query
- `hasMore`: Boolean indicating if more results are available

### Related

- [Message History](/docs/memory/message-history)
- [Memory Class Reference](/reference/memory/memory-class)
- [listThreads](/reference/memory/listThreads)

---
title: "MastraClient"
description: "Learn how to set up and use the Mastra Client SDK"
---

import { Tabs } from "nextra/components";

# Mastra Client SDK

The Mastra Client SDK provides a simple and type-safe interface for interacting with your [Mastra Server](/docs/deployment/server) from your client environment.

## Prerequisites

To ensure smooth local development, make sure you have:

- Node.js `v18` or higher
- TypeScript `v4.7` or higher (if using TypeScript)
- Your local Mastra server running (typically on port `4111`)

## Getting started

To use the Client SDK, install the required dependencies:

{/*
LLM CONTEXT:
This Tabs component shows installation commands for the Mastra Client SDK using different package managers.
Each tab displays the installation command for that specific package manager (npm, yarn, pnpm).
This helps users install the client SDK with their preferred package manager.
All commands install the same @mastra/client-js package but use different package manager syntax.
*/}

<Tabs items={["npm", "yarn", "pnpm", "bun"]}>
  <Tabs.Tab>
    ```bash copy
    npm install @mastra/client-js@latest
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    yarn add @mastra/client-js@latest
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    pnpm add @mastra/client-js@latest
    ```
  </Tabs.Tab>
    <Tabs.Tab>
    ```bash copy
    bun add @mastra/client-js@latest
    ```
  </Tabs.Tab>
</Tabs>

## Initialize Mastra Client

Initialize the `MastraClient` with a `baseUrl`.

```typescript filename="lib/mastra-client.ts" showLineNumbers copy
import { MastraClient } from "@mastra/client-js";

export const mastraClient = new MastraClient({
  baseUrl: process.env.MASTRA_API_URL || "http://localhost:4111"
});
```

### Configuration options

`MastraClient` accepts optional parameters like `retries`, `backoffMs`, and `headers` to control request behavior. These are useful for tuning retries or passing custom metadata.

```typescript filename="lib/mastra-client.ts" showLineNumbers copy
import { MastraClient } from "@mastra/client-js";

export const mastraClient = new MastraClient({
  // ...
  retries: 3,
  backoffMs: 300,
  maxBackoffMs: 5000,
  headers: {
    "X-Development": "true",
  },
});
```
> See [MastraClient](../../reference/client-js/mastra-client.mdx) for more configuration options.

## Usage example

Once initialized, `MastraClient` exposes a type-safe interface for calling agents, tools, and workflows.

```typescript showLineNumbers copy
import { mastraClient } from "lib/mastra-client";

const testAgent = async () => {
  const agent = mastraClient.getAgent("testAgent");

  const response = await agent.generate({
    messages: [
      {
        role: "user",
        content: "Hello"
      }
    ]
  });

  return response.text;
};
```

## Available features

`MastraClient` exposes all resources served by the Mastra Server

- [**Agents**](/reference/client-js/agents): Create and manage AI agents, generate responses, and handle streaming interactions.
- [**Memory**](/reference/client-js/memory): Manage conversation threads and message history.
- [**Tools**](/reference/client-js/tools): Access and execute tools available to agents.
- [**Workflows**](/reference/client-js/workflows): Create and manage automated workflows.
- [**Vectors**](/reference/client-js/vectors): Handle vector operations for semantic search and similarity matching.

## Best Practices

1. **Error Handling**: Implement proper error handling for development scenarios.
2. **Environment Variables**: Use environment variables for configuration.
3. **Debugging**: Enable detailed logging when needed.

```typescript showLineNumbers copy
import { mastraClient } from "lib/mastra-client";

const testAgent = async () => {
  try {
    const agent = mastraClient.getAgent("testAgent");

    const response = await agent.generate({
      messages: [
        {
          role: "user",
          content: "Hello"
        }
      ]
    });

    return response.text;
  } catch (error) {
    return "Error occurred while generating response";
  }
};
```

## Adding request cancelling

`MastraClient` supports request cancellation using the standard Node.js `AbortSignal` API. This allows you to cancel in flight requests, useful for user-initiated aborts or cleaning up stale calls.

Pass an `AbortSignal` to the client constructor to enable cancellation across all requests.

```typescript {3,7} filename="lib/mastra-client.ts" showLineNumbers copy
import { MastraClient } from "@mastra/client-js";

export const controller = new AbortController();

export const mastraClient = new MastraClient({
  baseUrl: process.env.MASTRA_API_URL || "http://localhost:4111",
  abortSignal: controller.signal
});
```

### Using the `AbortController`

Use an `AbortController` to create and trigger an `AbortSignal`. Calling `abort()` will cancel any ongoing requests tied to that signal.

```typescript {4} showLineNumbers copy
import { mastraClient, controller } from "lib/mastra-client";

const handleAbort = () => {
  controller.abort();
};
```


## Client-side tools

The Mastra Client SDK provides comprehensive tools for interacting with your Mastra server from client-side applications. These tools are organized into several categories:

### Core APIs

- **[Agents](/reference/client-js/agents)** - Interact with AI agents, generate responses, and stream conversations
- **[Tools](/reference/client-js/tools)** - Execute server-side tools and manage tool configurations
- **[Memory](/reference/client-js/memory)** - Manage conversation threads and message history
- **[Workflows](/reference/client-js/workflows)** - Execute automated workflows and monitor their progress
- **[Vectors](/reference/client-js/vectors)** - Work with vector embeddings for semantic search

### Advanced Features

- **[Error Handling](/reference/client-js/error-handling)** - Built-in retry mechanisms and error management
- **[Logs](/reference/client-js/logs)** - Access system logs and debugging information
- **[Telemetry](/reference/client-js/telemetry)** - Monitor application performance and traces

### Client-side Tool Execution

The client SDK supports executing custom functions on the client side when agents request them:

```typescript
import { createTool } from '@mastra/core/tools';
import { z } from 'zod';

const colorChangeTool = createTool({
  id: 'changeColor',
  description: 'Changes the background color',
  inputSchema: z.object({
    color: z.string(),
  }),
  execute: async ({ context }) => {
    document.body.style.backgroundColor = context.color;
    return { success: true };
  }
});

// Use with agent generation
const response = await agent.generate({
  messages: 'Change the background to blue',
  clientTools: { colorChangeTool },
});
```

This allows you to create interactive experiences where agents can trigger client-side actions like DOM manipulation, local storage operations, or browser API calls.

## Debug

- Sometimes when using MastraClient on the server instead of the client e.g `/api/chat`,
  you might need to recreate the response to your client:

```typescript
const result = agent.stream(/* get your agent stream */);
return new Response(result.body);
```

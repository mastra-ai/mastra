---
title: "Hono Adapter | Server & DB"
description: "Hono-specific setup for Mastra server adapters."
---

# Hono Adapter

The `@mastra/hono` package provides a server adapter for running Mastra with [Hono](https://hono.dev).

For general adapter concepts (constructor options, initialization flow, etc.), see [Server Adapters](/docs/server-db/server-adapters).

## Installation

```bash copy
npm install @mastra/hono hono
```

## Basic setup

```typescript title="server.ts" copy showLineNumbers
import { Hono } from 'hono';
import { MastraServer } from '@mastra/hono';
import { mastra } from './mastra';

const app = new Hono();
const server = new MastraServer({ app, mastra });

await server.init();

export default app;
```

## Full example

```typescript title="server.ts" copy showLineNumbers
import { Hono } from 'hono';
import { MastraServer } from '@mastra/hono';
import { mastra } from './mastra';

const app = new Hono();

const server = new MastraServer({
  app,
  mastra,
  prefix: '/api/v2',
  openapiPath: '/openapi.json',
  bodyLimitOptions: {
    maxSize: 10 * 1024 * 1024, // 10MB
    onError: (err) => ({ error: 'Payload too large', maxSize: '10MB' }),
  },
  streamOptions: { redact: true },
});

await server.init();

export default app;
```

## Adding custom routes

Add routes directly to the Hono app:

```typescript copy showLineNumbers
const app = new Hono();
const server = new MastraServer({ app, mastra });

// Before init - runs before Mastra middleware
app.get('/early-health', (c) => c.json({ status: 'ok' }));

await server.init();

// After init - has access to Mastra context
app.get('/custom', (c) => {
  const mastraInstance = c.get('mastra');
  return c.json({ agents: Object.keys(mastraInstance.getAgents()) });
});
```

## Accessing context

In Hono middleware and route handlers, access Mastra context via `c.get()`:

```typescript copy
app.get('/custom', async (c) => {
  const mastra = c.get('mastra');
  const requestContext = c.get('requestContext');
  const abortSignal = c.get('abortSignal');

  const agent = mastra.getAgent('myAgent');
  return c.json({ agent: agent.name });
});
```

Available context keys:
- `mastra` - Mastra instance
- `requestContext` - Request context map
- `abortSignal` - Request cancellation signal
- `tools` - Available tools
- `user` - Authenticated user (if auth configured)

## Adding middleware

Add Hono middleware before or after `init()`:

```typescript copy showLineNumbers
const app = new Hono();

// Middleware before init
app.use('*', async (c, next) => {
  console.log(`${c.req.method} ${c.req.url}`);
  await next();
});

const server = new MastraServer({ app, mastra });
await server.init();

// Middleware after init has access to Mastra context
app.use('*', async (c, next) => {
  const mastra = c.get('mastra');
  // ...
  await next();
});
```

## Manual initialization

For custom middleware ordering:

```typescript title="server.ts" copy showLineNumbers
const app = new Hono();

app.use('*', loggingMiddleware);

const server = new MastraServer({ app, mastra });

server.registerContextMiddleware();
app.use('*', customMiddleware); // Has access to Mastra context
server.registerAuthMiddleware();
await server.registerRoutes();
```

## Related

- [Server Adapters](/docs/server-db/server-adapters) - Shared adapter concepts
- [Express Adapter](/docs/server-db/express-adapter) - Alternative adapter

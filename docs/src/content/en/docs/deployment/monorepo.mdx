---
title: "Deploy in a Monorepo | Deployment"
description: Learn how to deploy Mastra applications that are part of a monorepo setup
---

# Deploy in a Monorepo

Deploying Mastra in a monorepo follows the same approach as deploying a standalone application. While some [Cloud](/guides/v1/deployment) or [Serverless Platform](/guides/v1/deployment) providers may introduce extra requirements, the core setup is the same.

## Supported monorepos

Mastra works with:

- npm workspaces
- pnpm workspaces
- Yarn workspaces
- Turborepo

Known limitations:

- Bun workspaces - partial support; known issues
- Nx - You can use Nx's [supported dependency strategies](https://nx.dev/concepts/decisions/dependency-management) but you need to have `package.json` files inside your workspace packages

## Example monorepo

In this example, the Mastra application is located at `apps/api`.

```
apps/
├── api/
│   ├── src/
│   │   └── mastra/
│   │       ├── agents/
│   │       ├── tools/
│   │       ├── workflows/
│   │       └── index.ts
│   ├── package.json
│   └── tsconfig.json
└── web/
packages/
├── ui/
└── utils/
package.json
```

## Environment variables

Environment variables like `OPENAI_API_KEY` should be stored in an `.env` file at the root of the Mastra application `(apps/api)`, for example:

```
api/
├── src/
│   └── mastra/
├── .env
├── package.json
└── tsconfig.json
```

## Deployment configuration

The image below shows how to select `apps/api` as the project root when deploying to [Mastra Cloud](../mastra-cloud/overview). While the interface may differ between providers, the configuration remains the same.

![Deployment configuration](/img/monorepo/monorepo-mastra-cloud.jpg)


:::info
Make sure the correct package (e.g. `apps/api`) is selected as the deploy target. Selecting the wrong project root is a common deployment issue in monorepos.
:::

## Dependency management

In a monorepo, keep dependencies consistent to avoid version conflicts and build errors.

- Use a **single lockfile** at the project root so all packages resolve the same versions.
- Align versions of **shared libraries** (like Mastra or frameworks) to prevent duplicates.


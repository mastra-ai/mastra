---
title: Template Rules
description: "Technical requirements and conventions for creating Mastra templates"
---

import { FileTree, Tabs } from 'nextra/components'

# Template Rules

To ensure consistency and compatibility across all Mastra templates, follow these technical requirements and conventions when creating templates.

## Project Structure Requirements

### Core Directory Structure

All template code must be organized within the `src/mastra/` directory:

<FileTree>
  <FileTree.Folder name="template-name" defaultOpen>
    <FileTree.Folder name="src" defaultOpen>
      <FileTree.Folder name="mastra" defaultOpen>
        <FileTree.Folder name="agents">
          <FileTree.File name="example-agent.ts" />
        </FileTree.Folder>
        <FileTree.Folder name="tools">
          <FileTree.File name="custom-tool.ts" />
        </FileTree.Folder>
        <FileTree.Folder name="workflows">
          <FileTree.File name="example-workflow.ts" />
        </FileTree.Folder>
        <FileTree.File name="index.ts" />
      </FileTree.Folder>
    </FileTree.Folder>
    <FileTree.File name=".env.example" />
    <FileTree.File name="package.json" />
    <FileTree.File name="README.md" />
    <FileTree.File name="tsconfig.json" />
  </FileTree.Folder>
</FileTree>

### Mastra Code Organization

Follow these conventions within `src/mastra/`:

- **Agents** - Place all agent definitions in `src/mastra/agents/`
- **Tools** - Custom tools go in `src/mastra/tools/`
- **Workflows** - Workflow definitions belong in `src/mastra/workflows/`
- **Configuration** - Main Mastra instance configuration in `src/mastra/index.ts`

## Configuration Requirements

### TypeScript Configuration

Templates must use the default Mastra TypeScript configuration:

```json filename="tsconfig.json" copy
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "moduleResolution": "bundler",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true,
    "noEmit": true,
    "outDir": "dist"
  },
  "include": ["src/**/*"]
}
```

## Environment Configuration

### .env.example File

Every template must include a `.env.example` file listing all required environment variables.

## Code Standards

### LLM Provider

Templates should use OpenAI as the default LLM provider unless the template specifically demonstrates integration with another provider.

```typescript filename="src/mastra/agents/example-agent.ts" showLineNumbers copy
import { Agent } from '@mastra/core';
import { openai } from '@ai-sdk/openai';

const agent = new Agent({
  name: 'example-agent',
  model: openai('gpt-4'),
  // ... other configuration
});
```

## Compatibility Requirements

### Mastra Playground Compatibility

Templates must be compatible with Mastra Playground, which means:

- **No monorepos** - Templates should be single projects, not monorepos with multiple applications
- **No web frameworks** - Avoid including Next.js, Express, or other web framework boilerplate
- **Pure Mastra projects** - Focus on Mastra functionality without additional application layers
- **Mergeable code** - Structure code so it can be merged into existing projects

### Runtime Requirements

- **Node.js compatibility** - Support Node.js 18 and higher
- **ESM modules** - Use ES modules (`"type": "module"` in package.json)

## Documentation Requirements

### README.md Structure

Every template must include a comprehensive README with:

```markdown filename="README.md" copy
# Template Name

Brief description of what the template demonstrates.

## Overview

Detailed explanation of the template's functionality and use case.

## Setup

1. Copy `.env.example` to `.env` and fill in your API keys
2. Install dependencies: `npm install`
3. Run the project: `npm run dev`

## Environment Variables

- `OPENAI_API_KEY`: Your OpenAI API key. Get one at [OpenAI Platform](https://platform.openai.com/api-keys)
- `OTHER_API_KEY`: Description of what this key is for

## Usage

Instructions on how to use the template and examples of expected behavior.

## Customization

Guidelines for modifying the template for different use cases.
```

### Code Comments

Include clear comments explaining:

- Complex logic or algorithms
- API integrations and their purpose
- Configuration options and their effects
- Example usage patterns

## Testing and Quality

### Before Submission

Ensure your template:

- Runs successfully with `npm run dev`
- Includes all required files and dependencies
- Has clear, accurate documentation
- Follows all structural requirements
- Works with only the environment variables listed in `.env.example`

### Code Quality

- Use consistent formatting (Prettier recommended)
- Follow TypeScript best practices
- Implement proper error handling
- Include meaningful variable and function names

## Validation Checklist

Before submitting a template, verify:

- [ ] All code is in `src/mastra/` directory
- [ ] Uses default Mastra tsconfig
- [ ] Has comprehensive .env.example
- [ ] Includes detailed README.md
- [ ] No monorepo or web framework boilerplate
- [ ] Runs successfully after fresh install and environment variables set

Following these rules ensures your template integrates seamlessly with the Mastra ecosystem and provides a consistent experience for users.

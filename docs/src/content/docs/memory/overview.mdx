# What is Memory?

For agents, Memory is a system that manages which information the LLM can use to generate each new response. Think of it as the agent's "active awareness" - what it can consider and access when responding to you.

## The Context Window

The context window is the "window" of information visible to the language model at any given time. Anything outside this window is inaccessible to the model when generating its response.

The context window consists of several key elements organized in a specific way:

1.  **System Instructions**: Directives that guide the agent's behavior and personality.
2.  **Relevant Context / History**: Information from the ongoing conversation or retrieved data relevant to the current interaction. This often includes recent messages but can contain other contextual elements retrieved via memory features.
3.  **Current User Message**: The most recent input that the agent needs to respond to.

Each time your agent generates a response, it analyzes the entire context window and produces an appropriate response, which is then added to the message history for future interactions.

Before each interaction, memory logic determines which data should be added to the context window for the current request. The relevancy of each piece of data is determined by different memory features like semantic recall, message history, and working memory.

## Why use Memory?

With memory, your agent can:

- Maintain conversation context across multiple turns ("I mentioned my dog earlier, do you have any breed-specific training tips?")
- Recall information from past interactions ("What was that restaurant you recommended last week?")
- Remember tool calls it made and their results ("Based on the weather data I retrieved earlier...")
- Store persistent user information and preferences ("I don't like olives, don't recommend recipes with olives.")

### Example

**Without Memory:** The agent only sees the latest message.

```
➡️ User: My name is Jamie, I live in Toronto.
⬅️ Agent: Nice to meet you, Jamie!
➡️ User: What's the weather like near me?
⬅️ Agent: I don't know where you're located. Could you please share your location?
```

**With Memory:** The agent can hold a coherent conversation spanning long time periods.

```
➡️ User: My name is Jamie, I live in Toronto.
⬅️ Agent: Nice to meet you, Jamie!
➡️ User: What's the weather like near me?
⚡️ Tool: checkWeather("Toronto")
⬅️ Agent: Based on the weather data, it's currently 18°C and partly cloudy in Toronto, Jamie.
⏳ ...
⌛️ ...
➡️ User: What's the weather like today?
⚡️ Tool: checkWeather("Toronto")
⬅️ Agent: In Toronto today, it's 22°C and sunny. Looks like it's warmer than yesterday!
```

## Types of Agent Memory

Memory can be broadly categorized into two main types:

- **Short-Term Memory:** Information relevant only to the current conversation, such as recent messages. This memory provides immediate context for the agent's responses.
- **Long-Term Memory:** Information that persists across conversation sessions or is retrieved based on relevance rather than recency.

### Mastra Memory Features

Mastra provides several features to handle both types of agent memory:

- **[Conversation History & Threads](./getting-started.mdx#core-concepts-resources-and-threads)**: Manages recent turn-based interactions and conversations.
- **[Semantic Recall](./semantic-recall.mdx)**: Retrieves relevant past messages based on semantic meaning, extending beyond recent history.
- **[Working Memory](./working-memory.mdx)**: Maintains persistent, structured information (like user preferences or task state) across interactions.
- **[Memory Processors](./memory-processors.mdx)**: Enables post-processing of memory for use-cases like token limiting and tool filtering.

## Next Steps

Now that you understand the core concepts, continue to [Getting Started](./getting-started.mdx) to learn how to implement memory in your Mastra agents.

Alternatively you can visit the [configuration reference](../reference/memory/Memory.mdx) for available options, or browse [usage examples](../../examples/memory/use-chat.mdx).


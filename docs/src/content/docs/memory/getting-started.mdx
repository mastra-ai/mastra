# Getting Started with Memory

Mastra makes it simple to add memory capabilities to your agents, allowing them to recall past interactions and maintain context across multiple turns in a conversation. This guide covers the essential setup and core concepts.

## 5 Minute Quick Start

The fastest way to see memory in action is using the built-in development playground.

**1. Setup Your Project:**

If you haven't already, create a new Mastra project following the main [Getting Started guide](/docs/getting-started/installation).

Then install the memory package:

```bash npm2yarn copy
npm install @mastra/memory
```

**2. Add Memory to Your Agent:**

In `src/mastra/agents/index.ts`, create an agent and attach a `Memory` instance:

```typescript filename="src/mastra/agents/index.ts" {10}
import { Agent } from "@mastra/core/agent";
import { Memory } from "@mastra/memory";
import { openai } from "@ai-sdk/openai"; // Or your preferred LLM provider

export const myMemoryAgent = new Agent({
  name: "MemoryAgent",
  instructions: "...",
  model: openai("gpt-4o"),

  memory: new Memory(),
});
```

**3. Start the Development Server:**

```bash npm2yarn copy
npm run dev
```

**4. Use the Playground:**

Open the playground (http://localhost:4111) and select your `MemoryAgent`.

Interact with your agent. Notice how it remembers information across turns:

```
➡️ You: My favorite color is blue.
⬅️ Agent: Got it! I'll remember that your favorite color is blue.
➡️ You: What is my favorite color?
⬅️ Agent: Your favorite color is blue.
```

## Memory Threads

Mastra organizes memory into threads, which are records that identify specific conversation histories, using two identifiers:

1.  **`threadId`**: A specific conversation id (e.g., `support_123`).
2.  **`resourceId`**: The user or entity id that owns each thread (e.g., `user_123`, `org_456`).

```typescript {2,3}
const response = await myMemoryAgent.stream("Hello, my name is Alice.", {
  resourceId: "user_alice",
  threadId: "conversation_123",
});
```

**Important:** without these ID's your agent will not use memory, even if memory is properly configured. The playground handles this for you, but you need to add ID's yourself when using memory in your application.

## Conversation History

By default, the `Memory` instance includes the [last 40 messages](../reference/memory/Memory.mdx) from the current Memory thread in each new request. This provides the agent with immediate conversational context.

```ts {3}
const memory = new Memory({
  options: {
    lastMessages: 10,
  },
});
```

**Important:** Only send the newest user message in each agent call. Mastra handles retrieving and injecting the necessary history. Sending the full history yourself will cause duplication. See the [AI SDK Memory Example](../../examples/memory/use-chat.mdx) for how to handle this with when using the `useChat` frontend hooks.

## Next Steps

- **[Semantic Recall](./semantic-recall.mdx)**: Retrieve relevant messages based on meaning, not just recency.
- **[Configuration](../reference/memory/Memory.mdx)**: Full API details for `Memory` class configuration and methods.

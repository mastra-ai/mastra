---
title: "リファレンス: StepOptions | ワークフロー構築（レガシー） | Mastra ドキュメント"
description: ワークフローのステップオプションに関するドキュメント。変数のマッピング、実行条件、その他の実行時の動作を制御します。
---

# StepOptions

変数マッピング、実行条件、その他のランタイム動作を制御するワークフローの各ステップ用の設定オプション。

## 使い方

```typescript
workflow.step(processOrder, {
  variables: {
    orderId: { step: "trigger", path: "id" },
    userId: { step: "auth", path: "user.id" },
  },
  when: {
    ref: { step: "auth", path: "status" },
    query: { $eq: "認証済" },
  },
});
```


## プロパティ

<PropertiesTable
  content={[
    {
      name: "variables",
      type: "Record<string, VariableRef>",
      description: "ステップの入力変数を他のステップの値にマッピングします",
      isOptional: true,
    },
    {
      name: "when",
      type: "StepCondition",
      description: "ステップを実行するために満たす必要がある条件",
      isOptional: true,
    },
  ]}
/>

### VariableRef

<PropertiesTable
  content={[
    {
      name: "step",
      type: "string | Step | { id: string }",
      description: "変数値の取得元となるステップ",
      isOptional: false,
    },
    {
      name: "path",
      type: "string",
      description: "そのステップの出力内で値に至るパス",
      isOptional: false,
    },
  ]}
/>

## 関連項目

- [パス比較](../../docs/workflows-legacy/control-flow.mdx)
- [Step Function リファレンス](./step-function.mdx)
- [Step クラス リファレンス](./step-class.mdx)
- [Workflow クラス リファレンス](./workflow.mdx)
- [制御フローガイド](../../docs/workflows-legacy/control-flow.mdx)
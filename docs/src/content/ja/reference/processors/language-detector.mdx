---
title: "リファレンス: Language Detector | プロセッサー | Mastra ドキュメント"
description: "Mastra の LanguageDetector に関するドキュメント。言語を検出し、AI の応答内のコンテンツを翻訳できます。"
---

# LanguageDetector

`LanguageDetector` は、入力テキストの言語を判別し、必要に応じてターゲット言語へ翻訳して処理を統一するための **入力プロセッサ** です。このプロセッサは、受信メッセージの言語を検出し、ターゲット言語への自動翻訳を含む多言語コンテンツの柔軟な取り扱い戦略を提供することで、言語の一貫性を維持するのに役立ちます。

## 使い方の例

```typescript copy
import { openai } from "@ai-sdk/openai";
import { LanguageDetector } from "@mastra/core/processors";

const processor = new LanguageDetector({
  model: openai("gpt-4.1-nano"),
  targetLanguages: ["日本語", "ja"],
  threshold: 0.8,
  strategy: "translate"
});
```


## コンストラクターの引数

<PropertiesTable
  content={[
    {
      name: "options",
      type: "Options",
      description: "言語検出と翻訳のための設定オプション",
      isOptional: false,
    },
  ]}
/>

### オプション

<PropertiesTable
  content={[
    {
      name: "model",
      type: "MastraLanguageModel",
      description: "検出／翻訳エージェントのモデル設定",
      isOptional: false,
    },
    {
      name: "targetLanguages",
      type: "string[]",
      description: "プロジェクトの対象言語。異なる言語のコンテンツが検出された場合、翻訳されることがあります。言語名（'English'）または ISO コード（'en'）で指定可能",
      isOptional: true,
      default: "['English', 'en']",
    },
    {
      name: "threshold",
      type: "number",
      description: "言語検出の信頼度しきい値（0〜1）。検出信頼度がこのしきい値を上回った場合のみ処理します",
      isOptional: true,
      default: "0.7",
    },
    {
      name: "strategy",
      type: "'detect' | 'translate' | 'block' | 'warn'",
      description: "対象外の言語が検出された場合の方針：'detect' は検出のみ、'translate' は自動で対象言語へ翻訳、'block' は対象言語以外のコンテンツを拒否、'warn' は警告をログに記録して通過させます",
      isOptional: true,
      default: "'detect'",
    },
    {
      name: "preserveOriginal",
      type: "boolean",
      description: "元のコンテンツをメッセージのメタデータに保持するかどうか。監査やデバッグに有用です",
      isOptional: true,
      default: "true",
    },
    {
      name: "instructions",
      type: "string",
      description: "エージェント向けのカスタム検出指示。未指定の場合はデフォルトの指示を使用します",
      isOptional: true,
      default: "undefined",
    },
    {
      name: "minTextLength",
      type: "number",
      description: "検出を実行する最小テキスト長。短いテキストは言語検出の信頼性が低いことがよくあります",
      isOptional: true,
      default: "10",
    },
    {
      name: "includeDetectionDetails",
      type: "boolean",
      description: "ログに詳細な検出情報を含めるかどうか",
      isOptional: true,
      default: "false",
    },
    {
      name: "translationQuality",
      type: "'speed' | 'quality' | 'balanced'",
      description: "翻訳品質の優先度：'speed' は高速重視、'quality' は精度重視、'balanced' は速度と品質のバランス重視",
      isOptional: true,
      default: "'quality'",
    },
  ]}
/>

## 戻り値

<PropertiesTable
  content={[
    {
      name: "name",
      type: "string",
      description: "プロセッサ名は 'language-detector' に設定されます",
      isOptional: false,
    },
    {
      name: "processInput",
      type: "(args: { messages: MastraMessageV2[]; abort: (reason?: string) => never; tracingContext?: TracingContext }) => Promise<MastraMessageV2[]>",
      description: "入力メッセージを処理して言語を検出し、必要に応じて LLM へ送信する前にコンテンツを翻訳します",
      isOptional: false,
    },
  ]}
/>

## 拡張された使用例

```typescript filename="src/mastra/agents/multilingual-agent.ts" showLineNumbers copy
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";
import { LanguageDetector } from "@mastra/core/processors";

export const agent = new Agent({
  name: "multilingual-agent",
  instructions: "あなたは親切なアシスタントです",
  model: openai("gpt-4o-mini"),
  inputProcessors: [
    new LanguageDetector({
      model: openai("gpt-4.1-nano"),
      targetLanguages: ["English", "en"],
      threshold: 0.8,
      strategy: "translate",
      preserveOriginal: true,
      instructions: "言語を検出し、元の意図を保持しながら英語以外のコンテンツを英語に翻訳します",
      minTextLength: 10,
      includeDetectionDetails: true,
      translationQuality: "quality"
    })
  ]
});
```


## 関連項目

- [入力プロセッサー](/docs/agents/input-processors)
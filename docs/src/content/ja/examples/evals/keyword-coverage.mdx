---
title: "例：キーワードカバレッジ | Evals | Mastra Docs"
description: 入力テキストの重要なキーワードがどの程度カバーされているかを評価するために、キーワードカバレッジ指標を用いる例。
---

import { GithubLink } from "@/components/github-link";
import { ScorerCallout } from '@/components/scorer-callout'


# キーワード網羅度の評価

<ScorerCallout />

`KeywordCoverageMetric` を使用して、コンテキストの必須キーワードやフレーズが回答にどれだけ正確に含まれているかを評価します。このメトリックは `query` と `response` を受け取り、スコアと、キーワード一致の統計を含む `info` オブジェクトを返します。

## インストール

```bash copy
npm install @mastra/evals
```


## 完全網羅の例

この例では、応答が入力の重要な用語を余すところなく反映しています。必要なキーワードがすべて含まれており、欠落のない完全な網羅性が得られます。

```typescript filename="src/example-full-keyword-coverage.ts" showLineNumbers copy
import { KeywordCoverageMetric } from "@mastra/evals/nlp";

const metric = new KeywordCoverageMetric();

const query = "React や Vue などの JavaScript フレームワーク。"
const response = "一般的な JavaScript フレームワークとして、Web 開発向けの React や Vue が挙げられます"

const result = await metric.measure(query, response);

console.log(result);
```


### フルカバレッジの出力

スコアが1の場合、想定されたすべてのキーワードが応答内で見つかったことを示します。`info` フィールドは、一致したキーワード数が入力から抽出された総数と同じであることを示します。

```typescript
{
  score: 1,
  info: {
    totalKeywords: 4,
    matchedKeywords: 4
  }
}
```


## 部分的なカバー範囲の例

この例では、応答に入力の重要なキーワードの一部は含まれているものの、すべては含まれていません。スコアは部分的なカバー範囲を反映しており、主要な用語が欠落しているか、または一部しか一致していないことを示します。

```typescript filename="src/example-partial-keyword-coverage.ts" showLineNumbers copy
import { KeywordCoverageMetric } from "@mastra/evals/nlp";

const metric = new KeywordCoverageMetric();

const query = "TypeScript にはインターフェース、ジェネリクス、型推論があります。";
const response = "TypeScript には型推論といくつかの高度な機能があります";

const result = await metric.measure(query, response);

console.log(result);
```


### 部分的なカバレッジの出力

スコアが 0.5 の場合、期待されるキーワードのうち半分しかレスポンス内で見つからなかったことを示します。`info` フィールドには、入力で特定された総数に対して、いくつの用語が一致したかが示されます。

```typescript
{
  score: 0.5,
  info: {
    totalKeywords: 6,
    matchedKeywords: 3
  }
}
```


## 網羅性が最小の例

この例では、応答には入力の重要なキーワードがほとんど含まれていません。スコアは網羅性の低さを反映しており、主要な用語の多くが欠落しているか考慮されていません。

```typescript filename="src/example-minimal-keyword-coverage.ts" showLineNumbers copy
import { KeywordCoverageMetric } from "@mastra/evals/nlp";

const metric = new KeywordCoverageMetric();

const query = "機械学習モデルにはデータ前処理、特徴量エンジニアリング、ハイパーパラメータ調整が必要です";
const response = "データ準備はモデルにとって重要です";

const result = await metric.measure(query, response);

console.log(result);
```


### カバレッジが最小の出力

スコアが低い場合、期待されるキーワードのうちごく一部しか応答に含まれていないことを示します。`info` フィールドは、総キーワード数と一致したキーワード数の差を示し、カバレッジ不足を明確にします。

```typescript
{
  score: 0.2,
  info: {
    totalKeywords: 10,
    matchedKeywords: 2
  }
}
```


## メトリクスの設定

`KeywordCoverageMetric` インスタンスは既定の設定で作成できます。追加の設定は不要です。

```typescript
const metric = new KeywordCoverageMetric();
```

> 設定オプションの全一覧は、[KeywordCoverageMetric](/reference/evals/keyword-coverage.mdx)を参照してください。


## 結果の理解

`KeywordCoverageMetric` は次の形の結果を返します：

```typescript
{
  score: 数値,
  info: {
    totalKeywords: 数値,
    matchedKeywords: 数値
  }
}
```


## キーワードカバレッジスコア

0～1 の範囲のカバレッジスコア:

- **1.0**: カバー率100% – すべてのキーワードを含む。
- **0.7–0.9**: 高いカバー率 – ほとんどのキーワードを含む。
- **0.4–0.6**: 部分的なカバー – いくつかのキーワードを含む。
- **0.1–0.3**: 低いカバー – 一致するキーワードが少ない。
- **0.0**: カバーなし – キーワードが見つからない。

## キーワードカバレッジ情報

次の詳細な統計を含みます：

- 入力に含まれるキーワードの総数
- 一致したキーワードの数
- カバレッジ率の算出
- 専門用語の扱い

<GithubLink
  outdated={true}
  marginTop='mt-16'
  link="https://github.com/mastra-ai/mastra/blob/main/examples/basics/evals/keyword-coverage"
/>
---
title: "Cloudflare Deployer"
description: "Mastra CloudflareDeployer を使って Mastra アプリケーションを Cloudflare にデプロイする方法を学ぶ"
---

import { FileTree } from "nextra/components";


# CloudflareDeployer

`CloudflareDeployer` クラスは、スタンドアロンの Mastra アプリケーションを Cloudflare Workers にデプロイします。設定やデプロイの管理を行い、Cloudflare 固有の機能を備えてベースの [Deployer](/reference/deployer/deployer) クラスを拡張します。

## インストール

```bash copy
npm install @mastra/deployer-cloudflare@latest
```


## 使い方の例

```typescript filename="src/mastra/index.ts" showLineNumbers copy
import { Mastra } from "@mastra/core/mastra";
import { CloudflareDeployer } from "@mastra/deployer-cloudflare";

export const mastra = new Mastra({
  // ...
  deployer: new CloudflareDeployer({
    projectName: "hello-mastra",
    env: {
      NODE_ENV: "production",
    },
  }),
});
```

> 利用可能なすべての設定オプションについては、[CloudflareDeployer](/reference/deployer/cloudflare) の API リファレンスをご覧ください。


## 手動デプロイ

[Cloudflare Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/) を使えば、手動デプロイも可能です。Wrangler CLI をインストールしたら、プロジェクトのルートディレクトリで以下を実行してアプリケーションをデプロイします。

Wrangler CLI をインストールしたら、Cloudflare アカウントでログインして認証します:

```bash copy
npx wrangler login
```

次を実行して、アプリケーションをビルドして Cloudflare にデプロイします

```bash copy
npm run build && wrangler deploy --config .mastra/output/wrangler.json
```

> プロジェクトのルートで `wrangler dev --config .mastra/output/wrangler.json` を実行すると、Mastra アプリをローカルでテストすることもできます。


## ビルド出力

`CloudflareDeployer` を使用する Mastra アプリケーションのビルド出力には、プロジェクト内のすべてのエージェント、ツール、ワークフローに加え、Cloudflare 上でアプリケーションを実行するために必要な Mastra 固有のファイルが含まれます。

<FileTree>
  <FileTree.Folder name=".mastra" defaultOpen>
    <FileTree.Folder name="output" defaultOpen>
      <FileTree.File name="index.mjs" />

      <FileTree.File name="wrangler.json" />
    </FileTree.Folder>
  </FileTree.Folder>

  <FileTree.File name="package.json" />
</FileTree>

`CloudflareDeployer` は、`.mastra/output` に以下の設定を含む `wrangler.json` 構成ファイルを自動生成します。

```json
{
  "name": "hello-mastra",
  "main": "./index.mjs",
  "compatibility_date": "2025-04-01",
  "compatibility_flags": ["nodejs_compat", "nodejs_compat_populate_process_env"],
  "observability": { "logs": { "enabled": true } },
  "vars": {
    "OPENAI_API_KEY": "...",
    "CLOUDFLARE_API_TOKEN": "..."
  }
}

```


## 次のステップ

- [Mastra クライアント SDK](/docs/client-js/overview)
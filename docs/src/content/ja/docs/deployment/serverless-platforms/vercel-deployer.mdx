---
title: "Vercel デプロイヤー"
description: "Mastra VercelDeployer を使って Mastra アプリケーションを Vercel にデプロイする方法を学ぶ"
---

import { FileTree } from "nextra/components";


# VercelDeployer

`VercelDeployer` クラスは、スタンドアロンの Mastra アプリケーションを Vercel にデプロイするためのクラスです。設定やデプロイを管理し、Vercel 固有の機能を追加してベースの [Deployer](/reference/deployer/deployer) クラスを拡張します。

## インストール

```bash copy
npm install @mastra/deployer-vercel@latest
```


## 使い方の例

```typescript filename="src/mastra/index.ts" showLineNumbers copy
import { Mastra } from "@mastra/core/mastra";
import { VercelDeployer } from "@mastra/deployer-vercel";

export const mastra = new Mastra({
  // 省略
  deployer: new VercelDeployer()
});
```

> 利用可能な設定オプションの一覧は [VercelDeployer](/reference/deployer/vercel) の API リファレンスをご覧ください。


### 任意のオーバーライド

Vercel デプロイヤーは、Vercel Output API の関数設定（`.vc-config.json`）に、重要な設定をいくつか書き込むことができます：

* `maxDuration?: number` — 関数の実行タイムアウト（秒）
* `memory?: number` — 関数のメモリ割り当て（MB）
* `regions?: string[]` — リージョン（例：`['sfo1','iad1']`）

例：

```ts filename="src/mastra/index.ts" showLineNumbers copy
deployer: new VercelDeployer({
  maxDuration: 600,
  memory: 1536,
  regions: ["sfo1", "iad1"],
})
```


## 継続的インテグレーション

Mastra プロジェクトの Git リポジトリを Vercel に接続したら、プロジェクト設定を更新します。Vercel ダッシュボードで **Settings** > **Build and Deployment** に進み、**Framework settings** の項目で次のように設定します:

- **Build command**: `npm run build`（任意）

### 環境変数

初回のデプロイ前に、アプリケーションで使用する環境変数を追加してください。たとえば、LLM に OpenAI を使用している場合は、Vercel のプロジェクト設定で `OPENAI_API_KEY` を設定する必要があります。

> 詳細は [Environment variables](https://vercel.com/docs/environment-variables) をご覧ください。

これで、GitHub リポジトリの指定ブランチにプッシュするたびに自動デプロイが実行されるようにプロジェクトが設定されました。

## 手動デプロイ

[Vercel CLI](https://vercel.com/docs/cli) を使用して手動でデプロイすることもできます。Vercel CLI をインストールしたら、プロジェクトのルートで次を実行してアプリケーションをデプロイしてください。

```bash copy
npm run build && vercel --prod --prebuilt --archive=tgz
```

> プロジェクトのルートで `vercel dev` を実行すると、Mastra アプリをローカルでテストできます。


## ビルド出力

`VercelDeployer` を使用する Mastra アプリケーションのビルド出力には、プロジェクト内のすべてのエージェント、ツール、ワークフローに加え、Vercel 上でアプリケーションを実行するために必要な Mastra 固有のファイルが含まれます。

<FileTree>
  <FileTree.Folder name=".vercel" defaultOpen>
    <FileTree.Folder name="output" defaultOpen>
      <FileTree.Folder name="functions" defaultOpen>
        <FileTree.Folder name="index.func" defaultOpen>
          <FileTree.File name="index.mjs" />
        </FileTree.Folder>
      </FileTree.Folder>

      <FileTree.File name="config.json" />
    </FileTree.Folder>
  </FileTree.Folder>

  <FileTree.File name="package.json" />
</FileTree>

`VercelDeployer` は、`.vercel/output` に以下の設定を含む `config.json` 設定ファイルを自動生成します。

```json
{
  "version": 3,
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/"
    }
  ]
}
```


## 次のステップ

- [Mastra クライアント SDK](/docs/client-js/overview)
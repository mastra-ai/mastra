---
title: "Amazon EC2"
description: "Mastra アプリケーションを Amazon EC2 へデプロイする。"
---

import { Callout, Steps, Tabs } from "nextra/components";


# Amazon EC2

Mastra アプリケーションを Amazon EC2（Elastic Compute Cloud）にデプロイします。

<Callout>
  このガイドは、デフォルトの
  `npx create-mastra@latest` コマンドで Mastra アプリケーションを作成していることを前提としています。
  新しい Mastra アプリケーションの作成方法については、
  [クイックスタートガイド](/docs/getting-started/installation)を参照してください。
</Callout>

## 前提条件

- [EC2](https://aws.amazon.com/ec2/) にアクセス可能な AWS アカウント
- Ubuntu 24 以降または Amazon Linux を実行している EC2 インスタンス
- インスタンスを指す A レコードを設定したドメイン名
- リバースプロキシの設定（例: [nginx](https://nginx.org/) の利用）
- SSL 証明書の設定（例: [Let's Encrypt](https://letsencrypt.org/) の利用）
- インスタンスに Node.js 18 以降がインストール済み

## デプロイ手順

<Steps>

### Mastra アプリケーションをクローンする

EC2 インスタンスに接続し、リポジトリをクローンします:

<Tabs items={["Public Repository", "Private Repository"]}>
<Tabs.Tab>

```bash copy
git clone https://github.com/<your-username>/<your-repository>.git
```

</Tabs.Tab>

<Tabs.Tab>

```bash copy
git clone https://<your-username>:<your-personal-access-token>@github.com/<your-username>/<your-repository>.git
```

</Tabs.Tab>
</Tabs>

リポジトリのディレクトリへ移動します:

```bash copy
cd "<your-repository>"
```

### 依存関係をインストールする

```bash copy
npm install
```

### 環境変数を設定する

`.env` ファイルを作成し、環境変数を追加します:

```bash copy
touch .env
```

`.env` ファイルを編集し、環境変数を追加します:

```bash copy
OPENAI_API_KEY=<your-openai-api-key>
# 必要な他の環境変数を追加
```

### アプリケーションをビルドする

```bash copy
npm run build
```

### アプリケーションを実行する

```bash copy
node --import=./.mastra/output/instrumentation.mjs --env-file=".env" .mastra/output/index.mjs
```

<Callout>
Mastra アプリケーションはデフォルトでポート 4111 で動作します。リバースプロキシがこのポートへリクエストを転送するよう設定されていることを確認してください。
</Callout>

</Steps>

## Mastra サーバーに接続する

クライアントアプリケーションから `@mastra/client-js` パッケージの `MastraClient` を使って Mastra サーバーに接続できます。

詳しくは [`MastraClient` のドキュメント](/docs/client-js/overview)をご覧ください。

```typescript copy showLineNumbers
import { MastraClient } from "@mastra/client-js";

const mastraClient = new MastraClient({
  baseUrl: "https://<あなたのドメイン>",
});
```


## 次の手順

- [Mastra クライアント SDK](/docs/client-js/overview)
---
title: "Mastra のインストール | はじめに | Mastra ドキュメント"
description: さまざまな LLM プロバイダーで動作させるために必要な前提条件の設定と、Mastra のインストール手順のガイド。
---

import { Callout, Steps } from "nextra/components";
import { Tabs, Tab } from "@/components/tabs";
import { VideoPlayer } from "@/components/video-player"


# Mastra のインストール

`create mastra` CLI コマンドは、新しい Mastra プロジェクトを開始する最も手早い方法です。セットアップを対話形式で案内し、学習やカスタマイズに使えるサンプルのエージェント、ワークフロー、ツールを作成します。

セットアップをより細かく制御したい場合や、既存プロジェクトに Mastra を追加する場合は、[手動インストールガイド](#install-manually)をご覧ください。既存のプロジェクトには [`mastra init`](/reference/cli/mastra#mastra-init) も利用できます。

## 始める前に

- セットアップを完了するには、[モデルプロバイダー](/models)の API キーが必要です。まずは [OpenAI](https://platform.openai.com/api-keys) の利用をおすすめしますが、クレジットカード不要のプロバイダーが必要な場合は、Google の [Gemini](https://aistudio.google.com/app/api-keys) も選択肢です。
- Node.js 20 以降を[インストール](https://nodejs.org/en/download)してください。

## `create mastra` でインストール

`create mastra` は、マシン上のどこからでも実行できます。

セットアップウィザードが案内し、プロジェクト用の新しいディレクトリを作成し、サンプルのワークフローとツールを備えた天気エージェントを生成して、すぐに始められるようにします。

{/*
LLM CONTEXT: この Tabs コンポーネントは、新しい Mastra プロジェクトを作成するための各パッケージマネージャー用のコマンドを表示します。
各タブには、そのパッケージマネージャー（npx、npm、yarn、pnpm、bun）に対応する同等のコマンドが表示されます。
これにより、同じインストール手順に従いながら、ユーザーは好みのパッケージマネージャーを選べます。
すべてのコマンドは同じ結果—対話的セットアップで新しい Mastra プロジェクトを作成—を実現します。
*/}

<Tabs items={["npm", "pnpm", "yarn", "bun"]}>
  <Tab>
    ```bash copy
    npm create mastra@latest -y
    ```
  </Tab>
  <Tab>
    ```bash copy
    pnpm create mastra@latest -y
    ```
  </Tab>
  <Tab>
    ```bash copy
    yarn create mastra@latest -y
    ```
  </Tab>
  <Tab>
    ```bash copy
    bun create mastra@latest -y
    ```
  </Tab>
</Tabs>

<Callout type="default">
`create mastra` では、`--no-example` でサンプルの天気エージェントをスキップしたり、`--template` で特定の[テンプレート](/templates)から開始したりできます。すべてのオプションは [CLI リファレンス](/reference/cli/create-mastra)をご覧ください。
</Callout>

### エージェントをテストする

セットアップが完了したら、ターミナルの指示に従って Mastra の開発サーバーを起動し、http://localhost:4111 で Playground を開いてください。

天気について質問してみましょう。API キーが正しく設定されていれば、応答が返ってきます。

<VideoPlayer
  src="https://res.cloudinary.com/mastra-assets/video/upload/v1751406022/local-dev-agents-playground_100_m3begx.mp4"
/>

<Callout type="default">
エラーが発生した場合は、API キーの設定が正しくない可能性があります。セットアップを再確認して、もう一度お試しください。さらにサポートが必要ですか？[Discord に参加](https://discord.gg/BTYqqHKUrf)して、チームに直接ご相談ください。
</Callout>

[Playground](/docs/server-db/local-dev-playground) を使うと、UI を作らずにエージェントを素早く構築・試作できます。準備ができたら、以下のガイドに従って Mastra エージェントをアプリケーションに統合してください。

### 次のステップ

- [Mastra の機能](/docs#why-mastra)について詳しく読む
- フロントエンドフレームワークと Mastra を連携する: [Next.js](/docs/frameworks/web-frameworks/next-js)、[React](/docs/frameworks/web-frameworks/vite-react)、または [Astro](/docs/frameworks/web-frameworks/astro)
- [ガイド](/guides)に沿って、ゼロからエージェントを作成する
- [YouTube チャンネル](https://www.youtube.com/@mastra-ai)でコンセプトガイドを視聴し、[チャンネル登録](https://www.youtube.com/@mastra-ai?sub_confirmation=1)する

## 手動でインストール

自動の `create mastra` CLI ツールを使用したくない場合は、以下のガイドに従って手動でプロジェクトをセットアップできます。

<Steps>
  ### プロジェクトを作成

  新しいプロジェクトを作成してディレクトリを移動します:

  ```bash copy
  mkdir my-first-agent && cd my-first-agent
  ```

  TypeScriptプロジェクトを初期化し、以下の依存関係をインストールします：

  {/*
    LLM コンテキスト: この Tabs コンポーネントは、各種パッケージマネージャー向けの手動インストール用コマンドを表示します。
    各タブには、そのパッケージマネージャーでのプロジェクトの初期化、開発用依存関係のインストール、Mastra のコアパッケージのインストールまでを含む
    一連のセットアップ手順が完全な形で示されます。
    これにより、ユーザーは好みのパッケージマネージャーで Mastra プロジェクトを手動でセットアップできます。
    */}

  <Tabs items={["npm", "pnpm", "yarn", "bun"]}>
    <Tab>
      ```bash copy
      # 初期化
      npm init -y
      # 開発用依存関係を追加
      npm install -D typescript @types/node mastra@latest
      # 依存関係を追加
      npm install @mastra/core@latest zod@^4
      ```
    </Tab>

    <Tab>
      ```bash copy
      # 初期化
      pnpm init -y
      # 開発用依存関係を追加
      pnpm add -D typescript @types/node mastra@latest
      # 依存関係を追加
      pnpm add @mastra/core@latest zod@^4
      ```
    </Tab>

    <Tab>
      ```bash copy
      # 初期化
      yarn init -y
      # 開発用依存関係を追加
      yarn add -D typescript @types/node mastra@latest
      # 依存関係を追加
      yarn add @mastra/core@latest zod@^4
      ```
    </Tab>

    <Tab>
      ```bash copy
      # 初期化
      bun init -y
      # 開発用依存関係を追加
      bun add -d typescript @types/node mastra@latest
      # 依存関係を追加
      bun add @mastra/core@latest zod@^4
      ```
    </Tab>
  </Tabs>

  `package.json` ファイルに `dev` と `build` スクリプトを追加します:

  ```json filename="package.json" copy /,/ /"dev": "mastra dev",/ /"build": "mastra build"/
  {
    "scripts": {
      "test": "echo \"エラー: テストが指定されていません\" && exit 1",
      "dev": "mastra dev",
      "build": "mastra build"
    }
  }
  ```

  ### TypeScriptを初期化する

  `tsconfig.json` ファイルを作成します:

  ```bash copy
  touch tsconfig.json
  ```

  以下の設定を追加します:

  ```json filename="tsconfig.json" copy
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "ES2022",
      "moduleResolution": "bundler",
      "esModuleInterop": true,
      "forceConsistentCasingInFileNames": true,
      "strict": true,
      "skipLibCheck": true,
      "noEmit": true,
      "outDir": "dist"
    },
    "include": [
      "src/**/*"
    ]
  }
  ```

  <Callout type="info">
    Mastra を使用するには、`module` と `moduleResolution` をモダンな設定にする必要があります。`CommonJS` や `node` を使用すると解決エラーが発生します。
  </Callout>

  ### APIキーを設定する

  `.env`ファイルを作成します:

  ```bash copy
  touch .env
  ```

  APIキーを追加:

  ```bash filename=".env" copy
  GOOGLE_GENERATIVE_AI_API_KEY=<your-api-key>
  ```

  <Callout type="default">
    このガイドでは Google Gemini を使用しますが、OpenAI や Anthropic などを含むサポート対象の[モデルプロバイダー](/models)であれば、どれでも使用できます。
  </Callout>

  ### ツールを追加

  `weather-tool.ts` ファイルを作成します:

  ```bash copy
  mkdir -p src/mastra/tools && touch src/mastra/tools/weather-tool.ts
  ```

  以下のコードを追加します:

  ```ts filename="src/mastra/tools/weather-tool.ts" showLineNumbers copy
  import { createTool } from "@mastra/core/tools";
  import { z } from "zod";

  export const weatherTool = createTool({
    id: "get-weather",
    description: "指定された場所の現在の天気を取得",
    inputSchema: z.object({
      location: z.string().describe("都市名")
    }),
    outputSchema: z.object({
      output: z.string()
    }),
    execute: async () => {
      return {
        output: "晴れです"
      };
    }
  });
  ```

  <Callout type="info">
    ここでは `weatherTool` の例を短く、わかりやすくしました。完全版の天気ツールは [Giving an Agent a Tool](/examples/agents/using-a-tool) にあります。
  </Callout>

  ### エージェントを追加

  `weather-agent.ts` ファイルを作成します:

  ```bash copy
  mkdir -p src/mastra/agents && touch src/mastra/agents/weather-agent.ts
  ```

  以下のコードを追加します:

  ```ts filename="src/mastra/agents/weather-agent.ts" showLineNumbers copy
  import { Agent } from "@mastra/core/agent";
  import { weatherTool } from "../tools/weather-tool";

  export const weatherAgent = new Agent({
    name: 'Weather Agent',
    instructions: `
        あなたは正確な気象情報を提供する親切な天気アシスタントです。

        あなたの主な役割は、ユーザーが特定の場所の天気情報を取得できるよう支援することです。応答する際は以下に従ってください:
        - 場所が指定されていない場合は、必ず場所を尋ねてください
        - 場所の名前が英語でない場合は、英語に翻訳してください
        - 複数の部分で構成される場所を指定する場合(例:「New York, NY」)、最も関連性の高い部分を使用してください(例:「New York」)
        - 湿度、風の状態、降水量などの関連情報を含めてください
        - 応答は簡潔かつ有益なものにしてください

        現在の気象データの取得にはweatherToolを使用してください。
  `,
    model: "google/gemini-2.5-pro",
    tools: { weatherTool }
  });
  ```

  ### エージェントを登録

  Mastraのエントリーポイントを作成し、エージェントを登録します:

  ```bash copy
  touch src/mastra/index.ts
  ```

  以下のコードを追加します:

  ```ts filename="src/mastra/index.ts" showLineNumbers copy
  import { Mastra } from "@mastra/core/mastra";
  import { weatherAgent } from "./agents/weather-agent";

  export const mastra = new Mastra({
    agents: { weatherAgent }
  });
  ```

  ### エージェントをテストする

  [Playground](/docs/server-db/local-dev-playground)を起動して、エージェントをテストできます。

  <Tabs items={["npm", "pnpm", "yarn", "bun"]}>
    <Tab>
      ```bash copy
      npm run dev
      ```
    </Tab>

    <Tab>
      ```bash copy
      pnpm run dev
      ```
    </Tab>

    <Tab>
      ```bash copy
      yarn run dev
      ```
    </Tab>

    <Tab>
      ```bash copy
      bun run dev
      ```
    </Tab>
  </Tabs>
</Steps>
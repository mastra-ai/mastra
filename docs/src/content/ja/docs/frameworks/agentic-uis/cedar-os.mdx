---
title: "Cedar-OS 連携"
description: "Mastra エージェント向けに Cedar-OS で AIネイティブなフロントエンドを構築する"
---

import { Tabs, Steps } from "nextra/components";


# Mastra と Cedar-OS を統合する

Cedar-OS は、最先端の AI ネイティブアプリケーションの構築に特化して設計された、オープンソースのエージェント指向 UI フレームワークです。Cedar は Mastra を念頭に置いて構築されています。

## Cedar を使うべき？

Cedar には特に重視している核心的なポイントがいくつかあります。詳しくは[こちら](https://docs.cedarcopilot.com/introduction/philosophy)をご覧ください。

#### 1. 開発者体験

- **各コンポーネントを shadcn 方式で個別に取得** – コードはすべてあなたのもの。自由にスタイルを変更できます
- **セットアップ不要ですぐ動く** – チャットコンポーネントを挿入するだけで動作します
- **完全に拡張可能** - 完全にカスタマイズ可能な [Zustand ストアアーキテクチャ](https://docs.cedarcopilot.com/introduction/architecture) 上に構築されており、内部のあらゆる関数を1行で上書きできます。

#### 2. 真にAIネイティブなアプリケーションの実現

史上初めて、プロダクトに「生命」を吹き込める時代になりました。Cedarは、生命感のあるプロダクトづくりを支援します。

- **[Spells](https://docs.cedarcopilot.com/spells/spells#what-are-spells)** - ユーザーはキーボードショートカット、マウスイベント、テキスト選択などからAIを起動できます
- **[State Diff Management](https://docs.cedarcopilot.com/state-diff/using-state-diff)** - エージェントの出力を受け入れるか拒否するかをユーザーが選択可能
- **[Voice Integration](https://docs.cedarcopilot.com/voice/voice-integration)** - ユーザーが音声でアプリを操作可能

## クイックスタート

<Steps>
### プロジェクトのセットアップ

Cedar の CLI コマンドを実行します:
``` bash
npx cedar-os-cli plant-seed
```

ゼロから始める場合は、フロントエンドとバックエンドを含むモノレポ構成の完全なセットアップのために、**Mastra starter** テンプレートを選択してください。

すでに Mastra のバックエンドがある場合は、代わりに **blank frontend cedar repo** オプションを使用してください。
- これにより、Cedar のコンポーネントや依存関係一式をダウンロードするオプションが有効になります。まずはチャットコンポーネントのいずれかを少なくとも 1 つダウンロードすることをおすすめします。 
</Steps>

### アプリを CedarCopilot でラップする

CedarCopilot プロバイダーでアプリケーションをラップし、Mastra バックエンドに接続します:

```tsx
import { CedarCopilot } from 'cedar-os';

function App() {
	return (
		<CedarCopilot
			llmProvider={{
				provider: 'mastra',
				baseURL: 'http://localhost:4111', // Mastra のデフォルト開発ポート
				apiKey: process.env.NEXT_PUBLIC_MASTRA_API_KEY, // 任意 — バックエンド認証にのみ使用
			}}>
			<YourApp />
		</CedarCopilot>
	);
}
```

### Mastra のエンドポイントを設定する

[Mastra Configuration Options](https://docs.cedarcopilot.com/agent-backend-connection/agent-backend-connection#mastra-configuration-options) に従って、Cedar と連携するように Mastra バックエンドを設定します。

Mastra サーバー（モノレポの場合は NextJS のサーバーレスルート）で [API ルートを登録](https://mastra.ai/en/examples/deployment/custom-api-route) します:

```ts mastra/src/index.ts
import { registerApiRoute } from '@mastra/core/server';

// POST /chat
// チャットの非ストリーミング用デフォルトエンドポイント
registerApiRoute('/chat', {
	method: 'POST',
	// …zod で入力を検証
	handler: async (c) => {
		/* your agent.generate() logic */
	},
});

// POST /chat/stream (SSE)
// チャットのストリーミング用デフォルトエンドポイント
registerApiRoute('/chat/stream', {
	method: 'POST',
	handler: async (c) => {
		/* SSE 形式でエージェント出力をストリーミング */
	},
});
```

### Cedar コンポーネントを追加する

Cedar コンポーネントをフロントエンドに追加します。詳細は [Chat Overview](https://docs.cedarcopilot.com/chat/chat-overview) を参照してください。

これでバックエンドとフロントエンドが接続されました。Mastra エージェントを使って AI ネイティブな体験の構築を始めましょう。

## 詳細情報

- 追加の設定オプション（問題が発生した場合の手動インストール手順を含む）については、[Mastra 連携の詳細ガイド](https://docs.cedarcopilot.com/agent-backend-connection/mastra#extending-mastra)をご覧ください
- Cedar が提供する Mastra 向けの最適化と機能をご確認ください
  - **シームレスなイベントストリーミング** - [Mastra のストリーミングイベント](https://docs.cedarcopilot.com/chat/custom-message-rendering#mastra-event-renderer)を自動レンダリング
  - **音声エンドポイント対応** - 組み込みの[音声バックエンド統合](https://docs.cedarcopilot.com/voice/agentic-backend#endpoint-configuration)
  - **エンドツーエンドの型安全性** - アプリと Mastra バックエンド間の通信を対象とした[型定義](https://docs.cedarcopilot.com/type-safety/typing-agent-requests)
- [Discord に参加しよう！](https://discord.gg/4AWawRjNdZ) Cedar チームは皆さんにお会いできるのを楽しみにしています :)
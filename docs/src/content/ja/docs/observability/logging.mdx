---
title: "ログ記録 | Mastra Observability ドキュメント"
description: Mastra のログ記録を使って実行を監視し、アプリケーションの動作を記録し、AI アプリケーションの精度を向上させる方法を学びましょう。
---

# ログ記録

Mastra のログ記録システムは、関数の実行、入力データ、出力レスポンスを構造化された形式で記録します。

Mastra Cloud にデプロイした場合、ログは [Logs](../mastra-cloud/observability.mdx) ページに表示されます。セルフホストやカスタム環境では、設定したトランスポートに応じて、ログをファイルや外部サービスに出力できます。

## PinoLogger

CLI を使って[新しい Mastra プロジェクトを初期化](../getting-started/installation.mdx)すると、`PinoLogger` はデフォルトで含まれます。

```typescript filename="src/mastra/index.ts" showLineNumbers copy
import { Mastra } from '@mastra/core/mastra';
import { PinoLogger } from '@mastra/loggers';

export const mastra = new Mastra({
  // ...
  logger: new PinoLogger({
    name: 'Mastra',
    level: 'info',
  }),
});
```

> すべての設定オプションについては、[PinoLogger](../../reference/observability/logger.mdx) の API リファレンスを参照してください。


## ワークフローやツールからのロギング

Mastra では、ワークフローの各ステップやツール内で利用できる `mastra.getLogger()` メソッドを通じて、ロガーインスタンスにアクセスできます。ロガーは標準的な重要度レベルである `debug`、`info`、`warn`、`error` をサポートします。

### ワークフローのステップからのロギング

ワークフローのステップ内では、`execute` 関数の `mastra` パラメーターを通じてロガーにアクセスできます。これにより、そのステップの実行に関するメッセージを記録できます。

```typescript {8-9} filename="src/mastra/workflows/test-workflow.ts" showLineNumbers copy
import { createWorkflow, createStep } from "@mastra/core/workflows";
import { z } from "zod";

const step1 = createStep({
  //...
  execute: async ({ mastra }) => {

    const logger = mastra.getLogger();
    logger.info("ワークフローの情報ログ");

    return {
      output: ""
    };
  }
});

export const testWorkflow = createWorkflow({...})
  .then(step1)
  .commit();
```


### ツールからのロギング

同様に、ツールは `mastra` パラメータ経由でロガーインスタンスにアクセスできます。これを使って、実行中のツール固有の処理をログに記録します。

```typescript {8-9} filename="src/mastra/tools/test-tool.ts" showLineNumbers copy
import { createTool } from "@mastra/core/tools";
import { z } from "zod";

export const testTool = createTool({
  // ...
  execute: async ({ mastra }) => {

    const logger = mastra?.getLogger();
    logger?.info("ツール情報のログ");

    return {
      output: ""
    };
  }
});
```


## 追加データを含むログ出力

Logger の各メソッドは、追加データ用の任意の第2引数を受け取ります。これはオブジェクト、文字列、数値など、あらゆる値を指定できます。

この例では、ログメッセージに、キーが `agent`、値が `testAgent` インスタンスのオブジェクトが含まれます。

```typescript {11} filename="src/mastra/workflows/test-workflow.ts" showLineNumbers copy
import { createWorkflow, createStep } from "@mastra/core/workflows";
import { z } from "zod";

const step1 = createStep({
  //...
  execute: async ({ mastra }) => {

    const testAgent = mastra.getAgent("testAgent");

    const logger = mastra.getLogger();
    logger.info("ワークフローの情報ログ", { agent: testAgent });

    return {
      output: ""
    };
  }
});

export const testWorkflow = createWorkflow({...})
  .then(step1)
  .commit();
```

---
title: "参考：Sarvam | 语音"
description: "Sarvam 类的文档，提供语音合成和语音识别能力。"
packages:
  - "@mastra/voice-sarvam"
---

# Sarvam

Mastra 中的 SarvamVoice 类使用 Sarvam AI 模型提供语音合成和语音识别能力。

## 使用示例

```typescript
import { SarvamVoice } from "@mastra/voice-sarvam";

// 使用环境变量默认配置初始化
const voice = new SarvamVoice();

// 或使用特定配置初始化
const voiceWithConfig = new SarvamVoice({
   speechModel: {
    model: "bulbul:v1",
    apiKey: process.env.SARVAM_API_KEY!,
    language: "en-IN",
    properties: {
      pitch: 0,
      pace: 1.65,
      loudness: 1.5,
      speech_sample_rate: 8000,
      enable_preprocessing: false,
      eng_interpolation_wt: 123,
    },
  },
  listeningModel: {
    model: "saarika:v2",
    apiKey: process.env.SARVAM_API_KEY!,
    languageCode: "en-IN",
     filetype?: 'wav';
  },
  speaker: "meera", // 默认语音
});


// 将文本转换为语音
const audioStream = await voice.speak("Hello, how can I help you?");


// 将语音转换为文本
const text = await voice.listen(audioStream, {
  filetype: "wav",
});
```

### Sarvam API 文档 -

https://docs.sarvam.ai/api-reference-docs/endpoints/text-to-speech

## 配置

### 构造函数选项

<PropertiesTable
  content={[
    {
      name: "speechModel",
      type: "SarvamVoiceConfig",
      description: "语音合成配置。",
      isOptional: true,
      defaultValue: "{ model: 'bulbul:v1', language: 'en-IN' }",
    },
    {
      name: "speaker",
      type: "SarvamVoiceId",
      description:
        "用于输出音频的说话者。如果未提供，将默认使用 Meera。可用选项 - meera、pavithra、maitreyi、arvind、amol、amartya、diya、neel、misha、vian、arjun、maya",
      isOptional: true,
      defaultValue: "'meera'",
    },
    {
      name: "listeningModel",
      type: "SarvamListenOptions",
      description: "语音识别配置。",
      isOptional: true,
      defaultValue: "{ model: 'saarika:v2', language_code: 'unknown' }",
    },
  ]}
/>

### SarvamVoiceConfig

<PropertiesTable
  content={[
    {
      name: "apiKey",
      type: "string",
      description:
        "Sarvam API 密钥。回退到 SARVAM_API_KEY 环境变量。",
      isOptional: true,
    },
    {
      name: "model",
      type: "SarvamTTSModel",
      description: "指定用于语音合成的模型。",
      isOptional: true,
      defaultValue: "'bulbul:v1'",
    },
    {
      name: "language",
      type: "SarvamTTSLanguage",
      description:
        "语音合成的目标语言。可用选项：hi-IN、bn-IN、kn-IN、ml-IN、mr-IN、od-IN、pa-IN、ta-IN、te-IN、en-IN、gu-IN",
      isOptional: false,
      defaultValue: "'en-IN'",
    },
    {
      name: "properties",
      type: "object",
      description: "用于自定义的附加语音属性。",
      isOptional: true,
    },
    {
      name: "properties.pitch",
      type: "number",
      description:
        "控制音频的音调。较低的值会产生较深的声音，而较高的值会使声音更尖锐。合适的范围是 -0.75 到 0.75。",
      isOptional: true,
    },
    {
      name: "properties.pace",
      type: "number",
      description:
        "控制音频的速度。较低的值会导致语速较慢，而较高的值会使语速更快。合适的范围是 0.5 到 2.0。默认值为 1.0。必需范围：0.3 <= x <= 3",
      isOptional: true,
    },
    {
      name: "properties.loudness",
      type: "number",
      description:
        "控制音频的响度。较低的值会产生较安静的音频，而较高的值会使音频更响亮。合适的范围是 0.3 到 3.0。必需范围：0 <= x <= 3",
      isOptional: true,
    },
    {
      name: "properties.speech_sample_rate",
      type: "8000 | 16000 | 22050",
      description: "音频采样率（Hz）。",
      isOptional: true,
    },
    {
      name: "properties.enable_preprocessing",
      type: "boolean",
      description:
        "控制是否对英语单词和数字实体（例如数字、日期）进行规范化。设置为 true 以更好地处理混合语言文本。默认为 false。",
      isOptional: true,
    },
    {
      name: "properties.eng_interpolation_wt",
      type: "number",
      description: "在编码器处与英语说话者进行插值的权重。",
      isOptional: true,
    },
  ]}
/>

### SarvamListenOptions

<PropertiesTable
  content={[
    {
      name: "apiKey",
      type: "string",
      description:
        "Sarvam API 密钥。回退到 SARVAM_API_KEY 环境变量。",
      isOptional: true,
    },
    {
      name: "model",
      type: "SarvamSTTModel",
      description:
        "指定用于语音转文本的模型。注意：- 默认模型是 saarika:v2。可用选项：saarika:v1、saarika:v2、saarika:flash",
      isOptional: true,
      defaultValue: "'saarika:v2'",
    },
    {
      name: "languageCode",
      type: "SarvamSTTLanguage",
      description:
        "指定输入音频的语言。此参数是确保准确转录所必需的。对于 saarika:v1 模型，此参数是必需的。对于 saarika:v2 模型，这是可选的。unknown：当语言未知时使用；API 将自动检测语言。注意：- saarika:v1 模型不支持 unknown 语言代码。可用选项：unknown、hi-IN、bn-IN、kn-IN、ml-IN、mr-IN、od-IN、pa-IN、ta-IN、te-IN、en-IN、gu-IN",
      isOptional: true,
      defaultValue: "'unknown'",
    },
    {
      name: "filetype",
      type: "'mp3' | 'wav'",
      description: "输入流的音频格式。",
      isOptional: true,
    },
  ]}
/>

## 方法

### speak()

使用 Sarvam 的语音合成模型将文本转换为语音。

<PropertiesTable
  content={[
    {
      name: "input",
      type: "string | NodeJS.ReadableStream",
      description: "要转换为语音的文本或文本流。",
      isOptional: false,
    },
    {
      name: "options.speaker",
      type: "SarvamVoiceId",
      description: "用于语音合成的语音 ID。",
      isOptional: true,
      defaultValue: "构造函数的 speaker 值",
    },
  ]}
/>

返回：`Promise<NodeJS.ReadableStream>`

### listen()

使用 Sarvam 的语音识别模型转录音频。

<PropertiesTable
  content={[
    {
      name: "input",
      type: "NodeJS.ReadableStream",
      description: "要转录的音频流。",
      isOptional: false,
    },
    {
      name: "options",
      type: "SarvamListenOptions",
      description: "语音识别的配置选项。",
      isOptional: true,
    },
  ]}
/>

返回：`Promise<string>`

### getSpeakers()

返回可用语音选项的数组。

返回：`Promise<Array<{voiceId: SarvamVoiceId}>>`

## 注意事项

- API 密钥可通过构造函数选项或 `SARVAM_API_KEY` 环境变量提供
- 如果未提供 API 密钥，构造函数将抛出错误
- 该服务与 Sarvam AI API 通信，地址为 `https://api.sarvam.ai`
- 音频作为包含二进制音频数据的流返回
- 语音识别支持 mp3 和 wav 音频格式

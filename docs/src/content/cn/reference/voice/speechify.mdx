---
title: "参考：Speechify | 语音"
description: "Speechify 语音实现的文档，提供语音合成能力。"
packages:
  - "@mastra/voice-speechify"
---

# Speechify

Mastra 中的 Speechify 语音实现使用 Speechify 的 API 提供语音合成能力。

## 使用示例

```typescript
import { SpeechifyVoice } from "@mastra/voice-speechify";

// 使用默认配置初始化（使用 SPEECHIFY_API_KEY 环境变量）
const voice = new SpeechifyVoice();

// 使用自定义配置初始化
const voice = new SpeechifyVoice({
  speechModel: {
    name: "simba-english",
    apiKey: "your-api-key",
  },
  speaker: "george", // 默认语音
});

// 将文本转换为语音
const audioStream = await voice.speak("Hello, world!", {
  speaker: "henry", // 覆盖默认语音
});
```

## 构造函数参数

<PropertiesTable
  content={[
    {
      name: "speechModel",
      type: "SpeechifyConfig",
      description: "语音合成功能的配置",
      isOptional: true,
      defaultValue: "{ name: 'simba-english' }",
    },
    {
      name: "speaker",
      type: "SpeechifyVoiceId",
      description: "用于语音合成的默认语音 ID",
      isOptional: true,
      defaultValue: "'george'",
    },
  ]}
/>

### SpeechifyConfig

<PropertiesTable
  content={[
    {
      name: "name",
      type: "VoiceModelName",
      description: "要使用的 Speechify 模型",
      isOptional: true,
      defaultValue: "'simba-english'",
    },
    {
      name: "apiKey",
      type: "string",
      description:
        "Speechify API 密钥。回退到 SPEECHIFY_API_KEY 环境变量",
      isOptional: true,
    },
  ]}
/>

## 方法

### speak()

使用配置的语音模型和语音将文本转换为语音。

<PropertiesTable
  content={[
    {
      name: "input",
      type: "string | NodeJS.ReadableStream",
      description:
        "要转换为语音的文本。如果提供了流，将先转换为文本。",
      isOptional: false,
    },
    {
      name: "options.speaker",
      type: "string",
      description: "覆盖此请求的默认语音",
      isOptional: true,
      defaultValue: "构造函数的 speaker 值",
    },
    {
      name: "options.model",
      type: "VoiceModelName",
      description: "覆盖此请求的默认模型",
      isOptional: true,
      defaultValue: "构造函数的 model 值",
    },
  ]}
/>

返回：`Promise<NodeJS.ReadableStream>`

### getSpeakers()

返回可用语音选项的数组，每个节点包含：

<PropertiesTable
  content={[
    {
      name: "voiceId",
      type: "string",
      description: "语音的唯一标识符",
    },
    {
      name: "name",
      type: "string",
      description: "语音的显示名称",
    },
    {
      name: "language",
      type: "string",
      description: "语音的语言代码",
    },
    {
      name: "gender",
      type: "string",
      description: "语音的性别",
    },
  ]}
/>

### listen()

Speechify 不支持此方法，会抛出错误。Speechify 不提供语音识别功能。

## 注意事项

- Speechify 需要 API 密钥进行身份验证
- 默认模型是 'simba-english'
- 不支持语音识别功能
- 可以通过 speak() 方法的 options 参数传递附加音频流选项

---
title: "Express | æ¡†æ¶"
description: "å¼€å§‹ä½¿ç”¨ Mastra å’Œ Express"
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# åœ¨æ‚¨çš„ Express é¡¹ç›®ä¸­é›†æˆ Mastra

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ Mastra å’Œ Express æ„å»ºä¸€ä¸ªå·¥å…·è°ƒç”¨å‹ AI ä»£ç†ã€‚ä½¿ç”¨ [Express æœåŠ¡å™¨é€‚é…å™¨](/reference/server/express-adapter)ï¼Œæ‚¨å¯ä»¥å°†ä»£ç†å…¬å¼€ä¸º HTTP ç«¯ç‚¹ï¼Œè€Œæ— éœ€è‡ªè¡Œç¼–å†™è·¯ç”±æˆ–è¿è¡Œç‹¬ç«‹çš„ Mastra æœåŠ¡å™¨ã€‚

## å‰ç½®æ¡ä»¶

- æ‚¨éœ€è¦ä¸€ä¸ªæ”¯æŒçš„[æ¨¡å‹æä¾›å•†](/models)çš„ API keyã€‚å¦‚æœæ‚¨æ²¡æœ‰åå¥½ï¼Œè¯·ä½¿ç”¨ [OpenAI](/models/providers/openai)ã€‚
- å®‰è£… Node.js `v22.13.0` æˆ–æ›´é«˜ç‰ˆæœ¬

## åˆ›å»ºæ–°çš„ Express åº”ç”¨ç¨‹åºï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ª Express åº”ç”¨ç¨‹åºï¼Œè¯·è·³åˆ°ä¸‹ä¸€æ­¥ã€‚

å…‹éš†æ­¤[æ ·æ¿ä»“åº“](https://github.com/mastra-ai/express-ts-boilerplate)å¹¶å®‰è£…ä¾èµ–é¡¹ï¼š

<Tabs>
<TabItem value="https" label="HTTPS">

```bash npm2yarn
git clone https://github.com/mastra-ai/express-ts-boilerplate.git
cd express-ts-boilerplate
npm install
```

</TabItem>
<TabItem value="ssh" label="SSH">

```bash npm2yarn
git clone git@github.com:mastra-ai/express-ts-boilerplate.git
cd express-ts-boilerplate
npm install
```

</TabItem>
</Tabs>

## åˆå§‹åŒ– Mastra

åœ¨ Express é¡¹ç›®ç›®å½•ä¸­ï¼Œè¿è¡Œ [`mastra init`](/reference/cli/mastra#mastra-init)ã€‚

å½“æç¤ºæ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªæä¾›å•†ï¼ˆä¾‹å¦‚ OpenAIï¼‰å¹¶è¾“å…¥æ‚¨çš„ keyï¼š

```bash
npx mastra@latest init
```

è¿™ä¼šåˆ›å»ºä¸€ä¸ª `src/mastra` æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç¤ºä¾‹å¤©æ°”ä»£ç†ä»¥åŠä»¥ä¸‹æ–‡ä»¶ï¼š

- `index.ts` - Mastra é…ç½®ï¼ŒåŒ…æ‹¬å†…å­˜
- `tools/weather-tool.ts` - ç”¨äºè·å–ç»™å®šä½ç½®å¤©æ°”çš„å·¥å…·
- `agents/weather-agent.ts` - ä¸€ä¸ªå¸¦æœ‰ä½¿ç”¨å·¥å…·æç¤ºè¯çš„å¤©æ°”ä»£ç†

ç¨åæ‚¨ä¼šå°† `src/mastra/index.ts` æ–‡ä»¶ä¼ é€’ç»™ Express æœåŠ¡å™¨é€‚é…å™¨ã€‚

## æ·»åŠ æœåŠ¡å™¨é€‚é…å™¨

å®‰è£… Express æœåŠ¡å™¨é€‚é…å™¨åŒ…ï¼š

```bash npm2yarn
npm install @mastra/express@latest
```

æ‰“å¼€ Express å…¥å£æ–‡ä»¶ `src/index.ts`ï¼Œæ·»åŠ æ‰€éœ€çš„å¯¼å…¥å’Œåˆå§‹åŒ–ä»£ç ï¼š

```typescript {2-3,11-12} title="src/index.ts"
import express, { type Request, type Response } from "express";
import { MastraServer } from "@mastra/express";
import { mastra } from "./mastra";

const app = express();
const PORT = process.env.PORT || 3000;

// ä¸­é—´ä»¶
app.use(express.json());

const server = new MastraServer({ app, mastra });
await server.init();

// è·¯ç”±
app.get("/", (_req: Request, res: Response) => {
  res.json({ message: "Hello, World!" });
});

// å¯åŠ¨æœåŠ¡å™¨
app.listen(PORT, () => {
  console.log(`Server is running on http://localhost:${PORT}`);
});
```

`MastraServer` ä½¿ç”¨ç°æœ‰çš„ Express `app` å’Œæ ¹ `mastra` å®ä¾‹è¿›è¡Œåˆå§‹åŒ–ã€‚è°ƒç”¨ `init()` ä¼šæ³¨å†Œ Mastra ä¸­é—´ä»¶å¹¶å…¬å¼€æ‰€æœ‰å¯ç”¨çš„ Mastra ç«¯ç‚¹ã€‚

## æµ‹è¯•æ‚¨çš„ä»£ç†

é»˜è®¤æƒ…å†µä¸‹ï¼ŒMastra çš„ç«¯ç‚¹æ·»åŠ åœ¨ `/api` å­è·¯å¾„ä¸‹ï¼Œå¹¶ä½¿ç”¨æ‚¨çš„ä»£ç†/å·¥ä½œæµ IDã€‚ç”± `mastra init` åˆ›å»ºçš„é»˜è®¤ `weather-agent` å¯åœ¨ `/api/agents/weather-agent` è®¿é—®ã€‚

å¯åŠ¨æ‚¨çš„ Express æœåŠ¡å™¨ï¼š

```bash
npm run start
```

åœ¨å•ç‹¬çš„ç»ˆç«¯çª—å£ä¸­ï¼Œä½¿ç”¨ `curl` å‘å¤©æ°”ä»£ç†æé—®ï¼š

```bash
curl -X POST http://localhost:3000/api/agents/weather-agent/generate -H "Content-Type: application/json" -d "{\"messages\":[{\"role\":\"user\",\"content\":\"What is the weather like in Seoul?\"}]}"
```

## åç»­æ­¥éª¤

æ­å–œæ‚¨ä½¿ç”¨ Express æ„å»ºäº† Mastra ä»£ç†ï¼ğŸ‰

ä»è¿™é‡Œå¼€å§‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±çš„å·¥å…·å’Œé€»è¾‘æ‰©å±•é¡¹ç›®ï¼š

- äº†è§£æ›´å¤šå…³äº[ä»£ç†](/docs/cn/docs/agents/overview)
- ä¸ºæ‚¨çš„ä»£ç†æä¾›è‡ªå·±çš„[å·¥å…·](/docs/cn/docs/agents/using-tools)
- ä¸ºæ‚¨çš„ä»£ç†æ·»åŠ ç±»ä¼¼äººç±»çš„[å†…å­˜](/docs/cn/docs/agents/agent-memory)

å‡†å¤‡å°±ç»ªåï¼Œé˜…è¯»æ›´å¤šå…³äº Mastra å¦‚ä½•ä¸ Express é›†æˆçš„ä¿¡æ¯ï¼š

- [æœåŠ¡å™¨é€‚é…å™¨](/docs/cn/docs/server/server-adapters)

---
title: "æŒ‡å—ï¼šæ„å»º AI å¨å¸ˆåŠ©æ‰‹ | Mastra ä»£ç†æŒ‡å—"
description: æœ‰å…³åœ¨ Mastra ä¸­åˆ›å»ºå¨å¸ˆåŠ©æ‰‹ä»£ç†ä»¥å¸®åŠ©ç”¨æˆ·ç”¨å¯ç”¨é£Ÿæçƒ¹é¥ªè†³é£Ÿçš„æŒ‡å—ã€‚
---

import Steps from "@site/src/components/Steps";
import StepItem from "@site/src/components/StepItem";
import YouTube from "@site/src/components/YouTube-player";

# æ„å»º AI å¨å¸ˆåŠ©æ‰‹

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ª"å¨å¸ˆåŠ©æ‰‹"ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç”¨å¯ç”¨çš„é£Ÿæçƒ¹é¥ªè†³é£Ÿã€‚

æ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºä»£ç†å¹¶å°†å…¶æ³¨å†Œåˆ° Mastraã€‚æ¥ä¸‹æ¥ï¼Œæ‚¨å°†é€šè¿‡ç»ˆç«¯ä¸ä»£ç†äº¤äº’ï¼Œå¹¶äº†è§£ä¸åŒçš„å“åº”æ ¼å¼ã€‚æœ€åï¼Œæ‚¨å°†é€šè¿‡ Mastra çš„æœ¬åœ° API ç«¯ç‚¹è®¿é—®ä»£ç†ã€‚

<YouTube id="_tZhOqHCrF0" />

## å‰ç½®æ¡ä»¶

- å·²å®‰è£… Node.js `v22.13.0` æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¥è‡ªæ”¯æŒçš„[æ¨¡å‹æä¾›å•†](/models)çš„ API å¯†é’¥
- ç°æœ‰çš„ Mastra é¡¹ç›®ï¼ˆè¯·éµå¾ª[å®‰è£…æŒ‡å—](/guides/getting-started/quickstart)è®¾ç½®æ–°é¡¹ç›®ï¼‰

## åˆ›å»ºä»£ç†

è¦åœ¨ Mastra ä¸­åˆ›å»ºä»£ç†ï¼Œè¯·ä½¿ç”¨ `Agent` ç±»æ¥å®šä¹‰å®ƒï¼Œç„¶åå°†å…¶æ³¨å†Œåˆ° Mastraã€‚

<Steps>

<StepItem>

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ `src/mastra/agents/chefAgent.ts` å¹¶å®šä¹‰æ‚¨çš„ä»£ç†ï¼š

```ts title="src/mastra/agents/chefAgent.ts"
import { Agent } from "@mastra/core/agent";

export const chefAgent = new Agent({
  id: "chef-agent",
  name: "chef-agent",
  instructions:
    "You are Michel, a practical and experienced home chef" +
    "You help people cook with whatever ingredients they have available.",
  model: "openai/gpt-5.1",
});
```

</StepItem>

<StepItem>

åœ¨æ‚¨çš„ `src/mastra/index.ts` æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œä»£ç†ï¼š

```ts title="src/mastra/index.ts" {2, 5}
import { Mastra } from "@mastra/core";
import { chefAgent } from "./agents/chefAgent";

export const mastra = new Mastra({
  agents: { chefAgent },
});
```

</StepItem>

</Steps >

## ä¸ä»£ç†äº¤äº’

æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæ‚¨å¯ä»¥ä»¥ä¸åŒçš„æ ¼å¼ä¸ä»£ç†äº¤äº’å¹¶è·å–å“åº”ã€‚åœ¨ä»¥ä¸‹æ­¥éª¤ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ç”Ÿæˆã€æµå¼ä¼ è¾“å’Œè·å–ç»“æ„åŒ–è¾“å‡ºã€‚

<Steps>

<StepItem>

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ `src/index.ts` å¹¶å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ª `main()` å‡½æ•°ã€‚åœ¨å…¶ä¸­ï¼Œåˆ¶ä½œä¸€ä¸ªæŸ¥è¯¢æ¥è¯¢é—®ä»£ç†å¹¶è®°å½•å…¶å“åº”ã€‚

```ts title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";

async function main() {
  const query =
    "In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?";
  console.log(`Query: ${query}`);

  const response = await chefAgent.generate([{ role: "user", content: query }]);
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.text);
}

main();
```

ä¹‹åï¼Œè¿è¡Œè„šæœ¬ï¼š

```bash
npx bun src/index.ts
```

æ‚¨åº”è¯¥è·å¾—ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
Query: In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?

ğŸ‘¨â€ğŸ³ Chef Michel: You can make a delicious pasta al pomodoro! Here's how...
```

</StepItem>

<StepItem>

åœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯èƒ½ç­‰å¾…å“åº”è€Œæ²¡æœ‰ä»»ä½•è¿›åº¦æŒ‡ç¤ºã€‚è¦åœ¨ä»£ç†åˆ›å»ºå“åº”æ—¶æ˜¾ç¤ºå…¶è¾“å‡ºï¼Œæ‚¨åº”è¯¥æ”¹ä¸ºå°†å“åº”æµå¼ä¼ è¾“åˆ°ç»ˆç«¯ã€‚

```ts title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";

async function main() {
  const query =
    "Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.";
  console.log(`Query: ${query}`);

  const stream = await chefAgent.stream([{ role: "user", content: query }]);

  console.log("\n Chef Michel: ");

  for await (const chunk of stream.textStream) {
    process.stdout.write(chunk);
  }

  console.log("\n\nâœ… Recipe complete!");
}

main();
```

ä¹‹åï¼Œå†æ¬¡è¿è¡Œè„šæœ¬ï¼š

```bash
npx bun src/index.ts
```

æ‚¨åº”è¯¥è·å¾—ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºã€‚ä½†è¿™æ¬¡æ‚¨å¯ä»¥é€è¡Œé˜…è¯»ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤§å—ã€‚

```
Query: Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.

ğŸ‘¨â€ğŸ³ Chef Michel:
Great! You can make a comforting chicken curry...

âœ… Recipe complete!
```

</StepItem>

<StepItem>

é™¤äº†å‘äººç±»æ˜¾ç¤ºä»£ç†çš„å“åº”å¤–ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†å…¶ä¼ é€’åˆ°ä»£ç çš„å¦ä¸€éƒ¨åˆ†ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œæ‚¨çš„ä»£ç†åº”è¯¥è¿”å›[ç»“æ„åŒ–è¾“å‡º](/docs/cn/docs/agents/overview#structured-output)ã€‚

å°†æ‚¨çš„ `src/index.ts` æ›´æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š

```ts title="src/index.ts"
import { chefAgent } from "./mastra/agents/chefAgent";
import { z } from "zod";

async function main() {
  const query =
    "I want to make lasagna, can you generate a lasagna recipe for me?";
  console.log(`Query: ${query}`);

  // Define the Zod schema
  const schema = z.object({
    ingredients: z.array(
      z.object({
        name: z.string(),
        amount: z.string(),
      }),
    ),
    steps: z.array(z.string()),
  });

  const response = await chefAgent.generate(
    [{ role: "user", content: query }],
    {
      structuredOutput: {
        schema,
      },
    },
  );
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.object);
}

main();
```

å†æ¬¡è¿è¡Œè„šæœ¬åï¼Œæ‚¨åº”è¯¥è·å¾—ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
Query: I want to make lasagna, can you generate a lasagna recipe for me?

ğŸ‘¨â€ğŸ³ Chef Michel: {
  ingredients: [
    { name: "Lasagna noodles", amount: "12 sheets" },
    { name: "Ground beef", amount: "1 pound" },
  ],
  steps: [
    "Preheat oven to 375Â°F (190Â°C).",
    "Cook the lasagna noodles according to package instructions.",
  ]
}
```

</StepItem>

</Steps >

## è¿è¡Œä»£ç†æœåŠ¡å™¨

äº†è§£å¦‚ä½•é€šè¿‡ Mastra çš„ API ä¸æ‚¨çš„ä»£ç†äº¤äº’ã€‚

<Steps>

<StepItem>

æ‚¨å¯ä»¥ä½¿ç”¨ `mastra dev` å‘½ä»¤å°†ä»£ç†ä½œä¸ºæœåŠ¡è¿è¡Œï¼š

```bash
mastra dev
```

è¿™å°†å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå…¬å¼€ä¸æ‚¨æ³¨å†Œçš„ä»£ç†äº¤äº’çš„ç«¯ç‚¹ã€‚åœ¨[å·¥ä½œå®¤](/docs/cn/docs/getting-started/studio)ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡ UI æµ‹è¯•æ‚¨çš„ä»£ç†ã€‚

</StepItem>

<StepItem>

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`mastra dev` åœ¨ `http://localhost:4111` ä¸Šè¿è¡Œã€‚æ‚¨çš„å¨å¸ˆåŠ©æ‰‹ä»£ç†å°†åœ¨ä»¥ä¸‹ä½ç½®å¯ç”¨ï¼š

```
POST http://localhost:4111/api/agents/chefAgent/generate
```

</StepItem>

<StepItem>

æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œä¸­çš„ `curl` ä¸ä»£ç†äº¤äº’ï¼š

```bash
curl -X POST http://localhost:4111/api/agents/chefAgent/generate \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": "I have eggs, flour, and milk. What can I make?"
      }
    ]
  }'
```

**ç¤ºä¾‹å“åº”ï¼š**

```json
{
  "text": "You can make delicious pancakes! Here's a simple recipe..."
}
```

</StepItem>

</Steps>
